"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _appiumSupport = require("appium-support");

var _doctor = require("./doctor");

var _utils = require("./utils");

class EnvVarAndPathCheck extends _doctor.DoctorCheck {
  constructor(varName) {
    super();
    this.varName = varName;
  }

  diagnose() {
    var _this = this;

    return (0, _asyncToGenerator2.default)(function* () {
      let varValue = process.env[_this.varName];

      if (typeof varValue === 'undefined') {
        return (0, _utils.nok)(`${_this.varName} is NOT set!`);
      }

      return (yield _appiumSupport.fs.exists(varValue)) ? (0, _utils.ok)(`${_this.varName} is set to: ${varValue}`) : (0, _utils.nok)(`${_this.varName} is set to '${varValue}' but this is NOT a valid path!`);
    })();
  }

  fix() {
    return `Manually configure ${this.varName}.`;
  }

}

var _default = EnvVarAndPathCheck;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9lbnYuanMiXSwibmFtZXMiOlsiRW52VmFyQW5kUGF0aENoZWNrIiwiRG9jdG9yQ2hlY2siLCJjb25zdHJ1Y3RvciIsInZhck5hbWUiLCJkaWFnbm9zZSIsInZhclZhbHVlIiwicHJvY2VzcyIsImVudiIsImZzIiwiZXhpc3RzIiwiZml4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUlBLE1BQU1BLGtCQUFOLFNBQWlDQyxtQkFBakMsQ0FBNkM7QUFDM0NDLEVBQUFBLFdBQVcsQ0FBRUMsT0FBRixFQUFXO0FBQ3BCO0FBQ0EsU0FBS0EsT0FBTCxHQUFlQSxPQUFmO0FBQ0Q7O0FBRUtDLEVBQUFBLFFBQU4sR0FBa0I7QUFBQTs7QUFBQTtBQUNoQixVQUFJQyxRQUFRLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLEtBQUksQ0FBQ0osT0FBakIsQ0FBZjs7QUFDQSxVQUFJLE9BQU9FLFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDbkMsZUFBTyxnQkFBSyxHQUFFLEtBQUksQ0FBQ0YsT0FBUSxjQUFwQixDQUFQO0FBQ0Q7O0FBQ0QsYUFBTyxPQUFNSyxrQkFBR0MsTUFBSCxDQUFVSixRQUFWLENBQU4sSUFBNEIsZUFBSSxHQUFFLEtBQUksQ0FBQ0YsT0FBUSxlQUFjRSxRQUFTLEVBQTFDLENBQTVCLEdBQ0wsZ0JBQUssR0FBRSxLQUFJLENBQUNGLE9BQVEsZUFBY0UsUUFBUyxpQ0FBM0MsQ0FERjtBQUxnQjtBQU9qQjs7QUFFREssRUFBQUEsR0FBRyxHQUFJO0FBQ0wsV0FBUSxzQkFBcUIsS0FBS1AsT0FBUSxHQUExQztBQUNEOztBQWpCMEM7O2VBcUI5Qkgsa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcyB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCB7IERvY3RvckNoZWNrIH0gZnJvbSAnLi9kb2N0b3InO1xuaW1wb3J0IHsgb2ssIG5vayB9IGZyb20gJy4vdXRpbHMnO1xuXG5cbi8vIENoZWNrIGVudiB2YXJpYWJsZXNcbmNsYXNzIEVudlZhckFuZFBhdGhDaGVjayBleHRlbmRzIERvY3RvckNoZWNrIHtcbiAgY29uc3RydWN0b3IgKHZhck5hbWUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XG4gIH1cblxuICBhc3luYyBkaWFnbm9zZSAoKSB7XG4gICAgbGV0IHZhclZhbHVlID0gcHJvY2Vzcy5lbnZbdGhpcy52YXJOYW1lXTtcbiAgICBpZiAodHlwZW9mIHZhclZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIG5vayhgJHt0aGlzLnZhck5hbWV9IGlzIE5PVCBzZXQhYCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBmcy5leGlzdHModmFyVmFsdWUpID8gb2soYCR7dGhpcy52YXJOYW1lfSBpcyBzZXQgdG86ICR7dmFyVmFsdWV9YCkgOlxuICAgICAgbm9rKGAke3RoaXMudmFyTmFtZX0gaXMgc2V0IHRvICcke3ZhclZhbHVlfScgYnV0IHRoaXMgaXMgTk9UIGEgdmFsaWQgcGF0aCFgKTtcbiAgfVxuXG4gIGZpeCAoKSB7XG4gICAgcmV0dXJuIGBNYW51YWxseSBjb25maWd1cmUgJHt0aGlzLnZhck5hbWV9LmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBFbnZWYXJBbmRQYXRoQ2hlY2s7XG4iXSwiZmlsZSI6ImxpYi9lbnYuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
