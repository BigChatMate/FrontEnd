"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.configure = configure;
exports.fixIt = fixIt;
exports.clear = clear;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _utils = require("./utils");

let persistentResponse;
const fixItQuestion = {
  type: 'list',
  name: 'confirmation',
  message: 'Fix it:',
  choices: ['yes', 'no', 'always', 'never'],

  filter(val) {
    return val.toLowerCase();
  }

};

function configure(opts) {
  if (opts.yes) {
    persistentResponse = 'yes';
  }

  if (opts.no) {
    persistentResponse = 'no';
  }
}

function clear() {
  persistentResponse = undefined;
}

function fixIt() {
  return _fixIt.apply(this, arguments);
}

function _fixIt() {
  _fixIt = (0, _asyncToGenerator2.default)(function* () {
    if (persistentResponse) {
      return persistentResponse;
    }

    let resp = yield _utils.inquirer.prompt(fixItQuestion);
    persistentResponse = resp.confirmation === 'always' ? 'yes' : persistentResponse;
    persistentResponse = resp.confirmation === 'never' ? 'no' : persistentResponse;
    return persistentResponse || resp.confirmation;
  });
  return _fixIt.apply(this, arguments);
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9wcm9tcHQuanMiXSwibmFtZXMiOlsicGVyc2lzdGVudFJlc3BvbnNlIiwiZml4SXRRdWVzdGlvbiIsInR5cGUiLCJuYW1lIiwibWVzc2FnZSIsImNob2ljZXMiLCJmaWx0ZXIiLCJ2YWwiLCJ0b0xvd2VyQ2FzZSIsImNvbmZpZ3VyZSIsIm9wdHMiLCJ5ZXMiLCJubyIsImNsZWFyIiwidW5kZWZpbmVkIiwiZml4SXQiLCJyZXNwIiwiaW5xdWlyZXIiLCJwcm9tcHQiLCJjb25maXJtYXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQSxJQUFJQSxrQkFBSjtBQUVBLE1BQU1DLGFBQWEsR0FBRztBQUNwQkMsRUFBQUEsSUFBSSxFQUFFLE1BRGM7QUFFcEJDLEVBQUFBLElBQUksRUFBRSxjQUZjO0FBR3BCQyxFQUFBQSxPQUFPLEVBQUUsU0FIVztBQUlwQkMsRUFBQUEsT0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLElBQVIsRUFBYyxRQUFkLEVBQXdCLE9BQXhCLENBSlc7O0FBS3BCQyxFQUFBQSxNQUFNLENBQUVDLEdBQUYsRUFBTztBQUNYLFdBQU9BLEdBQUcsQ0FBQ0MsV0FBSixFQUFQO0FBQ0Q7O0FBUG1CLENBQXRCOztBQVVBLFNBQVNDLFNBQVQsQ0FBb0JDLElBQXBCLEVBQTBCO0FBQ3hCLE1BQUlBLElBQUksQ0FBQ0MsR0FBVCxFQUFjO0FBQ1pYLElBQUFBLGtCQUFrQixHQUFHLEtBQXJCO0FBQ0Q7O0FBQ0QsTUFBSVUsSUFBSSxDQUFDRSxFQUFULEVBQWE7QUFDWFosSUFBQUEsa0JBQWtCLEdBQUcsSUFBckI7QUFDRDtBQUNGOztBQUVELFNBQVNhLEtBQVQsR0FBa0I7QUFDaEJiLEVBQUFBLGtCQUFrQixHQUFHYyxTQUFyQjtBQUNEOztTQUVjQyxLOzs7OzsyQ0FBZixhQUF3QjtBQUN0QixRQUFJZixrQkFBSixFQUF3QjtBQUN0QixhQUFPQSxrQkFBUDtBQUNEOztBQUNELFFBQUlnQixJQUFJLFNBQVNDLGdCQUFTQyxNQUFULENBQWdCakIsYUFBaEIsQ0FBakI7QUFDQUQsSUFBQUEsa0JBQWtCLEdBQUdnQixJQUFJLENBQUNHLFlBQUwsS0FBc0IsUUFBdEIsR0FBaUMsS0FBakMsR0FBeUNuQixrQkFBOUQ7QUFDQUEsSUFBQUEsa0JBQWtCLEdBQUdnQixJQUFJLENBQUNHLFlBQUwsS0FBc0IsT0FBdEIsR0FBZ0MsSUFBaEMsR0FBdUNuQixrQkFBNUQ7QUFDQSxXQUFPQSxrQkFBa0IsSUFBSWdCLElBQUksQ0FBQ0csWUFBbEM7QUFDRCxHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5xdWlyZXIgfSBmcm9tICcuL3V0aWxzJztcblxubGV0IHBlcnNpc3RlbnRSZXNwb25zZTtcblxuY29uc3QgZml4SXRRdWVzdGlvbiA9IHtcbiAgdHlwZTogJ2xpc3QnLFxuICBuYW1lOiAnY29uZmlybWF0aW9uJyxcbiAgbWVzc2FnZTogJ0ZpeCBpdDonLFxuICBjaG9pY2VzOiBbJ3llcycsICdubycsICdhbHdheXMnLCAnbmV2ZXInXSxcbiAgZmlsdGVyICh2YWwpIHtcbiAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNvbmZpZ3VyZSAob3B0cykge1xuICBpZiAob3B0cy55ZXMpIHtcbiAgICBwZXJzaXN0ZW50UmVzcG9uc2UgPSAneWVzJztcbiAgfVxuICBpZiAob3B0cy5ubykge1xuICAgIHBlcnNpc3RlbnRSZXNwb25zZSA9ICdubyc7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYXIgKCkge1xuICBwZXJzaXN0ZW50UmVzcG9uc2UgPSB1bmRlZmluZWQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZpeEl0ICgpIHtcbiAgaWYgKHBlcnNpc3RlbnRSZXNwb25zZSkge1xuICAgIHJldHVybiBwZXJzaXN0ZW50UmVzcG9uc2U7XG4gIH1cbiAgbGV0IHJlc3AgPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQoZml4SXRRdWVzdGlvbik7XG4gIHBlcnNpc3RlbnRSZXNwb25zZSA9IHJlc3AuY29uZmlybWF0aW9uID09PSAnYWx3YXlzJyA/ICd5ZXMnIDogcGVyc2lzdGVudFJlc3BvbnNlO1xuICBwZXJzaXN0ZW50UmVzcG9uc2UgPSByZXNwLmNvbmZpcm1hdGlvbiA9PT0gJ25ldmVyJyA/ICdubycgOiBwZXJzaXN0ZW50UmVzcG9uc2U7XG4gIHJldHVybiBwZXJzaXN0ZW50UmVzcG9uc2UgfHwgcmVzcC5jb25maXJtYXRpb247XG59XG5cbmV4cG9ydCB7IGNvbmZpZ3VyZSwgZml4SXQsIGNsZWFyIH07XG4iXSwiZmlsZSI6ImxpYi9wcm9tcHQuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
