"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _appiumIosDriver = require("appium-ios-driver");

var _asyncbox = require("asyncbox");

var _appiumSupport = require("appium-support");

var _logger = _interopRequireDefault(require("../logger"));

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

const IPHONE_EXTRA_WEB_COORD_SCROLL_OFFSET = -15;
const IPHONE_EXTRA_WEB_COORD_NON_SCROLL_OFFSET = 10;
const IPHONE_WEB_COORD_OFFSET = -10;
const IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET = 84;
const IPHONE_X_EXTRA_WEB_COORD_SCROLL_OFFSET = -90;
const IPHONE_X_EXTRA_WEB_COORD_NON_SCROLL_OFFSET = -10;
const IPHONE_X_WEB_COORD_OFFSET = 40;
const IPAD_EXTRA_WEB_COORD_SCROLL_OFFSET = -10;
const IPAD_EXTRA_WEB_COORD_NON_SCROLL_OFFSET = 0;
const IPAD_WEB_COORD_OFFSET = 10;
const IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET = 95;
const IPHONE_X_WIDTH = 375;
const IPHONE_X_HEIGHT = 812;
const ATOM_WAIT_TIMEOUT = 5 * 60000;
let extensions = {};
Object.assign(extensions, _appiumIosDriver.iosCommands.web);

extensions.getSafariIsIphone = function () {
  var _getSafariIsIphone = (0, _asyncToGenerator2.default)(function* () {
    try {
      const userAgent = yield this.execute('return navigator.userAgent');
      return userAgent.toLowerCase().includes('iphone');
    } catch (err) {
      _logger.default.warn(`Unable to find device type from useragent. Assuming iPhone`);

      _logger.default.debug(`Error: ${err.message}`);
    }

    return true;
  });

  return function getSafariIsIphone() {
    return _getSafariIsIphone.apply(this, arguments);
  };
}();

extensions.getSafariIsIphoneX = function () {
  var _getSafariIsIphone2 = (0, _asyncToGenerator2.default)(function* () {
    try {
      const script = 'return {height: window.screen.availHeight, width: window.screen.availWidth};';

      const _ref = yield this.execute(script),
            height = _ref.height,
            width = _ref.width;

      return height === IPHONE_X_HEIGHT && width === IPHONE_X_WIDTH || height === IPHONE_X_WIDTH && width === IPHONE_X_HEIGHT;
    } catch (err) {
      _logger.default.warn(`Unable to find device type from useragent. Assuming not iPhone X`);

      _logger.default.debug(`Error: ${err.message}`);
    }

    return false;
  });

  return function getSafariIsIphone() {
    return _getSafariIsIphone2.apply(this, arguments);
  };
}();

const getElementHeightMemoized = _lodash.default.memoize(function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (key, driver, el) {
    el = _appiumSupport.util.unwrapElement(el);
    return (yield driver.getNativeRect(el)).height;
  });

  return function (_x, _x2, _x3) {
    return _ref2.apply(this, arguments);
  };
}());

extensions.getExtraTranslateWebCoordsOffset = function () {
  var _ref3 = (0, _asyncToGenerator2.default)(function* (coords, webviewRect) {
    let offset = 0;
    const implicitWaitMs = this.implicitWaitMs;
    const isIphone = yield this.getSafariIsIphone();
    const isIphoneX = isIphone && (yield this.getSafariIsIphoneX());

    try {
      this.setImplicitWait(0);
      yield this.findNativeElementOrElements('accessibility id', 'ReloadButton', false);

      if (isIphoneX) {
        offset += IPHONE_X_EXTRA_WEB_COORD_NON_SCROLL_OFFSET;
      } else if (isIphone) {
        offset += IPHONE_EXTRA_WEB_COORD_NON_SCROLL_OFFSET;
      } else {
        offset += IPAD_EXTRA_WEB_COORD_NON_SCROLL_OFFSET;
      }
    } catch (err) {
      try {
        const el = yield this.findNativeElementOrElements('accessibility id', 'URL', false);
        offset -= yield getElementHeightMemoized('URLBar', this, el);
      } catch (ign) {}
    } finally {
      this.setImplicitWait(implicitWaitMs);
    }

    if (coords.y > webviewRect.height) {
      if (isIphoneX) {
        offset += IPHONE_X_EXTRA_WEB_COORD_SCROLL_OFFSET;
      } else if (isIphone) {
        offset += IPHONE_EXTRA_WEB_COORD_SCROLL_OFFSET;
      } else {
        offset += IPAD_EXTRA_WEB_COORD_SCROLL_OFFSET;
      }
    }

    offset += isIphone ? IPHONE_WEB_COORD_OFFSET : IPAD_WEB_COORD_OFFSET;
    offset += isIphoneX ? IPHONE_X_WEB_COORD_OFFSET : 0;

    _logger.default.debug(`Extra translated web coordinates offset: ${offset}`);

    return offset;
  });

  return function (_x4, _x5) {
    return _ref3.apply(this, arguments);
  };
}();

extensions.getExtraNativeWebTapOffset = (0, _asyncToGenerator2.default)(function* () {
  let offset = 0;
  const implicitWaitMs = this.implicitWaitMs;

  try {
    this.setImplicitWait(0);

    try {
      const el = yield this.findNativeElementOrElements('-ios predicate string', `name LIKE '*, Tab' AND visible = 1`, false);
      offset += yield getElementHeightMemoized('TabBar', this, el);
    } catch (ign) {}

    try {
      yield this.findNativeElementOrElements('accessibility id', 'Close app download offer', false);
      offset += (yield this.getSafariIsIphone()) ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
    } catch (ign) {}
  } finally {
    this.setImplicitWait(implicitWaitMs);
  }

  _logger.default.debug(`Additional native web tap offset computed: ${offset}`);

  return offset;
});

function tapWebElementNatively(_x6, _x7) {
  return _tapWebElementNatively.apply(this, arguments);
}

function _tapWebElementNatively() {
  _tapWebElementNatively = (0, _asyncToGenerator2.default)(function* (driver, atomsElement) {
    try {
      let text = yield driver.executeAtom('get_text', [atomsElement]);

      if (!text) {
        text = yield driver.executeAtom('get_attribute_value', [atomsElement, 'value']);
      }

      if (text) {
        const el = yield driver.findNativeElementOrElements('accessibility id', text, false);
        const rect = yield driver.proxyCommand(`/element/${el.ELEMENT}/rect`, 'GET');
        const coords = {
          x: Math.round(rect.x + rect.width / 2),
          y: Math.round(rect.y + rect.height / 2)
        };
        yield driver.clickCoords(coords);
        return true;
      }
    } catch (err) {
      _logger.default.warn(`Error attempting to click: ${err.message}`);
    }

    return false;
  });
  return _tapWebElementNatively.apply(this, arguments);
}

extensions.nativeWebTap = function () {
  var _ref5 = (0, _asyncToGenerator2.default)(function* (el) {
    const atomsElement = this.useAtomsElement(el);

    if (yield tapWebElementNatively(this, atomsElement)) {
      return;
    }

    _logger.default.warn('Unable to do simple native web tap. Attempting to convert coordinates');

    yield this.executeAtom('get_size', [atomsElement]);
    yield this.executeAtom('get_top_left_coordinates', [atomsElement]);

    const _ref6 = yield this.executeAtom('get_size', [atomsElement]),
          width = _ref6.width,
          height = _ref6.height;

    let _ref7 = yield this.executeAtom('get_top_left_coordinates', [atomsElement]),
        x = _ref7.x,
        y = _ref7.y;

    x += width / 2;
    y += height / 2;
    this.curWebCoords = {
      x,
      y
    };
    yield this.clickWebCoords();
  });

  return function (_x8) {
    return _ref5.apply(this, arguments);
  };
}();

extensions.clickCoords = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* (coords) {
    yield this.performTouch([{
      action: 'tap',
      options: coords
    }]);
  });

  return function (_x9) {
    return _ref8.apply(this, arguments);
  };
}();

extensions.translateWebCoords = function () {
  var _ref9 = (0, _asyncToGenerator2.default)(function* (coords) {
    var _this = this;

    _logger.default.debug(`Translating coordinates (${JSON.stringify(coords)}) to web coordinates`);

    const implicitWaitMs = this.implicitWaitMs;
    let webview;

    try {
      this.setImplicitWait(0);
      webview = yield (0, _asyncbox.retryInterval)(5, 100, (0, _asyncToGenerator2.default)(function* () {
        return yield _this.findNativeElementOrElements('-ios predicate string', `type = 'XCUIElementTypeWebView' AND visible = 1`, false);
      }));
    } finally {
      this.setImplicitWait(implicitWaitMs);
    }

    webview = _appiumSupport.util.unwrapElement(webview);
    const rect = yield this.proxyCommand(`/element/${webview}/rect`, 'GET');
    const wvPos = {
      x: rect.x,
      y: rect.y
    };
    const realDims = {
      w: rect.width,
      h: rect.height
    };
    const cmd = '(function () { return {w: document.documentElement.clientWidth, h: document.documentElement.clientHeight}; })()';
    const wvDims = yield this.remote.execute(cmd);
    const urlBarHeight = 64;
    wvPos.y += urlBarHeight;
    const realDimensionHeight = 108;
    realDims.h -= realDimensionHeight;
    let yOffset = this.opts.curOrientation === 'LANDSCAPE' ? this.landscapeWebCoordsOffset : 0;
    yOffset += yield this.getExtraNativeWebTapOffset();
    coords.y += yield this.getExtraTranslateWebCoordsOffset(coords, rect);

    if (wvDims && realDims && wvPos) {
      let xRatio = realDims.w / wvDims.w;
      let yRatio = realDims.h / wvDims.h;
      let newCoords = {
        x: wvPos.x + Math.round(xRatio * coords.x),
        y: wvPos.y + yOffset + Math.round(yRatio * coords.y)
      };

      _logger.default.debug(`Converted coordinates: ${JSON.stringify(newCoords)}`);

      _logger.default.debug(`    rect: ${JSON.stringify(rect)}`);

      _logger.default.debug(`    wvPos: ${JSON.stringify(wvPos)}`);

      _logger.default.debug(`    realDims: ${JSON.stringify(realDims)}`);

      _logger.default.debug(`    wvDims: ${JSON.stringify(wvDims)}`);

      _logger.default.debug(`    xRatio: ${JSON.stringify(xRatio)}`);

      _logger.default.debug(`    yRatio: ${JSON.stringify(yRatio)}`);

      _logger.default.debug(`    yOffset: ${JSON.stringify(yOffset)}`);

      _logger.default.debug(`Converted web coords ${JSON.stringify(coords)} ` + `into real coords ${JSON.stringify(newCoords)}`);

      return newCoords;
    }
  });

  return function (_x10) {
    return _ref9.apply(this, arguments);
  };
}();

extensions.checkForAlert = (0, _asyncToGenerator2.default)(function* () {
  return false;
});

extensions.waitForAtom = function () {
  var _ref12 = (0, _asyncToGenerator2.default)(function* (promise) {
    const started = process.hrtime();

    try {
      return this.parseExecuteResponse((yield _bluebird.default.resolve(promise).timeout(ATOM_WAIT_TIMEOUT)));
    } catch (err) {
      if (err instanceof _bluebird.default.TimeoutError) {
        throw new Error(`Did not get any response after ${process.hrtime(started)[0]}s`);
      }

      throw err;
    }
  });

  return function (_x11) {
    return _ref12.apply(this, arguments);
  };
}();

var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy93ZWIuanMiXSwibmFtZXMiOlsiSVBIT05FX0VYVFJBX1dFQl9DT09SRF9TQ1JPTExfT0ZGU0VUIiwiSVBIT05FX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVCIsIklQSE9ORV9XRUJfQ09PUkRfT0ZGU0VUIiwiSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCIsIklQSE9ORV9YX0VYVFJBX1dFQl9DT09SRF9TQ1JPTExfT0ZGU0VUIiwiSVBIT05FX1hfRVhUUkFfV0VCX0NPT1JEX05PTl9TQ1JPTExfT0ZGU0VUIiwiSVBIT05FX1hfV0VCX0NPT1JEX09GRlNFVCIsIklQQURfRVhUUkFfV0VCX0NPT1JEX1NDUk9MTF9PRkZTRVQiLCJJUEFEX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVCIsIklQQURfV0VCX0NPT1JEX09GRlNFVCIsIklQQURfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUIiwiSVBIT05FX1hfV0lEVEgiLCJJUEhPTkVfWF9IRUlHSFQiLCJBVE9NX1dBSVRfVElNRU9VVCIsImV4dGVuc2lvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJpb3NDb21tYW5kcyIsIndlYiIsImdldFNhZmFyaUlzSXBob25lIiwidXNlckFnZW50IiwiZXhlY3V0ZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJlcnIiLCJsb2ciLCJ3YXJuIiwiZGVidWciLCJtZXNzYWdlIiwiZ2V0U2FmYXJpSXNJcGhvbmVYIiwic2NyaXB0IiwiaGVpZ2h0Iiwid2lkdGgiLCJnZXRFbGVtZW50SGVpZ2h0TWVtb2l6ZWQiLCJfIiwibWVtb2l6ZSIsImtleSIsImRyaXZlciIsImVsIiwidXRpbCIsInVud3JhcEVsZW1lbnQiLCJnZXROYXRpdmVSZWN0IiwiZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQiLCJjb29yZHMiLCJ3ZWJ2aWV3UmVjdCIsIm9mZnNldCIsImltcGxpY2l0V2FpdE1zIiwiaXNJcGhvbmUiLCJpc0lwaG9uZVgiLCJzZXRJbXBsaWNpdFdhaXQiLCJmaW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMiLCJpZ24iLCJ5IiwiZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQiLCJ0YXBXZWJFbGVtZW50TmF0aXZlbHkiLCJhdG9tc0VsZW1lbnQiLCJ0ZXh0IiwiZXhlY3V0ZUF0b20iLCJyZWN0IiwicHJveHlDb21tYW5kIiwiRUxFTUVOVCIsIngiLCJNYXRoIiwicm91bmQiLCJjbGlja0Nvb3JkcyIsIm5hdGl2ZVdlYlRhcCIsInVzZUF0b21zRWxlbWVudCIsImN1cldlYkNvb3JkcyIsImNsaWNrV2ViQ29vcmRzIiwicGVyZm9ybVRvdWNoIiwiYWN0aW9uIiwib3B0aW9ucyIsInRyYW5zbGF0ZVdlYkNvb3JkcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3ZWJ2aWV3Iiwid3ZQb3MiLCJyZWFsRGltcyIsInciLCJoIiwiY21kIiwid3ZEaW1zIiwicmVtb3RlIiwidXJsQmFySGVpZ2h0IiwicmVhbERpbWVuc2lvbkhlaWdodCIsInlPZmZzZXQiLCJvcHRzIiwiY3VyT3JpZW50YXRpb24iLCJsYW5kc2NhcGVXZWJDb29yZHNPZmZzZXQiLCJ4UmF0aW8iLCJ5UmF0aW8iLCJuZXdDb29yZHMiLCJjaGVja0ZvckFsZXJ0Iiwid2FpdEZvckF0b20iLCJwcm9taXNlIiwic3RhcnRlZCIsInByb2Nlc3MiLCJocnRpbWUiLCJwYXJzZUV4ZWN1dGVSZXNwb25zZSIsIkIiLCJyZXNvbHZlIiwidGltZW91dCIsIlRpbWVvdXRFcnJvciIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBLE1BQU1BLG9DQUFvQyxHQUFHLENBQUMsRUFBOUM7QUFDQSxNQUFNQyx3Q0FBd0MsR0FBRyxFQUFqRDtBQUNBLE1BQU1DLHVCQUF1QixHQUFHLENBQUMsRUFBakM7QUFDQSxNQUFNQyx3Q0FBd0MsR0FBRyxFQUFqRDtBQUNBLE1B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cnQgeyByZXRyeUludGVydmFsIH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5cblxuY29uc3QgSVBIT05FX0VYVFJBX1dFQl9DT09SRF9TQ1JPTExfT0ZGU0VUID0gLTE1O1xuY29uc3QgSVBIT05FX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVCA9IDEwO1xuY29uc3QgSVBIT05FX1dFQl9DT09SRF9PRkZTRVQgPSAtMTA7XG5jb25zdCBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUID0gODQ7XG5jb25zdCBJUEhPTkVfWF9FWFRSQV9XRUJfQ09PUkRfU0NST0xMX09GRlNFVCA9IC05MDtcbmNvbnN0IElQSE9ORV9YX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVCA9IC0xMDtcbmNvbnN0IElQSE9ORV9YX1dFQl9DT09SRF9PRkZTRVQgPSA0MDtcbmNvbnN0IElQQURfRVhUUkFfV0VCX0NPT1JEX1NDUk9MTF9PRkZTRVQgPSAtMTA7XG5jb25zdCBJUEFEX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVCA9IDA7XG5jb25zdCBJUEFEX1dFQl9DT09SRF9PRkZTRVQgPSAxMDtcbmNvbnN0IElQQURfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUID0gOTU7XG5cbmNvbnN0IElQSE9ORV9YX1dJRFRIID0gMzc1O1xuY29uc3QgSVBIT05FX1hfSEVJR0hUID0gODEyO1xuXG5jb25zdCBBVE9NX1dBSVRfVElNRU9VVCA9IDUgKiA2MDAwMDtcblxubGV0IGV4dGVuc2lvbnMgPSB7fTtcblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBpb3NDb21tYW5kcy53ZWIpO1xuXG5cblxuZXh0ZW5zaW9ucy5nZXRTYWZhcmlJc0lwaG9uZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaUlzSXBob25lICgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoJ3JldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Jyk7XG4gICAgcmV0dXJuIHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpcGhvbmUnKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLndhcm4oYFVuYWJsZSB0byBmaW5kIGRldmljZSB0eXBlIGZyb20gdXNlcmFnZW50LiBBc3N1bWluZyBpUGhvbmVgKTtcbiAgICBsb2cuZGVidWcoYEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXh0ZW5zaW9ucy5nZXRTYWZhcmlJc0lwaG9uZVggPSBhc3luYyBmdW5jdGlvbiBnZXRTYWZhcmlJc0lwaG9uZSAoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2NyaXB0ID0gJ3JldHVybiB7aGVpZ2h0OiB3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0LCB3aWR0aDogd2luZG93LnNjcmVlbi5hdmFpbFdpZHRofTsnO1xuICAgIGNvbnN0IHtoZWlnaHQsIHdpZHRofSA9IGF3YWl0IHRoaXMuZXhlY3V0ZShzY3JpcHQpO1xuICAgIC8vIGNoZWNrIGZvciB0aGUgY29ycmVjdCBoZWlnaHQgYW5kIHdpZHRoXG4gICAgcmV0dXJuIChoZWlnaHQgPT09IElQSE9ORV9YX0hFSUdIVCAmJiB3aWR0aCA9PT0gSVBIT05FX1hfV0lEVEgpIHx8XG4gICAgICAgICAgIChoZWlnaHQgPT09IElQSE9ORV9YX1dJRFRIICYmIHdpZHRoID09PSBJUEhPTkVfWF9IRUlHSFQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2cud2FybihgVW5hYmxlIHRvIGZpbmQgZGV2aWNlIHR5cGUgZnJvbSB1c2VyYWdlbnQuIEFzc3VtaW5nIG5vdCBpUGhvbmUgWGApO1xuICAgIGxvZy5kZWJ1ZyhgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgZ2V0RWxlbWVudEhlaWdodE1lbW9pemVkID0gXy5tZW1vaXplKGFzeW5jIGZ1bmN0aW9uIChrZXksIGRyaXZlciwgZWwpIHtcbiAgZWwgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuICByZXR1cm4gKGF3YWl0IGRyaXZlci5nZXROYXRpdmVSZWN0KGVsKSkuaGVpZ2h0O1xufSk7XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiAoY29vcmRzLCB3ZWJ2aWV3UmVjdCkge1xuICBsZXQgb2Zmc2V0ID0gMDtcblxuICAvLyBrZWVwIHRyYWNrIG9mIGltcGxpY2l0IHdhaXQsIGFuZCBzZXQgbG9jYWxseSB0byAwXG4gIGNvbnN0IGltcGxpY2l0V2FpdE1zID0gdGhpcy5pbXBsaWNpdFdhaXRNcztcblxuICBjb25zdCBpc0lwaG9uZSA9IGF3YWl0IHRoaXMuZ2V0U2FmYXJpSXNJcGhvbmUoKTtcbiAgY29uc3QgaXNJcGhvbmVYID0gaXNJcGhvbmUgJiYgYXdhaXQgdGhpcy5nZXRTYWZhcmlJc0lwaG9uZVgoKTtcblxuICB0cnkge1xuICAgIHRoaXMuc2V0SW1wbGljaXRXYWl0KDApO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhlIGZ1bGwgdXJsIGJhciBpcyB1cFxuICAgIGF3YWl0IHRoaXMuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgJ1JlbG9hZEJ1dHRvbicsIGZhbHNlKTtcblxuICAgIC8vIHJlbG9hZCBidXR0b24gZm91bmQsIHdoaWNoIG1lYW5zIHNjcm9sbGluZyBoYXMgbm90IGhhcHBlbmVkXG4gICAgaWYgKGlzSXBob25lWCkge1xuICAgICAgb2Zmc2V0ICs9IElQSE9ORV9YX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVDtcbiAgICB9IGVsc2UgaWYgKGlzSXBob25lKSB7XG4gICAgICBvZmZzZXQgKz0gSVBIT05FX0VYVFJBX1dFQl9DT09SRF9OT05fU0NST0xMX09GRlNFVDtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0ICs9IElQQURfRVhUUkFfV0VCX0NPT1JEX05PTl9TQ1JPTExfT0ZGU0VUO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gbm8gcmVsb2FkIGJ1dHRvbiwgd2hpY2ggaW5kaWNhdGVzIHNjcm9sbGluZyBoYXMgaGFwcGVuZWRcbiAgICAvLyB0aGUgVVJMIGJhciBtYXkgb3IgbWF5IG5vdCBiZSB2aXNpYmxlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVsID0gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnVVJMJywgZmFsc2UpO1xuICAgICAgb2Zmc2V0IC09IGF3YWl0IGdldEVsZW1lbnRIZWlnaHRNZW1vaXplZCgnVVJMQmFyJywgdGhpcywgZWwpO1xuICAgIH0gY2F0Y2ggKGlnbikge1xuICAgICAgLy8gbm8gVVJMIGVsZW1lbnRzIGZvdW5kLCBzbyBjb250aW51ZVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICAvLyByZXR1cm4gaW1wbGljaXQgd2FpdCB0byB3aGF0IGl0IHdhc1xuICAgIHRoaXMuc2V0SW1wbGljaXRXYWl0KGltcGxpY2l0V2FpdE1zKTtcbiAgfVxuXG4gIGlmIChjb29yZHMueSA+IHdlYnZpZXdSZWN0LmhlaWdodCkge1xuICAgIC8vIHdoZW4gc2Nyb2xsaW5nIGhhcyBoYXBwZW5lZCwgdGhlcmUgaXMgYSB0aWNrIG1vcmUgb2Zmc2V0IG5lZWRlZFxuICAgIGlmIChpc0lwaG9uZVgpIHtcbiAgICAgIG9mZnNldCArPSBJUEhPTkVfWF9FWFRSQV9XRUJfQ09PUkRfU0NST0xMX09GRlNFVDtcbiAgICB9IGVsc2UgaWYgKGlzSXBob25lKSB7XG4gICAgICBvZmZzZXQgKz0gSVBIT05FX0VYVFJBX1dFQl9DT09SRF9TQ1JPTExfT0ZGU0VUO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXQgKz0gSVBBRF9FWFRSQV9XRUJfQ09PUkRfU0NST0xMX09GRlNFVDtcbiAgICB9XG4gIH1cblxuICAvLyBleHRyYSBvZmZzZXQgbmVjZXNzYXJ5XG4gIG9mZnNldCArPSBpc0lwaG9uZSA/IElQSE9ORV9XRUJfQ09PUkRfT0ZGU0VUIDogSVBBRF9XRUJfQ09PUkRfT0ZGU0VUO1xuXG4gIG9mZnNldCArPSBpc0lwaG9uZVggPyBJUEhPTkVfWF9XRUJfQ09PUkRfT0ZGU0VUIDogMDtcblxuICBsb2cuZGVidWcoYEV4dHJhIHRyYW5zbGF0ZWQgd2ViIGNvb3JkaW5hdGVzIG9mZnNldDogJHtvZmZzZXR9YCk7XG4gIHJldHVybiBvZmZzZXQ7XG59O1xuXG5leHRlbnNpb25zLmdldEV4dHJhTmF0aXZlV2ViVGFwT2Zmc2V0ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsZXQgb2Zmc2V0ID0gMDtcblxuICAvLyBrZWVwIHRyYWNrIG9mIGltcGxpY2l0IHdhaXQsIGFuZCBzZXQgbG9jYWxseSB0byAwXG4gIGNvbnN0IGltcGxpY2l0V2FpdE1zID0gdGhpcy5pbXBsaWNpdFdhaXRNcztcbiAgdHJ5IHtcbiAgICB0aGlzLnNldEltcGxpY2l0V2FpdCgwKTtcblxuICAgIC8vIGZpcnN0IHRyeSB0byBnZXQgdGFiIG9mZnNldFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbCA9IGF3YWl0IHRoaXMuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCctaW9zIHByZWRpY2F0ZSBzdHJpbmcnLCBgbmFtZSBMSUtFICcqLCBUYWInIEFORCB2aXNpYmxlID0gMWAsIGZhbHNlKTtcbiAgICAgIG9mZnNldCArPSBhd2FpdCBnZXRFbGVtZW50SGVpZ2h0TWVtb2l6ZWQoJ1RhYkJhcicsIHRoaXMsIGVsKTtcbiAgICB9IGNhdGNoIChpZ24pIHtcbiAgICAgIC8vIG5vIGVsZW1lbnQgZm91bmQsIHNvIG5vIHRhYnMgYW5kIG5vIG5lZWQgdG8gZGVhbCB3aXRoIG9mZnNldFxuICAgIH1cblxuICAgIC8vIG5leHQgdHJ5IHRvIHNlZSBpZiB0aGVyZSBpcyBhbiBTbWFydCBBcHAgQmFubmVyXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgJ0Nsb3NlIGFwcCBkb3dubG9hZCBvZmZlcicsIGZhbHNlKTtcbiAgICAgIG9mZnNldCArPSBhd2FpdCB0aGlzLmdldFNhZmFyaUlzSXBob25lKCkgP1xuICAgICAgICBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUIDpcbiAgICAgICAgSVBBRF9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQ7XG4gICAgfSBjYXRjaCAoaWduKSB7XG4gICAgICAvLyBubyBzbWFydCBhcHAgYmFubmVyIGZvdW5kLCBzbyBjb250aW51ZVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICAvLyByZXR1cm4gaW1wbGljaXQgd2FpdCB0byB3aGF0IGl0IHdhc1xuICAgIHRoaXMuc2V0SW1wbGljaXRXYWl0KGltcGxpY2l0V2FpdE1zKTtcbiAgfVxuXG4gIGxvZy5kZWJ1ZyhgQWRkaXRpb25hbCBuYXRpdmUgd2ViIHRhcCBvZmZzZXQgY29tcHV0ZWQ6ICR7b2Zmc2V0fWApO1xuICByZXR1cm4gb2Zmc2V0O1xufTtcblxuYXN5bmMgZnVuY3Rpb24gdGFwV2ViRWxlbWVudE5hdGl2ZWx5IChkcml2ZXIsIGF0b21zRWxlbWVudCkge1xuICAvLyB0cnkgdG8gZ2V0IHRoZSB0ZXh0IG9mIHRoZSBlbGVtZW50LCB3aGljaCB3aWxsIGJlIGFjY2Vzc2libGUgaW4gdGhlXG4gIC8vIG5hdGl2ZSBjb250ZXh0XG4gIHRyeSB7XG4gICAgbGV0IHRleHQgPSBhd2FpdCBkcml2ZXIuZXhlY3V0ZUF0b20oJ2dldF90ZXh0JywgW2F0b21zRWxlbWVudF0pO1xuICAgIGlmICghdGV4dCkge1xuICAgICAgdGV4dCA9IGF3YWl0IGRyaXZlci5leGVjdXRlQXRvbSgnZ2V0X2F0dHJpYnV0ZV92YWx1ZScsIFthdG9tc0VsZW1lbnQsICd2YWx1ZSddKTtcbiAgICB9XG5cbiAgICBpZiAodGV4dCkge1xuICAgICAgY29uc3QgZWwgPSBhd2FpdCBkcml2ZXIuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgdGV4dCwgZmFsc2UpO1xuICAgICAgLy8gdXNlIHRhcCBiZWNhdXNlIG9uIGlPUyAxMS4yIGFuZCBiZWxvdyBgbmF0aXZlQ2xpY2tgIGNyYXNoZXMgV0RBXG4gICAgICBjb25zdCByZWN0ID0gYXdhaXQgZHJpdmVyLnByb3h5Q29tbWFuZChgL2VsZW1lbnQvJHtlbC5FTEVNRU5UfS9yZWN0YCwgJ0dFVCcpO1xuICAgICAgY29uc3QgY29vcmRzID0ge1xuICAgICAgICB4OiBNYXRoLnJvdW5kKHJlY3QueCArIHJlY3Qud2lkdGggLyAyKSxcbiAgICAgICAgeTogTWF0aC5yb3VuZChyZWN0LnkgKyByZWN0LmhlaWdodCAvIDIpLFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5jbGlja0Nvb3Jkcyhjb29yZHMpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBhbnkgZmFpbHVyZSBzaG91bGQgZmFsbCB0aHJvdWdoIGFuZCB0cmlnZ2VyIHRoZSBtb3JlIGVsYWJvcmF0ZVxuICAgIC8vIG1ldGhvZCBvZiBjbGlja2luZ1xuICAgIGxvZy53YXJuKGBFcnJvciBhdHRlbXB0aW5nIHRvIGNsaWNrOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXh0ZW5zaW9ucy5uYXRpdmVXZWJUYXAgPSBhc3luYyBmdW5jdGlvbiAoZWwpIHtcbiAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy51c2VBdG9tc0VsZW1lbnQoZWwpO1xuXG4gIGlmIChhd2FpdCB0YXBXZWJFbGVtZW50TmF0aXZlbHkodGhpcywgYXRvbXNFbGVtZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsb2cud2FybignVW5hYmxlIHRvIGRvIHNpbXBsZSBuYXRpdmUgd2ViIHRhcC4gQXR0ZW1wdGluZyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzJyk7XG5cbiAgLy8gYGdldF90b3BfbGVmdF9jb29yZGluYXRlc2AgcmV0dXJucyB0aGUgd3JvbmcgdmFsdWUgc29tZXRpbWVzLFxuICAvLyB1bmxlc3Mgd2UgcHJlLWNhbGwgYm90aCBvZiB0aGVzZSBmdW5jdGlvbnMgYmVmb3JlIHRoZSBhY3R1YWwgY2FsbHNcbiAgYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X3NpemUnLCBbYXRvbXNFbGVtZW50XSk7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKTtcblxuICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdnZXRfc2l6ZScsIFthdG9tc0VsZW1lbnRdKTtcbiAgbGV0IHt4LCB5fSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKTtcbiAgeCArPSB3aWR0aCAvIDI7XG4gIHkgKz0gaGVpZ2h0IC8gMjtcblxuICB0aGlzLmN1cldlYkNvb3JkcyA9IHt4LCB5fTtcbiAgYXdhaXQgdGhpcy5jbGlja1dlYkNvb3JkcygpO1xufTtcblxuZXh0ZW5zaW9ucy5jbGlja0Nvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgYXdhaXQgdGhpcy5wZXJmb3JtVG91Y2goW1xuICAgIHtcbiAgICAgIGFjdGlvbjogJ3RhcCcsXG4gICAgICBvcHRpb25zOiBjb29yZHMsXG4gICAgfSxcbiAgXSk7XG59O1xuXG5leHRlbnNpb25zLnRyYW5zbGF0ZVdlYkNvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIChjb29yZHMpIHtcbiAgbG9nLmRlYnVnKGBUcmFuc2xhdGluZyBjb29yZGluYXRlcyAoJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSkgdG8gd2ViIGNvb3JkaW5hdGVzYCk7XG5cbiAgLy8gYWJzb2x1dGl6ZSB3ZWIgY29vcmRzXG4gIGNvbnN0IGltcGxpY2l0V2FpdE1zID0gdGhpcy5pbXBsaWNpdFdhaXRNcztcbiAgbGV0IHdlYnZpZXc7XG4gIHRyeSB7XG4gICAgdGhpcy5zZXRJbXBsaWNpdFdhaXQoMCk7XG4gICAgd2VidmlldyA9IGF3YWl0IHJldHJ5SW50ZXJ2YWwoNSwgMTAwLCBhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJy1pb3MgcHJlZGljYXRlIHN0cmluZycsIGB0eXBlID0gJ1hDVUlFbGVtZW50VHlwZVdlYlZpZXcnIEFORCB2aXNpYmxlID0gMWAsIGZhbHNlKTtcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLnNldEltcGxpY2l0V2FpdChpbXBsaWNpdFdhaXRNcyk7XG4gIH1cblxuICB3ZWJ2aWV3ID0gdXRpbC51bndyYXBFbGVtZW50KHdlYnZpZXcpO1xuICBjb25zdCByZWN0ID0gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC9lbGVtZW50LyR7d2Vidmlld30vcmVjdGAsICdHRVQnKTtcbiAgY29uc3Qgd3ZQb3MgPSB7eDogcmVjdC54LCB5OiByZWN0Lnl9O1xuICBjb25zdCByZWFsRGltcyA9IHt3OiByZWN0LndpZHRoLCBoOiByZWN0LmhlaWdodH07XG5cbiAgY29uc3QgY21kID0gJyhmdW5jdGlvbiAoKSB7IHJldHVybiB7dzogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCBoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0fTsgfSkoKSc7XG4gIGNvbnN0IHd2RGltcyA9IGF3YWl0IHRoaXMucmVtb3RlLmV4ZWN1dGUoY21kKTtcblxuICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSB3aGVyZSB0aGVzZSBjb21lIGZyb20uIFRoZXkgYXBwZWFyIHRvIGJlIGNvbnN0YW50cyBpbiBteSB0ZXN0c1xuICBjb25zdCB1cmxCYXJIZWlnaHQgPSA2NDtcbiAgd3ZQb3MueSArPSB1cmxCYXJIZWlnaHQ7XG5cbiAgY29uc3QgcmVhbERpbWVuc2lvbkhlaWdodCA9IDEwODtcbiAgcmVhbERpbXMuaCAtPSByZWFsRGltZW5zaW9uSGVpZ2h0O1xuXG4gIC8vIGFkZCBzdGF0aWMgb2Zmc2V0IGZvciBzYWZhcmkgaW4gbGFuZHNjYXBlIG1vZGVcbiAgbGV0IHlPZmZzZXQgPSB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPT09ICdMQU5EU0NBUEUnID8gdGhpcy5sYW5kc2NhcGVXZWJDb29yZHNPZmZzZXQgOiAwO1xuXG4gIC8vIGFkZCBleHRyYSBvZmZzZXQgZm9yIHBvc3NpYmxlIGV4dHJhIHRoaW5ncyBpbiB0aGUgdG9wIG9mIHRoZSBwYWdlXG4gIHlPZmZzZXQgKz0gYXdhaXQgdGhpcy5nZXRFeHRyYU5hdGl2ZVdlYlRhcE9mZnNldCgpO1xuICBjb29yZHMueSArPSBhd2FpdCB0aGlzLmdldEV4dHJhVHJhbnNsYXRlV2ViQ29vcmRzT2Zmc2V0KGNvb3JkcywgcmVjdCk7XG5cbiAgaWYgKHd2RGltcyAmJiByZWFsRGltcyAmJiB3dlBvcykge1xuICAgIGxldCB4UmF0aW8gPSByZWFsRGltcy53IC8gd3ZEaW1zLnc7XG4gICAgbGV0IHlSYXRpbyA9IHJlYWxEaW1zLmggLyB3dkRpbXMuaDtcbiAgICBsZXQgbmV3Q29vcmRzID0ge1xuICAgICAgeDogd3ZQb3MueCArIE1hdGgucm91bmQoeFJhdGlvICogY29vcmRzLngpLFxuICAgICAgeTogd3ZQb3MueSArIHlPZmZzZXQgKyBNYXRoLnJvdW5kKHlSYXRpbyAqIGNvb3Jkcy55KSxcbiAgICB9O1xuXG4gICAgLy8gYWRkaXRpb25hbCBsb2dnaW5nIGZvciBjb29yZGluYXRlcywgc2luY2UgaXQgaXMgc29tZXRpbWVzIGJyb2tlblxuICAgIC8vICAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy85MTU5XG4gICAgbG9nLmRlYnVnKGBDb252ZXJ0ZWQgY29vcmRpbmF0ZXM6ICR7SlNPTi5zdHJpbmdpZnkobmV3Q29vcmRzKX1gKTtcbiAgICBsb2cuZGVidWcoYCAgICByZWN0OiAke0pTT04uc3RyaW5naWZ5KHJlY3QpfWApO1xuICAgIGxvZy5kZWJ1ZyhgICAgIHd2UG9zOiAke0pTT04uc3RyaW5naWZ5KHd2UG9zKX1gKTtcbiAgICBsb2cuZGVidWcoYCAgICByZWFsRGltczogJHtKU09OLnN0cmluZ2lmeShyZWFsRGltcyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgd3ZEaW1zOiAke0pTT04uc3RyaW5naWZ5KHd2RGltcyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgeFJhdGlvOiAke0pTT04uc3RyaW5naWZ5KHhSYXRpbyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgeVJhdGlvOiAke0pTT04uc3RyaW5naWZ5KHlSYXRpbyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgeU9mZnNldDogJHtKU09OLnN0cmluZ2lmeSh5T2Zmc2V0KX1gKTtcblxuICAgIGxvZy5kZWJ1ZyhgQ29udmVydGVkIHdlYiBjb29yZHMgJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSBgICtcbiAgICAgICAgICAgICAgYGludG8gcmVhbCBjb29yZHMgJHtKU09OLnN0cmluZ2lmeShuZXdDb29yZHMpfWApO1xuICAgIHJldHVybiBuZXdDb29yZHM7XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMuY2hlY2tGb3JBbGVydCA9IGFzeW5jIGZ1bmN0aW9uICgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZXF1aXJlLWF3YWl0XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4dGVuc2lvbnMud2FpdEZvckF0b20gPSBhc3luYyBmdW5jdGlvbiAocHJvbWlzZSkge1xuICBjb25zdCBzdGFydGVkID0gcHJvY2Vzcy5ocnRpbWUoKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUV4ZWN1dGVSZXNwb25zZShhd2FpdCBCLnJlc29sdmUocHJvbWlzZSlcbiAgICAgIC50aW1lb3V0KEFUT01fV0FJVF9USU1FT1VUKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBCLlRpbWVvdXRFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaWQgbm90IGdldCBhbnkgcmVzcG9uc2UgYWZ0ZXIgJHtwcm9jZXNzLmhydGltZShzdGFydGVkKVswXX1zYCk7XG4gICAgfVxuICAgIHRocm93IGVycjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJmaWxlIjoibGliL2NvbW1hbmRzL3dlYi5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
