"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.startServer = startServer;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _logger = _interopRequireDefault(require("./logger"));

var _appiumBaseDriver = require("appium-base-driver");

var _driver = require("./driver");

function startServer(_x, _x2) {
  return _startServer.apply(this, arguments);
}

function _startServer() {
  _startServer = (0, _asyncToGenerator2.default)(function* (port, address) {
    let driver = new _driver.XCUITestDriver({
      port,
      address
    });
    let router = (0, _appiumBaseDriver.routeConfiguringFunction)(driver);
    let server = yield (0, _appiumBaseDriver.server)(router, port, address);
    server.driver = driver;

    _logger.default.info(`XCUITestDriver server listening on http://${address}:${port}`);

    return server;
  });
  return _startServer.apply(this, arguments);
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zZXJ2ZXIuanMiXSwibmFtZXMiOlsic3RhcnRTZXJ2ZXIiLCJwb3J0IiwiYWRkcmVzcyIsImRyaXZlciIsIlhDVUlUZXN0RHJpdmVyIiwicm91dGVyIiwic2VydmVyIiwibG9nIiwiaW5mbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7U0FFZUEsVzs7Ozs7aURBQWYsV0FBNEJDLElBQTVCLEVBQWtDQyxPQUFsQyxFQUEyQztBQUN6QyxRQUFJQyxNQUFNLEdBQUcsSUFBSUMsc0JBQUosQ0FBbUI7QUFBQ0gsTUFBQUEsSUFBRDtBQUFPQyxNQUFBQTtBQUFQLEtBQW5CLENBQWI7QUFDQSxRQUFJRyxNQUFNLEdBQUcsZ0RBQXlCRixNQUF6QixDQUFiO0FBQ0EsUUFBSUcsTUFBTSxTQUFTLDhCQUFXRCxNQUFYLEVBQW1CSixJQUFuQixFQUF5QkMsT0FBekIsQ0FBbkI7QUFFQUksSUFBQUEsTUFBTSxDQUFDSCxNQUFQLEdBQWdCQSxNQUFoQjs7QUFDQUksb0JBQUlDLElBQUosQ0FBVSw2Q0FBNENOLE9BQVEsSUFBR0QsSUFBSyxFQUF0RTs7QUFDQSxXQUFPSyxNQUFQO0FBQ0QsRyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgc2VydmVyIGFzIGJhc2VTZXJ2ZXIsIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiB9IGZyb20gJ2FwcGl1bS1iYXNlLWRyaXZlcic7XG5pbXBvcnQgeyBYQ1VJVGVzdERyaXZlciB9IGZyb20gJy4vZHJpdmVyJztcblxuYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIgKHBvcnQsIGFkZHJlc3MpIHtcbiAgbGV0IGRyaXZlciA9IG5ldyBYQ1VJVGVzdERyaXZlcih7cG9ydCwgYWRkcmVzc30pO1xuICBsZXQgcm91dGVyID0gcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGRyaXZlcik7XG4gIGxldCBzZXJ2ZXIgPSBhd2FpdCBiYXNlU2VydmVyKHJvdXRlciwgcG9ydCwgYWRkcmVzcyk7XG4gIC8vIG1ha2UgdGhlIGRyaXZlciBhdmFpbGFibGVcbiAgc2VydmVyLmRyaXZlciA9IGRyaXZlcjtcbiAgbG9nLmluZm8oYFhDVUlUZXN0RHJpdmVyIHNlcnZlciBsaXN0ZW5pbmcgb24gaHR0cDovLyR7YWRkcmVzc306JHtwb3J0fWApO1xuICByZXR1cm4gc2VydmVyO1xufVxuXG5leHBvcnQgeyBzdGFydFNlcnZlciB9O1xuIl0sImZpbGUiOiJsaWIvc2VydmVyLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
