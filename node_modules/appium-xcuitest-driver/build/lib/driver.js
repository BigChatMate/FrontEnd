"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.XCUITestDriver = exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _appiumBaseDriver = require("appium-base-driver");

var _appiumSupport = require("appium-support");

var _lodash = _interopRequireDefault(require("lodash"));

var _url = _interopRequireDefault(require("url"));

var _nodeSimctl = require("node-simctl");

var _webdriveragent = _interopRequireDefault(require("./wda/webdriveragent"));

var _logger = _interopRequireDefault(require("./logger"));

var _simulatorManagement = require("./simulator-management");

var _appiumIosSimulator = require("appium-ios-simulator");

var _asyncbox = require("asyncbox");

var _appiumIosDriver = require("appium-ios-driver");

var _desiredCaps = _interopRequireDefault(require("./desired-caps"));

var _index = _interopRequireDefault(require("./commands/index"));

var _utils = require("./utils");

var _realDeviceManagement = require("./real-device-management");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _asyncLock = _interopRequireDefault(require("async-lock"));

const SAFARI_BUNDLE_ID = 'com.apple.mobilesafari';
const WDA_SIM_STARTUP_RETRIES = 2;
const WDA_REAL_DEV_STARTUP_RETRIES = 1;
const WDA_REAL_DEV_TUTORIAL_URL = 'https://github.com/appium/appium-xcuitest-driver/blob/master/docs/real-device-config.md';
const WDA_STARTUP_RETRY_INTERVAL = 10000;
const DEFAULT_SETTINGS = {
  nativeWebTap: false,
  useJSONSource: false,
  shouldUseCompactResponses: true,
  elementResponseAttributes: "type,label",
  mjpegServerScreenshotQuality: 25,
  mjpegServerFramerate: 10
};
const SHARED_RESOURCES_GUARD = new _asyncLock.default();
const NO_PROXY_NATIVE_LIST = [['DELETE', /window/], ['GET', /^\/session\/[^\/]+$/], ['GET', /alert_text/], ['GET', /alert\/[^\/]+/], ['GET', /appium/], ['GET', /attribute/], ['GET', /context/], ['GET', /location/], ['GET', /log/], ['GET', /screenshot/], ['GET', /size/], ['GET', /source/], ['GET', /url/], ['GET', /window/], ['POST', /accept_alert/], ['POST', /actions$/], ['POST', /alert_text/], ['POST', /alert\/[^\/]+/], ['POST', /appium/], ['POST', /appium\/device\/is_locked/], ['POST', /appium\/device\/lock/], ['POST', /appium\/device\/unlock/], ['POST', /back/], ['POST', /clear/], ['POST', /context/], ['POST', /dismiss_alert/], ['POST', /element$/], ['POST', /elements$/], ['POST', /execute/], ['POST', /keys/], ['POST', /log/], ['POST', /moveto/], ['POST', /receive_async_response/], ['POST', /session\/[^\/]+\/location/], ['POST', /shake/], ['POST', /timeouts/], ['POST', /touch/], ['POST', /url/], ['POST', /value/], ['POST', /window/]];
const NO_PROXY_WEB_LIST = [['DELETE', /cookie/], ['GET', /attribute/], ['GET', /cookie/], ['GET', /element/], ['GET', /text/], ['GET', /title/], ['POST', /clear/], ['POST', /click/], ['POST', /cookie/], ['POST', /element/], ['POST', /forward/], ['POST', /frame/], ['POST', /keys/], ['POST', /refresh/]].concat(NO_PROXY_NATIVE_LIST);
const MEMOIZED_FUNCTIONS = ['getWindowSizeNative', 'getWindowSizeWeb', 'getStatusBarHeight', 'getDevicePixelRatio', 'getScreenInfo', 'getSafariIsIphone', 'getSafariIsIphoneX'];

class XCUITestDriver extends _appiumBaseDriver.BaseDriver {
  constructor(opts = {}, shouldValidateCaps = true) {
    super(opts, shouldValidateCaps);
    this.desiredCapConstraints = _desiredCaps.default;
    this.locatorStrategies = ['xpath', 'id', 'name', 'class name', '-ios predicate string', '-ios class chain', 'accessibility id'];
    this.webLocatorStrategies = ['link text', 'css selector', 'tag name', 'link text', 'partial link text'];
    this.resetIos();
    this.settings = new _appiumBaseDriver.DeviceSettings(DEFAULT_SETTINGS, this.onSettingsUpdate.bind(this));

    for (var _i = 0; _i < MEMOIZED_FUNCTIONS.length; _i++) {
      const fn = MEMOIZED_FUNCTIONS[_i];
      this[fn] = _lodash.default.memoize(this[fn]);
    }
  }

  onSettingsUpdate(key, value) {
    var _this = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (key !== 'nativeWebTap') {
        return yield _this.proxyCommand('/appium/settings', 'POST', {
          settings: {
            [key]: value
          }
        });
      }

      _this.opts.nativeWebTap = !!value;
    })();
  }

  resetIos() {
    this.opts = this.opts || {};
    this.wda = null;
    this.opts.device = null;
    this.jwpProxyActive = false;
    this.proxyReqRes = null;
    this.jwpProxyAvoid = [];
    this.safari = false;
    this.cachedWdaStatus = null;
    this.curWebFrames = [];
    this.webElementIds = [];
    this._currentUrl = null;
    this.curContext = null;
    this.xcodeVersion = {};
    this.iosSdkVersion = null;
    this.contexts = [];
    this.implicitWaitMs = 0;
    this.asynclibWaitMs = 0;
    this.pageLoadMs = 6000;
    this.landscapeWebCoordsOffset = 0;
  }

  get driverData() {
    return {};
  }

  getStatus() {
    var _this2 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (typeof _this2.driverInfo === 'undefined') {
        _this2.driverInfo = yield (0, _utils.getDriverInfo)();
      }

      let status = {
        build: {
          version: _this2.driverInfo.version
        }
      };

      if (_this2.cachedWdaStatus) {
        status.wda = _this2.cachedWdaStatus;
      }

      return status;
    })();
  }

  createSession(...args) {
    var _this3 = this,
        _superprop_callCreateSession = (..._args) => super.createSession(..._args);

    return (0, _asyncToGenerator2.default)(function* () {
      _this3.lifecycleData = {};

      try {
        let _ref = yield _superprop_callCreateSession(...args),
            _ref2 = (0, _slicedToArray2.default)(_ref, 2),
            sessionId = _ref2[0],
            caps = _ref2[1];

        _this3.opts.sessionId = sessionId;
        yield _this3.start();
        caps = Object.assign({}, _appiumIosDriver.defaultServerCaps, caps);
        caps.udid = _this3.opts.udid;

        if (_lodash.default.has(_this3.opts, 'nativeWebTap')) {
          yield _this3.updateSettings({
            nativeWebTap: _this3.opts.nativeWebTap
          });
        }

        if (_lodash.default.has(_this3.opts, 'useJSONSource')) {
          yield _this3.updateSettings({
            useJSONSource: _this3.opts.useJSONSource
          });
        }

        let wdaSettings = {
          elementResponseAttributes: DEFAULT_SETTINGS.elementResponseAttributes,
          shouldUseCompactResponses: DEFAULT_SETTINGS.shouldUseCompactResponses,
          mjpegServerScreenshotQuality: DEFAULT_SETTINGS.mjpegServerScreenshotQuality,
          mjpegServerFramerate: DEFAULT_SETTINGS.mjpegServerFramerate
        };

        if (_lodash.default.has(_this3.opts, 'elementResponseAttributes')) {
          wdaSettings.elementResponseAttributes = _this3.opts.elementResponseAttributes;
        }

        if (_lodash.default.has(_this3.opts, 'shouldUseCompactResponses')) {
          wdaSettings.shouldUseCompactResponses = _this3.opts.shouldUseCompactResponses;
        }

        if (_lodash.default.has(_this3.opts, 'mjpegServerScreenshotQuality')) {
          wdaSettings.mjpegServerScreenshotQuality = _this3.opts.mjpegServerScreenshotQuality;
        }

        if (_lodash.default.has(_this3.opts, 'mjpegServerFramerate')) {
          wdaSettings.mjpegServerFramerate = _this3.opts.mjpegServerFramerate;
        }

        yield _this3.updateSettings(wdaSettings);

        if (_this3.opts.mjpegScreenshotUrl) {
          _logger.default.info(`Starting MJPEG stream reading URL: '${_this3.opts.mjpegScreenshotUrl}'`);

          _this3.mjpegStream = new _appiumSupport.mjpeg.MJpegStream(_this3.opts.mjpegScreenshotUrl);
          yield _this3.mjpegStream.start();
        }

        return [sessionId, caps];
      } catch (e) {
        _logger.default.error(e);

        yield _this3.deleteSession();
        throw e;
      }
    })();
  }

  start() {
    var _this4 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this4.opts.noReset = !!_this4.opts.noReset;
      _this4.opts.fullReset = !!_this4.opts.fullReset;
      yield (0, _utils.printUser)();

      if (_this4.opts.platformVersion && parseFloat(_this4.opts.platformVersion) < 9.3) {
        throw Error(`Platform version must be 9.3 or above. '${_this4.opts.platformVersion}' is not supported.`);
      }

      const _ref3 = yield _this4.determineDevice(),
            device = _ref3.device,
            udid = _ref3.udid,
            realDevice = _ref3.realDevice;

      _logger.default.info(`Determining device to run tests on: udid: '${udid}', real device: ${realDevice}`);

      _this4.opts.device = device;
      _this4.opts.udid = udid;
      _this4.opts.realDevice = realDevice;

      if (_lodash.default.isEmpty(_this4.xcodeVersion) && (!_this4.opts.webDriverAgentUrl || !_this4.opts.realDevice)) {
        _this4.xcodeVersion = yield (0, _utils.getAndCheckXcodeVersion)();
        const tools = !_this4.xcodeVersion.toolsVersion ? '' : `(tools v${_this4.xcodeVersion.toolsVersion})`;

        _logger.default.debug(`Xcode version set to '${_this4.xcodeVersion.versionString}' ${tools}`);

        _this4.iosSdkVersion = yield (0, _utils.getAndCheckIosSdkVersion)();

        _logger.default.debug(`iOS SDK Version set to '${_this4.iosSdkVersion}'`);
      }

      _this4.logEvent('xcodeDetailsRetrieved');

      if (_this4.opts.enableAsyncExecuteFromHttps && !_this4.isRealDevice()) {
        yield (0, _simulatorManagement.shutdownSimulator)(_this4.opts.device);
        yield _this4.startHttpsAsyncServer();
      }

      if (!_this4.opts.platformVersion) {
        if (_this4.opts.device && _lodash.default.isFunction(_this4.opts.device.getPlatformVersion)) {
          _this4.opts.platformVersion = yield _this4.opts.device.getPlatformVersion();

          _logger.default.info(`No platformVersion specified. Using device version: '${_this4.opts.platformVersion}'`);
        } else {}
      }

      if (!_this4.opts.webDriverAgentUrl && _this4.iosSdkVersion) {
        if (parseFloat(_this4.opts.platformVersion) > parseFloat(_this4.iosSdkVersion)) {
          let msg = `Xcode ${_this4.xcodeVersion.versionString} has a maximum SDK version of ${_this4.iosSdkVersion}. ` + `It does not support iOS version ${_this4.opts.platformVersion}`;

          _logger.default.errorAndThrow(msg);
        }
      } else {
        _logger.default.debug('Xcode version will not be validated against iOS SDK version.');
      }

      if ((_this4.opts.browserName || '').toLowerCase() === 'safari') {
        _logger.default.info('Safari test requested');

        _this4.safari = true;
        _this4.opts.app = undefined;
        _this4.opts.processArguments = _this4.opts.processArguments || {};
        _this4.opts.bundleId = SAFARI_BUNDLE_ID;
        _this4._currentUrl = _this4.opts.safariInitialUrl || (_this4.isRealDevice() ? 'http://appium.io' : `http://${_this4.opts.address}:${_this4.opts.port}/welcome`);
        _this4.opts.processArguments.args = ['-u', _this4._currentUrl];
      } else {
        yield _this4.configureApp();
      }

      _this4.logEvent('appConfigured');

      if (_this4.opts.app) {
        yield (0, _utils.checkAppPresent)(_this4.opts.app);
      }

      if (!_this4.opts.bundleId) {
        _this4.opts.bundleId = yield _appiumIosDriver.appUtils.extractBundleId(_this4.opts.app);
      }

      yield _this4.runReset();

      const startLogCapture = function () {
        var _ref4 = (0, _asyncToGenerator2.default)(function* () {
          const result = yield _this4.startLogCapture();

          if (result) {
            _this4.logEvent('logCaptureStarted');
          }

          return result;
        });

        return function startLogCapture() {
          return _ref4.apply(this, arguments);
        };
      }();

      const isLogCaptureStarted = yield startLogCapture();

      _logger.default.info(`Setting up ${_this4.isRealDevice() ? 'real device' : 'simulator'}`);

      if (_this4.isSimulator()) {
        if (_this4.opts.shutdownOtherSimulators) {
          if (!_this4.relaxedSecurityEnabled) {
            _logger.default.errorAndThrow(`Appium server must have relaxed security flag set in order ` + `for 'shutdownOtherSimulators' capability to work`);
          }

          yield (0, _simulatorManagement.shutdownOtherSimulators)(_this4.opts.device);
        }

        if (_appiumSupport.util.hasValue(_this4.opts.reduceMotion)) {
          yield _this4.opts.device.setReduceMotion(_this4.opts.reduceMotion);
        }

        _this4.localConfig = yield _appiumIosDriver.settings.setLocaleAndPreferences(_this4.opts.device, _this4.opts, _this4.isSafari(), function () {
          var _ref5 = (0, _asyncToGenerator2.default)(function* (sim) {
            yield (0, _simulatorManagement.shutdownSimulator)(sim);
            yield _appiumIosDriver.settings.setLocaleAndPreferences(sim, _this4.opts, _this4.isSafari());
          });

          return function (_x) {
            return _ref5.apply(this, arguments);
          };
        }());
        yield _this4.startSim();

        if (_this4.opts.customSSLCert) {
          if (yield (0, _appiumIosSimulator.hasSSLCert)(_this4.opts.customSSLCert, _this4.opts.udid)) {
            _logger.default.info(`SSL cert '${_lodash.default.truncate(_this4.opts.customSSLCert, {
              length: 20
            })}' already installed`);
          } else {
            _logger.default.info(`Installing ssl cert '${_lodash.default.truncate(_this4.opts.customSSLCert, {
              length: 20
            })}'`);

            yield (0, _simulatorManagement.shutdownSimulator)(_this4.opts.device);
            yield (0, _appiumIosSimulator.installSSLCert)(_this4.opts.customSSLCert, _this4.opts.udid);

            _logger.default.info(`Restarting Simulator so that SSL certificate installation takes effect`);

            yield _this4.startSim();

            _this4.logEvent('customCertInstalled');
          }
        }

        _this4.logEvent('simStarted');

        if (!isLogCaptureStarted) {
          yield startLogCapture();
        }
      }

      if (_this4.opts.app) {
        yield _this4.installAUT();

        _this4.logEvent('appInstalled');
      }

      if (!_this4.opts.app && _this4.opts.bundleId && !_this4.safari) {
        if (!(yield _this4.opts.device.isAppInstalled(_this4.opts.bundleId))) {
          _logger.default.errorAndThrow(`App with bundle identifier '${_this4.opts.bundleId}' unknown`);
        }
      }

      if (_this4.opts.permissions) {
        if (_this4.isSimulator()) {
          _logger.default.debug('Setting the requested permissions before WDA is started');

          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = _lodash.default.toPairs(JSON.parse(_this4.opts.permissions))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              const _step$value = (0, _slicedToArray2.default)(_step.value, 2),
                    bundleId = _step$value[0],
                    permissionsMapping = _step$value[1];

              yield _this4.opts.device.setPermissions(bundleId, permissionsMapping);
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return != null) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }
        } else {
          _logger.default.warn('Setting permissions is only supported on Simulator. ' + 'The "permissions" capability will be ignored.');
        }
      }

      yield SHARED_RESOURCES_GUARD.acquire(XCUITestDriver.name, (0, _asyncToGenerator2.default)(function* () {
        return yield _this4.startWda(_this4.opts.sessionId, realDevice);
      }));
      yield _this4.setInitialOrientation(_this4.opts.orientation);

      _this4.logEvent('orientationSet');

      if (_this4.isRealDevice() && _this4.opts.startIWDP) {
        try {
          yield _this4.startIWDP();

          _logger.default.debug(`Started ios_webkit_debug proxy server at: ${_this4.iwdpServer.endpoint}`);
        } catch (err) {
          _logger.default.errorAndThrow(`Could not start ios_webkit_debug_proxy server: ${err.message}`);
        }
      }

      if (_this4.isSafari() || _this4.opts.autoWebview) {
        _logger.default.debug('Waiting for initial webview');

        yield _this4.navToInitialWebview();

        _this4.logEvent('initialWebviewNavigated');
      }

      if (!_this4.isRealDevice()) {
        if (_this4.opts.calendarAccessAuthorized) {
          yield _this4.opts.device.enableCalendarAccess(_this4.opts.bundleId);
        } else if (_this4.opts.calendarAccessAuthorized === false) {
          yield _this4.opts.device.disableCalendarAccess(_this4.opts.bundleId);
        }
      }
    })();
  }

  startWda(sessionId, realDevice) {
    var _this5 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this5.wda = new _webdriveragent.default(_this5.xcodeVersion, _this5.opts);
      yield _this5.wda.cleanupObsoleteProcesses();

      if (_this5.opts.useNewWDA) {
        _logger.default.debug(`Capability 'useNewWDA' set to true, so uninstalling WDA before proceeding`);

        yield _this5.wda.quitAndUninstall();

        _this5.logEvent('wdaUninstalled');
      } else if (!_appiumSupport.util.hasValue(_this5.wda.webDriverAgentUrl)) {
        yield _this5.wda.setupCaching(_this5.opts.updatedWDABundleId);
      }

      const quitAndUninstall = function () {
        var _ref7 = (0, _asyncToGenerator2.default)(function* (msg) {
          _logger.default.debug(msg);

          if (_this5.opts.webDriverAgentUrl) {
            _logger.default.debug('Not quitting and unsinstalling WebDriverAgent as webDriverAgentUrl is provided');

            throw new Error(msg);
          }

          _logger.default.warn('Quitting and uninstalling WebDriverAgent, then retrying');

          yield _this5.wda.quitAndUninstall();
          throw new Error(msg);
        });

        return function quitAndUninstall(_x2) {
          return _ref7.apply(this, arguments);
        };
      }();

      const startupRetries = _this5.opts.wdaStartupRetries || (_this5.isRealDevice() ? WDA_REAL_DEV_STARTUP_RETRIES : WDA_SIM_STARTUP_RETRIES);
      const startupRetryInterval = _this5.opts.wdaStartupRetryInterval || WDA_STARTUP_RETRY_INTERVAL;

      _logger.default.debug(`Trying to start WebDriverAgent ${startupRetries} times with ${startupRetryInterval}ms interval`);

      yield (0, _asyncbox.retryInterval)(startupRetries, startupRetryInterval, (0, _asyncToGenerator2.default)(function* () {
        _this5.logEvent('wdaStartAttempted');

        try {
          const retries = _this5.xcodeVersion.major >= 10 ? 2 : 1;
          _this5.cachedWdaStatus = yield (0, _asyncbox.retry)(retries, _this5.wda.launch.bind(_this5.wda), sessionId, realDevice);
        } catch (err) {
          _this5.logEvent('wdaStartFailed');

          let errorMsg = `Unable to launch WebDriverAgent because of xcodebuild failure: "${err.message}".`;

          if (_this5.isRealDevice()) {
            errorMsg += ` Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }

          yield quitAndUninstall(errorMsg);
        }

        _this5.proxyReqRes = _this5.wda.proxyReqRes.bind(_this5.wda);
        _this5.jwpProxyActive = true;

        try {
          yield (0, _asyncbox.retryInterval)(15, 1000, (0, _asyncToGenerator2.default)(function* () {
            _this5.logEvent('wdaSessionAttempted');

            _logger.default.debug('Sending createSession command to WDA');

            try {
              _this5.cachedWdaStatus = _this5.cachedWdaStatus || (yield _this5.proxyCommand('/status', 'GET'));
              yield _this5.startWdaSession(_this5.opts.bundleId, _this5.opts.processArguments);
            } catch (err) {
              _logger.default.debug(`Failed to create WDA session (${err.message}). Retrying...`);

              throw err;
            }
          }));

          _this5.logEvent('wdaSessionStarted');
        } catch (err) {
          let errorMsg = `Unable to start WebDriverAgent session because of xcodebuild failure: ${err.message}`;

          if (_this5.isRealDevice()) {
            errorMsg += ` Make sure you follow the tutorial at ${WDA_REAL_DEV_TUTORIAL_URL}. ` + `Try to remove the WebDriverAgentRunner application from the device if it is installed ` + `and reboot the device.`;
          }

          yield quitAndUninstall(errorMsg);
        }

        if (!_appiumSupport.util.hasValue(_this5.opts.preventWDAAttachments)) {
          _this5.opts.preventWDAAttachments = _this5.xcodeVersion.major < 9;

          if (_this5.opts.preventWDAAttachments) {
            _logger.default.info('Enabled WDA attachments prevention by default to save the disk space. ' + `Set 'preventWDAAttachments' capability to false if this is an undesired behavior.`);
          }
        }

        if (_this5.opts.preventWDAAttachments) {
          yield (0, _utils.adjustWDAAttachmentsPermissions)(_this5.wda, _this5.opts.preventWDAAttachments ? '555' : '755');

          _this5.logEvent('wdaPermsAdjusted');
        }

        if (_this5.opts.clearSystemFiles) {
          yield (0, _utils.markSystemFilesForCleanup)(_this5.wda);
        }

        _this5.wda.fullyStarted = true;

        _this5.logEvent('wdaStarted');
      }));
    })();
  }

  runReset(opts = null) {
    var _this6 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this6.logEvent('resetStarted');

      if (_this6.isRealDevice()) {
        yield (0, _realDeviceManagement.runRealDeviceReset)(_this6.opts.device, opts || _this6.opts);
      } else {
        yield (0, _simulatorManagement.runSimulatorReset)(_this6.opts.device, opts || _this6.opts);
      }

      _this6.logEvent('resetComplete');
    })();
  }

  deleteSession() {
    var _this7 = this,
        _superprop_callDeleteSession = (..._args2) => super.deleteSession(..._args2);

    return (0, _asyncToGenerator2.default)(function* () {
      yield (0, _utils.removeAllSessionWebSocketHandlers)(_this7.server, _this7.sessionId);
      yield SHARED_RESOURCES_GUARD.acquire(XCUITestDriver.name, (0, _asyncToGenerator2.default)(function* () {
        yield _this7.stop();

        if (_this7.opts.preventWDAAttachments) {
          yield (0, _utils.adjustWDAAttachmentsPermissions)(_this7.wda, '755');
        }

        if (_this7.opts.clearSystemFiles) {
          if (_this7.isAppTemporary) {
            yield _appiumSupport.fs.rimraf(_this7.opts.app);
          }

          yield (0, _utils.clearSystemFiles)(_this7.wda, !!_this7.opts.showXcodeLog);
        } else {
          _logger.default.debug('Not clearing log files. Use `clearSystemFiles` capability to turn on.');
        }
      }));

      if (_this7.isWebContext()) {
        _logger.default.debug('In a web session. Removing remote debugger');

        yield _this7.stopRemote();
      }

      if (_this7.opts.resetOnSessionStartOnly === false) {
        yield _this7.runReset();
      }

      if (_this7.isSimulator() && !_this7.opts.noReset && !!_this7.opts.device) {
        if (_this7.lifecycleData.createSim) {
          _logger.default.debug(`Deleting simulator created for this run (udid: '${_this7.opts.udid}')`);

          yield (0, _simulatorManagement.shutdownSimulator)(_this7.opts.device);
          yield _this7.opts.device.delete();
        }
      }

      if (!_lodash.default.isEmpty(_this7.logs)) {
        yield _this7.logs.syslog.stopCapture();
        _this7.logs = {};
      }

      if (_this7.iwdpServer) {
        yield _this7.stopIWDP();
      }

      if (_this7.opts.enableAsyncExecuteFromHttps && !_this7.isRealDevice()) {
        yield _this7.stopHttpsAsyncServer();
      }

      if (_this7.mjpegStream) {
        _logger.default.info('Closing MJPEG stream');

        _this7.mjpegStream.stop();
      }

      _this7.resetIos();

      yield _superprop_callDeleteSession();
    })();
  }

  stop() {
    var _this8 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this8.jwpProxyActive = false;
      _this8.proxyReqRes = null;

      if (_this8.wda && _this8.wda.fullyStarted) {
        if (_this8.wda.jwproxy) {
          try {
            yield _this8.proxyCommand(`/session/${_this8.sessionId}`, 'DELETE');
          } catch (err) {
            _logger.default.debug(`Unable to DELETE session on WDA: '${err.message}'. Continuing shutdown.`);
          }
        }

        if (_this8.wda && !_this8.wda.webDriverAgentUrl && _this8.opts.useNewWDA) {
          yield _this8.wda.quit();
        }
      }
    })();
  }

  executeCommand(cmd, ...args) {
    var _this9 = this,
        _superprop_callExecuteCommand = (..._args3) => super.executeCommand(..._args3);

    return (0, _asyncToGenerator2.default)(function* () {
      _logger.default.debug(`Executing command '${cmd}'`);

      if (cmd === 'receiveAsyncResponse') {
        return yield _this9.receiveAsyncResponse(...args);
      }

      if (cmd === 'getStatus') {
        return yield _this9.getStatus();
      }

      return yield _superprop_callExecuteCommand(cmd, ...args);
    })();
  }

  configureApp() {
    var _this10 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      function appIsPackageOrBundle(app) {
        return /^([a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+)+$/.test(app);
      }

      if (!_this10.opts.bundleId && appIsPackageOrBundle(_this10.opts.app)) {
        _this10.opts.bundleId = _this10.opts.app;
        _this10.opts.app = '';
      }

      if (_this10.opts.bundleId && appIsPackageOrBundle(_this10.opts.bundleId) && (_this10.opts.app === '' || appIsPackageOrBundle(_this10.opts.app))) {
        _logger.default.debug('App is an iOS bundle, will attempt to run as pre-existing');

        return;
      }

      if (_this10.opts.app && _this10.opts.app.toLowerCase() === 'settings') {
        _this10.opts.bundleId = 'com.apple.Preferences';
        _this10.opts.app = null;
        return;
      } else if (_this10.opts.app && _this10.opts.app.toLowerCase() === 'calendar') {
        _this10.opts.bundleId = 'com.apple.mobilecal';
        _this10.opts.app = null;
        return;
      }

      const originalAppPath = _this10.opts.app;

      try {
        _this10.opts.app = yield _this10.helpers.configureApp(_this10.opts.app, '.app', _this10.opts.mountRoot, _this10.opts.windowsShareUserName, _this10.opts.windowsSharePassword);
      } catch (err) {
        _logger.default.error(err);

        throw new Error(`Bad app: ${_this10.opts.app}. App paths need to be absolute, or relative to the appium ` + 'server install dir, or a URL to compressed file, or a special app name.');
      }

      _this10.isAppTemporary = _this10.opts.app && originalAppPath !== _this10.opts.app;
    })();
  }

  determineDevice() {
    var _this11 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this11.lifecycleData.createSim = false;
      _this11.opts.deviceName = (0, _utils.translateDeviceName)(_this11.opts.platformVersion, _this11.opts.deviceName);

      if (_this11.opts.udid && (yield (0, _appiumIosSimulator.simExists)(_this11.opts.udid))) {
        const device = yield (0, _appiumIosSimulator.getSimulator)(_this11.opts.udid);
        return {
          device,
          realDevice: false,
          udid: _this11.opts.udid
        };
      }

      if (_this11.opts.udid) {
        if (_this11.opts.udid.toLowerCase() === 'auto') {
          try {
            _this11.opts.udid = yield (0, _utils.detectUdid)();
          } catch (err) {
            _logger.default.warn(`Cannot detect any connected real devices. Falling back to Simulator. Original error: ${err.message}`);

            const device = yield (0, _simulatorManagement.getExistingSim)(_this11.opts);

            if (!device) {
              _logger.default.errorAndThrow(`Cannot detect udid for ${_this11.opts.deviceName} Simulator running iOS ${_this11.opts.platformVersion}`);
            }

            _this11.opts.udid = device.udid;
            return {
              device,
              realDevice: false,
              udid: device.udid
            };
          }
        } else {
          const devices = yield (0, _realDeviceManagement.getConnectedDevices)();

          _logger.default.debug(`Available devices: ${devices.join(', ')}`);

          if (devices.indexOf(_this11.opts.udid) === -1) {
            throw new Error(`Unknown device or simulator UDID: '${_this11.opts.udid}'`);
          }
        }

        const device = yield (0, _realDeviceManagement.getRealDeviceObj)(_this11.opts.udid);
        return {
          device,
          realDevice: true,
          udid: _this11.opts.udid
        };
      }

      let device = yield (0, _simulatorManagement.getExistingSim)(_this11.opts);

      if (device) {
        return {
          device,
          realDevice: false,
          udid: device.udid
        };
      }

      _logger.default.info('Simulator udid not provided, using desired caps to create a new simulator');

      if (!_this11.opts.platformVersion && _this11.iosSdkVersion) {
        _logger.default.info(`No platformVersion specified. Using latest version Xcode supports: '${_this11.iosSdkVersion}' ` + `This may cause problems if a simulator does not exist for this platform version.`);

        _this11.opts.platformVersion = _this11.iosSdkVersion;
      }

      if (_this11.opts.noReset) {
        let device = yield (0, _simulatorManagement.getExistingSim)(_this11.opts);

        if (device) {
          return {
            device,
            realDevice: false,
            udid: device.udid
          };
        }
      }

      device = yield _this11.createSim();
      return {
        device,
        realDevice: false,
        udid: device.udid
      };
    })();
  }

  startSim() {
    var _this12 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      const runOpts = {
        scaleFactor: _this12.opts.scaleFactor,
        connectHardwareKeyboard: !!_this12.opts.connectHardwareKeyboard,
        isHeadless: !!_this12.opts.isHeadless,
        devicePreferences: {}
      };

      if (_this12.opts.SimulatorWindowCenter) {
        runOpts.devicePreferences.SimulatorWindowCenter = _this12.opts.SimulatorWindowCenter;
      }

      const orientation = _lodash.default.isString(_this12.opts.orientation) && _this12.opts.orientation.toUpperCase();

      switch (orientation) {
        case 'LANDSCAPE':
          runOpts.devicePreferences.SimulatorWindowOrientation = 'LandscapeLeft';
          runOpts.devicePreferences.SimulatorWindowRotationAngle = 90;
          break;

        case 'PORTRAIT':
          runOpts.devicePreferences.SimulatorWindowOrientation = 'Portrait';
          runOpts.devicePreferences.SimulatorWindowRotationAngle = 0;
          break;
      }

      yield _this12.opts.device.run(runOpts);
    })();
  }

  createSim() {
    var _this13 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this13.lifecycleData.createSim = true;
      let sim = yield (0, _simulatorManagement.createSim)(_this13.opts);

      _logger.default.info(`Created simulator with udid '${sim.udid}'.`);

      return sim;
    })();
  }

  launchApp() {
    var _this14 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      const APP_LAUNCH_TIMEOUT = 20 * 1000;

      _this14.logEvent('appLaunchAttempted');

      yield (0, _nodeSimctl.launch)(_this14.opts.device.udid, _this14.opts.bundleId);

      let checkStatus = function () {
        var _ref11 = (0, _asyncToGenerator2.default)(function* () {
          let response = yield _this14.proxyCommand('/status', 'GET');
          let currentApp = response.currentApp.bundleID;

          if (currentApp !== _this14.opts.bundleId) {
            throw new Error(`${_this14.opts.bundleId} not in foreground. ${currentApp} is in foreground`);
          }
        });

        return function checkStatus() {
          return _ref11.apply(this, arguments);
        };
      }();

      _logger.default.info(`Waiting for '${_this14.opts.bundleId}' to be in foreground`);

      let retries = parseInt(APP_LAUNCH_TIMEOUT / 200, 10);
      yield (0, _asyncbox.retryInterval)(retries, 200, checkStatus);

      _logger.default.info(`${_this14.opts.bundleId} is in foreground`);

      _this14.logEvent('appLaunched');
    })();
  }

  startWdaSession(bundleId, processArguments) {
    var _this15 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      let args = processArguments ? processArguments.args || [] : [];

      if (!_lodash.default.isArray(args)) {
        throw new Error(`processArguments.args capability is expected to be an array. ` + `${JSON.stringify(args)} is given instead`);
      }

      let env = processArguments ? processArguments.env || {} : {};

      if (!_lodash.default.isPlainObject(env)) {
        throw new Error(`processArguments.env capability is expected to be a dictionary. ` + `${JSON.stringify(env)} is given instead`);
      }

      let shouldWaitForQuiescence = _appiumSupport.util.hasValue(_this15.opts.waitForQuiescence) ? _this15.opts.waitForQuiescence : true;
      let maxTypingFrequency = _appiumSupport.util.hasValue(_this15.opts.maxTypingFrequency) ? _this15.opts.maxTypingFrequency : 60;
      let shouldUseSingletonTestManager = _appiumSupport.util.hasValue(_this15.opts.shouldUseSingletonTestManager) ? _this15.opts.shouldUseSingletonTestManager : true;
      let shouldUseTestManagerForVisibilityDetection = false;

      if (_appiumSupport.util.hasValue(_this15.opts.simpleIsVisibleCheck)) {
        shouldUseTestManagerForVisibilityDetection = _this15.opts.simpleIsVisibleCheck;
      }

      if (!isNaN(parseFloat(_this15.opts.platformVersion)) && parseFloat(_this15.opts.platformVersion).toFixed(1) === '9.3') {
        _logger.default.info(`Forcing shouldUseSingletonTestManager capability value to true, because of known XCTest issues under 9.3 platform version`);

        shouldUseTestManagerForVisibilityDetection = true;
      }

      if (_appiumSupport.util.hasValue(_this15.opts.language)) {
        args.push('-AppleLanguages', `(${_this15.opts.language})`);
        args.push('-NSLanguages', `(${_this15.opts.language})`);
      }

      if (_appiumSupport.util.hasValue(_this15.opts.locale)) {
        args.push('-AppleLocale', _this15.opts.locale);
      }

      let desired = {
        desiredCapabilities: {
          bundleId,
          arguments: args,
          environment: env,
          shouldWaitForQuiescence,
          shouldUseTestManagerForVisibilityDetection,
          maxTypingFrequency,
          shouldUseSingletonTestManager
        }
      };

      if (_appiumSupport.util.hasValue(_this15.opts.shouldUseCompactResponses)) {
        desired.desiredCapabilities.shouldUseCompactResponses = _this15.opts.shouldUseCompactResponses;
      }

      if (_appiumSupport.util.hasValue(_this15.opts.elementResponseFields)) {
        desired.desiredCapabilities.elementResponseFields = _this15.opts.elementResponseFields;
      }

      if (_this15.opts.autoAcceptAlerts) {
        desired.desiredCapabilities.defaultAlertAction = 'accept';
      } else if (_this15.opts.autoDismissAlerts) {
        desired.desiredCapabilities.defaultAlertAction = 'dismiss';
      }

      yield _this15.proxyCommand('/session', 'POST', desired);
    })();
  }

  proxyActive() {
    return this.jwpProxyActive;
  }

  getProxyAvoidList() {
    if (this.isWebview()) {
      return NO_PROXY_WEB_LIST;
    }

    return NO_PROXY_NATIVE_LIST;
  }

  canProxy() {
    return true;
  }

  isSafari() {
    return !!this.safari;
  }

  isRealDevice() {
    return this.opts.realDevice;
  }

  isSimulator() {
    return !this.opts.realDevice;
  }

  isWebview() {
    return this.isSafari() || this.isWebContext();
  }

  validateLocatorStrategy(strategy) {
    super.validateLocatorStrategy(strategy, this.isWebContext());
  }

  validateDesiredCaps(caps) {
    if (!super.validateDesiredCaps(caps)) {
      return false;
    }

    if ((caps.browserName || '').toLowerCase() !== 'safari' && !caps.app && !caps.bundleId) {
      let msg = 'The desired capabilities must include either an app or a bundleId for iOS';

      _logger.default.errorAndThrow(msg);
    }

    let verifyProcessArgument = processArguments => {
      const args = processArguments.args,
            env = processArguments.env;

      if (!_lodash.default.isNil(args) && !_lodash.default.isArray(args)) {
        _logger.default.errorAndThrow('processArguments.args must be an array of strings');
      }

      if (!_lodash.default.isNil(env) && !_lodash.default.isPlainObject(env)) {
        _logger.default.errorAndThrow('processArguments.env must be an object <key,value> pair {a:b, c:d}');
      }
    };

    if (caps.processArguments) {
      if (_lodash.default.isString(caps.processArguments)) {
        try {
          caps.processArguments = JSON.parse(caps.processArguments);
          verifyProcessArgument(caps.processArguments);
        } catch (err) {
          _logger.default.errorAndThrow(`processArguments must be a json format or an object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null. Error: ${err}`);
        }
      } else if (_lodash.default.isPlainObject(caps.processArguments)) {
        verifyProcessArgument(caps.processArguments);
      } else {
        _logger.default.errorAndThrow(`'processArguments must be an object, or a string JSON object with format {args : [], env : {a:b, c:d}}. ` + `Both environment and argument can be null.`);
      }
    }

    if (caps.keychainPath && !caps.keychainPassword || !caps.keychainPath && caps.keychainPassword) {
      _logger.default.errorAndThrow(`If 'keychainPath' is set, 'keychainPassword' must also be set (and vice versa).`);
    }

    this.opts.resetOnSessionStartOnly = !_appiumSupport.util.hasValue(this.opts.resetOnSessionStartOnly) || this.opts.resetOnSessionStartOnly;
    this.opts.useNewWDA = _appiumSupport.util.hasValue(this.opts.useNewWDA) ? this.opts.useNewWDA : false;

    if (caps.commandTimeouts) {
      caps.commandTimeouts = (0, _utils.normalizeCommandTimeouts)(caps.commandTimeouts);
    }

    if (_lodash.default.isString(caps.webDriverAgentUrl)) {
      const _url$parse = _url.default.parse(caps.webDriverAgentUrl),
            protocol = _url$parse.protocol,
            host = _url$parse.host;

      if (_lodash.default.isEmpty(protocol) || _lodash.default.isEmpty(host)) {
        _logger.default.errorAndThrow(`'webDriverAgentUrl' capability is expected to contain a valid WebDriverAgent server URL. ` + `'${caps.webDriverAgentUrl}' is given instead`);
      }
    }

    if (caps.browserName) {
      if (caps.bundleId) {
        _logger.default.errorAndThrow(`'browserName' cannot be set together with 'bundleId' capability`);
      }

      if (caps.app) {
        _logger.default.warn(`The capabilities should generally not include both an 'app' and a 'browserName'`);
      }
    }

    if (caps.permissions) {
      try {
        var _iteratorNormalCompletion2 = true;
        var _didIteratorError2 = false;
        var _iteratorError2 = undefined;

        try {
          for (var _iterator2 = _lodash.default.toPairs(JSON.parse(caps.permissions))[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            const _step2$value = (0, _slicedToArray2.default)(_step2.value, 2),
                  bundleId = _step2$value[0],
                  perms = _step2$value[1];

            if (!_lodash.default.isString(bundleId)) {
              throw new Error(`'${JSON.stringify(bundleId)}' must be a string`);
            }

            if (!_lodash.default.isPlainObject(perms)) {
              throw new Error(`'${JSON.stringify(perms)}' must be a JSON object`);
            }
          }
        } catch (err) {
          _didIteratorError2 = true;
          _iteratorError2 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
              _iterator2.return();
            }
          } finally {
            if (_didIteratorError2) {
              throw _iteratorError2;
            }
          }
        }
      } catch (e) {
        _logger.default.errorAndThrow(`'${caps.permissions}' is expected to be a valid object with format ` + `{"<bundleId1>": {"<serviceName1>": "<serviceStatus1>", ...}, ...}. Original error: ${e.message}`);
      }
    }

    return true;
  }

  installAUT() {
    var _this16 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (_this16.isSafari()) {
        return;
      }

      if (_this16.opts.autoLaunch === false) {
        return;
      }

      try {
        yield (0, _utils.verifyApplicationPlatform)(_this16.opts.app, _this16.isSimulator());
      } catch (err) {
        _logger.default.warn(`*********************************`);

        _logger.default.warn(`${_this16.isSimulator() ? 'Simulator' : 'Real device'} architecture appears to be unsupported ` + `by the '${_this16.opts.app}' application. ` + `Make sure the correct deployment target has been selected for its compilation in Xcode.`);

        _logger.default.warn('Don\'t be surprised if the application fails to launch.');

        _logger.default.warn(`*********************************`);
      }

      if (_this16.isRealDevice()) {
        yield (0, _realDeviceManagement.installToRealDevice)(_this16.opts.device, _this16.opts.app, _this16.opts.bundleId, _this16.opts.noReset);
      } else {
        yield (0, _simulatorManagement.installToSimulator)(_this16.opts.device, _this16.opts.app, _this16.opts.bundleId, _this16.opts.noReset);
      }

      if (_appiumSupport.util.hasValue(_this16.opts.iosInstallPause)) {
        let pause = parseInt(_this16.opts.iosInstallPause, 10);

        _logger.default.debug(`iosInstallPause set. Pausing ${pause} ms before continuing`);

        yield _bluebird.default.delay(pause);
      }
    })();
  }

  setInitialOrientation(orientation) {
    var _this17 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (!_lodash.default.isString(orientation)) {
        _logger.default.info('Skipping setting of the initial display orientation. ' + 'Set the "orientation" capability to either "LANDSCAPE" or "PORTRAIT", if this is an undesired behavior.');

        return;
      }

      orientation = orientation.toUpperCase();

      if (!_lodash.default.includes(['LANDSCAPE', 'PORTRAIT'], orientation)) {
        _logger.default.debug(`Unable to set initial orientation to '${orientation}'`);

        return;
      }

      _logger.default.debug(`Setting initial orientation to '${orientation}'`);

      try {
        yield _this17.proxyCommand('/orientation', 'POST', {
          orientation
        });
        _this17.opts.curOrientation = orientation;
      } catch (err) {
        _logger.default.warn(`Setting initial orientation failed with: ${err.message}`);
      }
    })();
  }

  _getCommandTimeout(cmdName) {
    if (this.opts.commandTimeouts) {
      if (cmdName && _lodash.default.has(this.opts.commandTimeouts, cmdName)) {
        return this.opts.commandTimeouts[cmdName];
      }

      return this.opts.commandTimeouts[_utils.DEFAULT_TIMEOUT_KEY];
    }
  }

  getSession() {
    var _this18 = this,
        _superprop_callGetSession = (..._args4) => super.getSession(..._args4);

    return (0, _asyncToGenerator2.default)(function* () {
      const driverSession = yield _superprop_callGetSession();

      if (!_this18.wdaCaps) {
        _this18.wdaCaps = yield _this18.proxyCommand('/', 'GET');
      }

      if (!_this18.deviceCaps) {
        const _ref12 = yield _this18.getScreenInfo(),
              statusBarSize = _ref12.statusBarSize,
              scale = _ref12.scale;

        _this18.deviceCaps = {
          pixelRatio: scale,
          statBarHeight: statusBarSize.height,
          viewportRect: yield _this18.getViewportRect()
        };
      }

      _logger.default.info("Merging WDA caps over Appium caps for session detail response");

      return Object.assign({
        udid: _this18.opts.udid
      }, driverSession, _this18.wdaCaps.capabilities, _this18.deviceCaps);
    })();
  }

  startIWDP() {
    var _this19 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this19.logEvent('iwdpStarting');

      _this19.iwdpServer = new _appiumIosDriver.IWDP(_this19.opts.webkitDebugProxyPort, _this19.opts.udid);
      yield _this19.iwdpServer.start();

      _this19.logEvent('iwdpStarted');
    })();
  }

  stopIWDP() {
    var _this20 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (_this20.iwdpServer) {
        yield _this20.iwdpServer.stop();
        delete _this20.iwdpServer;
      }
    })();
  }

  reset() {
    var _this21 = this,
        _superprop_callReset = (..._args5) => super.reset(..._args5);

    return (0, _asyncToGenerator2.default)(function* () {
      if (_this21.opts.noReset) {
        let opts = _lodash.default.cloneDeep(_this21.opts);

        opts.noReset = false;
        opts.fullReset = false;
        const shutdownHandler = _this21.resetOnUnexpectedShutdown;

        _this21.resetOnUnexpectedShutdown = () => {};

        try {
          yield _this21.runReset(opts);
        } finally {
          _this21.resetOnUnexpectedShutdown = shutdownHandler;
        }
      }

      yield _superprop_callReset();
    })();
  }

}

exports.XCUITestDriver = XCUITestDriver;
Object.assign(XCUITestDriver.prototype, _index.default);
var _default = XCUITestDriver;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kcml2ZXIuanMiXSwibmFtZXMiOlsiU0FGQVJJX0JVTkRMRV9JRCIsIldEQV9TSU1fU1RBUlRVUF9SRVRSSUVTIiwiV0RBX1JFQUxfREVWX1NUQVJUVVBfUkVUUklFUyIsIldEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkwiLCJXREFfU1RBUlRVUF9SRVRSWV9JTlRFUlZBTCIsIkRFRkFVTFRfU0VUVElOR1MiLCJuYXRpdmVXZWJUYXAiLCJ1c2VKU09OU291cmNlIiwic2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyIsImVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXMiLCJtanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5IiwibWpwZWdTZXJ2ZXJGcmFtZXJhdGUiLCJTSEFSRURfUkVTT1VSQ0VTX0dVQVJEIiwiQXN5bmNMb2NrIiwiTk9fUFJPWFlfTkFUSVZFX0xJU1QiLCJOT19QUk9YWV9XRUJfTElTVCIsImNvbmNhdCIsIk1FTU9JWkVEX0ZVTkNUSU9OUyIsIlhDVUlUZXN0RHJpdmVyIiwiQmFzZURyaXZlciIsImNvbnN0cnVjdG9yIiwib3B0cyIsInNob3VsZFZhbGlkYXRlQ2FwcyIsImRlc2lyZWRDYXBDb25zdHJhaW50cyIsImxvY2F0b3JTdHJhdGVnaWVzIiwid2ViTG9jYXRvclN0cmF0ZWdpZXMiLCJyZXNldElvcyIsInNldHRpbmdzIiwiRGV2aWNlU2V0dGluZ3MiLCJvblNldHRpbmdzVXBkYXRlIiwiYmluZCIsImZuIiwiXyIsIm1lbW9pemUiLCJrZXkiLCJ2YWx1ZSIsInByb3h5Q29tbWFuZCIsIndkYSIsImRldmljZSIsImp3cFByb3h5QWN0aXZlIiwicHJveHlSZXFSZXMiLCJqd3BQcm94eUF2b2lkIiwic2FmYXJpIiwiY2FjaGVkV2RhU3RhdHVzIiwiY3VyV2ViRnJhbWVzIiwid2ViRWxlbWVudElkcyIsIl9jdXJyZW50VXJsIiwiY3VyQ29udGV4dCIsInhjb2RlVmVyc2lvbiIsImlvc1Nka1ZlcnNpb24iLCJjb250ZXh0cyIsImltcGxpY2l0V2FpdE1zIiwiYXN5bmNsaWJXYWl0TXMiLCJwYWdlTG9hZE1zIiwibGFuZHNjYXBlV2ViQ29vcmRzT2Zmc2V0IiwiZHJpdmVyRGF0YSIsImdldFN0YXR1cyIsImRyaXZlckluZm8iLCJzdGF0dXMiLCJidWlsZCIsInZlcnNpb24iLCJjcmVhdGVTZXNzaW9uIiwiYXJncyIsImxpZmVjeWNsZURhdGEiLCJzZXNzaW9uSWQiLCJjYXBzIiwic3RhcnQiLCJPYmplY3QiLCJhc3NpZ24iLCJkZWZhdWx0U2VydmVyQ2FwcyIsInVkaWQiLCJoYXMiLCJ1cGRhdGVTZXR0aW5ncyIsIndkYVNldHRpbmdzIiwibWpwZWdTY3JlZW5zaG90VXJsIiwibG9nIiwiaW5mbyIsIm1qcGVnU3RyZWFtIiwibWpwZWciLCJNSnBlZ1N0cmVhbSIsImUiLCJlcnJvciIsImRlbGV0ZVNlc3Npb24iLCJub1Jlc2V0IiwiZnVsbFJlc2V0IiwicGxhdGZvcm1WZXJzaW9uIiwicGFyc2VGbG9hdCIsIkVycm9yIiwiZGV0ZXJtaW5lRGV2aWNlIiwicmVhbERldmljZSIsImlzRW1wdHkiLCJ3ZWJEcml2ZXJBZ2VudFVybCIsInRvb2xzIiwidG9vbHNWZXJzaW9uIiwiZGVidWciLCJ2ZXJzaW9uU3RyaW5nIiwibG9nRXZlbnQiLCJlbmFibGVBc3luY0V4ZWN1dGVGcm9tSHR0cHMiLCJpc1JlYWxEZXZpY2UiLCJzdGFydEh0dHBzQXN5bmNTZXJ2ZXIiLCJpc0Z1bmN0aW9uIiwiZ2V0UGxhdGZvcm1WZXJzaW9uIiwibXNnIiwiZXJyb3JBbmRUaHJvdyIsImJyb3dzZXJOYW1lIiwidG9Mb3dlckNhc2UiLCJhcHAiLCJ1bmRlZmluZWQiLCJwcm9jZXNzQXJndW1lbnRzIiwiYnVuZGxlSWQiLCJzYWZhcmlJbml0aWFsVXJsIiwiYWRkcmVzcyIsInBvcnQiLCJjb25maWd1cmVBcHAiLCJhcHBVdGlscyIsImV4dHJhY3RCdW5kbGVJZCIsInJ1blJlc2V0Iiwic3RhcnRMb2dDYXB0dXJlIiwicmVzdWx0IiwiaXNMb2dDYXB0dXJlU3RhcnRlZCIsImlzU2ltdWxhdG9yIiwic2h1dGRvd25PdGhlclNpbXVsYXRvcnMiLCJyZWxheGVkU2VjdXJpdHlFbmFibGVkIiwidXRpbCIsImhhc1ZhbHVlIiwicmVkdWNlTW90aW9uIiwic2V0UmVkdWNlTW90aW9uIiwibG9jYWxDb25maWciLCJpb3NTZXR0aW5ncyIsInNldExvY2FsZUFuZFByZWZlcmVuY2VzIiwiaXNTYWZhcmkiLCJzaW0iLCJzdGFydFNpbSIsImN1c3RvbVNTTENlcnQiLCJ0cnVuY2F0ZSIsImxlbmd0aCIsImluc3RhbGxBVVQiLCJpc0FwcEluc3RhbGxlZCIsInBlcm1pc3Npb25zIiwidG9QYWlycyIsIkpTT04iLCJwYXJzZSIsInBlcm1pc3Npb25zTWFwcGluZyIsInNldFBlcm1pc3Npb25zIiwid2FybiIsImFjcXVpcmUiLCJuYW1lIiwic3RhcnRXZGEiLCJzZXRJbml0aWFsT3JpZW50YXRpb24iLCJvcmllbnRhdGlvbiIsInN0YXJ0SVdEUCIsIml3ZHBTZXJ2ZXIiLCJlbmRwb2ludCIsImVyciIsIm1lc3NhZ2UiLCJhdXRvV2VidmlldyIsIm5hdlRvSW5pdGlhbFdlYnZpZXciLCJjYWxlbmRhckFjY2Vzc0F1dGhvcml6ZWQiLCJlbmFibGVDYWxlbmRhckFjY2VzcyIsImRpc2FibGVDYWxlbmRhckFjY2VzcyIsIldlYkRyaXZlckFnZW50IiwiY2xlYW51cE9ic29sZXRlUHJvY2Vzc2VzIiwidXNlTmV3V0RBIiwicXVpdEFuZFVuaW5zdGFsbCIsInNldHVwQ2FjaGluZyIsInVwZGF0ZWRXREFCdW5kbGVJZCIsInN0YXJ0dXBSZXRyaWVzIiwid2RhU3RhcnR1cFJldHJpZXMiLCJzdGFydHVwUmV0cnlJbnRlcnZhbCIsIndkYVN0YXJ0dXBSZXRyeUludGVydmFsIiwicmV0cmllcyIsIm1ham9yIiwibGF1bmNoIiwiZXJyb3JNc2ciLCJzdGFydFdkYVNlc3Npb24iLCJwcmV2ZW50V0RBQXR0YWNobWVudHMiLCJjbGVhclN5c3RlbUZpbGVzIiwiZnVsbHlTdGFydGVkIiwic2VydmVyIiwic3RvcCIsImlzQXBwVGVtcG9yYXJ5IiwiZnMiLCJyaW1yYWYiLCJzaG93WGNvZGVMb2ciLCJpc1dlYkNvbnRleHQiLCJzdG9wUmVtb3RlIiwicmVzZXRPblNlc3Npb25TdGFydE9ubHkiLCJjcmVhdGVTaW0iLCJkZWxldGUiLCJsb2dzIiwic3lzbG9nIiwic3RvcENhcHR1cmUiLCJzdG9wSVdEUCIsInN0b3BIdHRwc0FzeW5jU2VydmVyIiwiandwcm94eSIsInF1aXQiLCJleGVjdXRlQ29tbWFuZCIsImNtZCIsInJlY2VpdmVBc3luY1Jlc3BvbnNlIiwiYXBwSXNQYWNrYWdlT3JCdW5kbGUiLCJ0ZXN0Iiwib3JpZ2luYWxBcHBQYXRoIiwiaGVscGVycyIsIm1vdW50Um9vdCIsIndpbmRvd3NTaGFyZVVzZXJOYW1lIiwid2luZG93c1NoYXJlUGFzc3dvcmQiLCJkZXZpY2VOYW1lIiwiZGV2aWNlcyIsImpvaW4iLCJpbmRleE9mIiwicnVuT3B0cyIsInNjYWxlRmFjdG9yIiwiY29ubmVjdEhhcmR3YXJlS2V5Ym9hcmQiLCJpc0hlYWRsZXNzIiwiZGV2aWNlUHJlZmVyZW5jZXMiLCJTaW11bGF0b3JXaW5kb3dDZW50ZXIiLCJpc1N0cmluZyIsInRvVXBwZXJDYXNlIiwiU2ltdWxhdG9yV2luZG93T3JpZW50YXRpb24iLCJTaW11bGF0b3JXaW5kb3dSb3RhdGlvbkFuZ2xlIiwicnVuIiwibGF1bmNoQXBwIiwiQVBQX0xBVU5DSF9USU1FT1VUIiwiY2hlY2tTdGF0dXMiLCJyZXNwb25zZSIsImN1cnJlbnRBcHAiLCJidW5kbGVJRCIsInBhcnNlSW50IiwiaXNBcnJheSIsInN0cmluZ2lmeSIsImVudiIsImlzUGxhaW5PYmplY3QiLCJzaG91bGRXYWl0Rm9yUXVpZXNjZW5jZSIsIndhaXRGb3JRdWllc2NlbmNlIiwibWF4VHlwaW5nRnJlcXVlbmN5Iiwic2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIiLCJzaG91bGRVc2VUZXN0TWFuYWdlckZvclZpc2liaWxpdHlEZXRlY3Rpb24iLCJzaW1wbGVJc1Zpc2libGVDaGVjayIsImlzTmFOIiwidG9GaXhlZCIsImxhbmd1YWdlIiwicHVzaCIsImxvY2FsZSIsImRlc2lyZWQiLCJkZXNpcmVkQ2FwYWJpbGl0aWVzIiwiYXJndW1lbnRzIiwiZW52aXJvbm1lbnQiLCJlbGVtZW50UmVzcG9uc2VGaWVsZHMiLCJhdXRvQWNjZXB0QWxlcnRzIiwiZGVmYXVsdEFsZXJ0QWN0aW9uIiwiYXV0b0Rpc21pc3NBbGVydHMiLCJwcm94eUFjdGl2ZSIsImdldFByb3h5QXZvaWRMaXN0IiwiaXNXZWJ2aWV3IiwiY2FuUHJveHkiLCJ2YWxpZGF0ZUxvY2F0b3JTdHJhdGVneSIsInN0cmF0ZWd5IiwidmFsaWRhdGVEZXNpcmVkQ2FwcyIsInZlcmlmeVByb2Nlc3NBcmd1bWVudCIsImlzTmlsIiwia2V5Y2hhaW5QYXRoIiwia2V5Y2hhaW5QYXNzd29yZCIsImNvbW1hbmRUaW1lb3V0cyIsInVybCIsInByb3RvY29sIiwiaG9zdCIsInBlcm1zIiwiYXV0b0xhdW5jaCIsImlvc0luc3RhbGxQYXVzZSIsInBhdXNlIiwiQiIsImRlbGF5IiwiaW5jbHVkZXMiLCJjdXJPcmllbnRhdGlvbiIsIl9nZXRDb21tYW5kVGltZW91dCIsImNtZE5hbWUiLCJERUZBVUxUX1RJTUVPVVRfS0VZIiwiZ2V0U2Vzc2lvbiIsImRyaXZlclNlc3Npb24iLCJ3ZGFDYXBzIiwiZGV2aWNlQ2FwcyIsImdldFNjcmVlbkluZm8iLCJzdGF0dXNCYXJTaXplIiwic2NhbGUiLCJwaXhlbFJhdGlvIiwic3RhdEJhckhlaWdodCIsImhlaWdodCIsInZpZXdwb3J0UmVjdCIsImdldFZpZXdwb3J0UmVjdCIsImNhcGFiaWxpdGllcyIsIklXRFAiLCJ3ZWJraXREZWJ1Z1Byb3h5UG9ydCIsInJlc2V0IiwiY2xvbmVEZWVwIiwic2h1dGRvd25IYW5kbGVyIiwicmVzZXRPblVuZXhwZWN0ZWRTaHV0ZG93biIsInByb3RvdHlwZSIsImNvbW1hbmRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7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QWxCO0FBQ0EsWUFBTSxPQUFJLENBQUNpRixVQUFMLENBQWdCckYsS0FBaEIsRUFBTjs7QUFDQSxNQUFBLE9BQUksQ0FBQzhCLFFBQUwsQ0FBYyxhQUFkO0FBSmlCO0FBS2xCOztBQUVLZ0csRUFBQUEsUUFBTixHQUFrQjtBQUFBOztBQUFBO0FBQ2hCLFVBQUksT0FBSSxDQUFDekMsVUFBVCxFQUFxQjtBQUNuQixjQUFNLE9BQUksQ0FBQ0EsVUFBTCxDQUFnQjRCLElBQWhCLEVBQU47QUFDQSxlQUFPLE9BQUksQ0FBQzVCLFVBQVo7QUFDRDtBQUplO0FBS2pCOztBQUVLNkksRUFBQUEsS0FBTixHQUFlO0FBQUE7QUFBQTs7QUFBQTtBQUNiLFVBQUksT0FBSSxDQUFDL1EsSUFBTCxDQUFVOEQsT0FBZCxFQUF1QjtBQUVyQixZQUFJOUQsSUFBSSxHQUFHVyxnQkFBRXFRLFNBQUYsQ0FBWSxPQUFJLENBQUNoUixJQUFqQixDQUFYOztBQUNBQSxRQUFBQSxJQUFJLENBQUM4RCxPQUFMLEdBQWUsS0FBZjtBQUNBOUQsUUFBQUEsSUFBSSxDQUFDK0QsU0FBTCxHQUFpQixLQUFqQjtBQUNBLGNBQU1rTixlQUFlLEdBQUcsT0FBSSxDQUFDQyx5QkFBN0I7O0FBQ0EsUUFBQSxPQUFJLENBQUNBLHlCQUFMLEdBQWlDLE1BQU0sQ0FBRSxDQUF6Qzs7QUFDQSxZQUFJO0FBQ0YsZ0JBQU0sT0FBSSxDQUFDbkwsUUFBTCxDQUFjL0YsSUFBZCxDQUFOO0FBQ0QsU0FGRCxTQUVVO0FBQ1IsVUFBQSxPQUFJLENBQUNrUix5QkFBTCxHQUFpQ0QsZUFBakM7QUFDRDtBQUNGOztBQUNELFlBQU0sc0JBQU47QUFkYTtBQWVkOztBQXIvQnFDOzs7QUF3L0J4Q25PLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjbEQsY0FBYyxDQUFDc1IsU0FBN0IsRUFBd0NDLGNBQXhDO2VBRWV2UixjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZURyaXZlciwgRGV2aWNlU2V0dGluZ3MgfSBmcm9tICdhcHBpdW0tYmFzZS1kcml2ZXInO1xuaW1wb3J0IHsgdXRpbCwgZnMsIG1qcGVnIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB1cmwgZnJvbSAndXJsJztcbmltcG9ydCB7IGxhdW5jaCB9IGZyb20gJ25vZGUtc2ltY3RsJztcbmltcG9ydCBXZWJEcml2ZXJBZ2VudCBmcm9tICcuL3dkYS93ZWJkcml2ZXJhZ2VudCc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZVNpbSwgZ2V0RXhpc3RpbmdTaW0sIHJ1blNpbXVsYXRvclJlc2V0LCBpbnN0YWxsVG9TaW11bGF0b3IsXG4gICAgICAgICBzaHV0ZG93bk90aGVyU2ltdWxhdG9ycywgc2h1dGRvd25TaW11bGF0b3IgfSBmcm9tICcuL3NpbXVsYXRvci1tYW5hZ2VtZW50JztcbmltcG9ydCB7IHNpbUV4aXN0cywgZ2V0U2ltdWxhdG9yLCBpbnN0YWxsU1NMQ2VydCwgaGFzU1NMQ2VydCB9IGZyb20gJ2FwcGl1bS1pb3Mtc2ltdWxhdG9yJztcbmltcG9ydCB7IHJldHJ5SW50ZXJ2YWwsIHJldHJ5IH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHsgc2V0dGluZ3MgYXMgaW9zU2V0dGluZ3MsIGRlZmF1bHRTZXJ2ZXJDYXBzLCBhcHBVdGlscywgSVdEUCB9IGZyb20gJ2FwcGl1bS1pb3MtZHJpdmVyJztcbmltcG9ydCBkZXNpcmVkQ2FwQ29uc3RyYWludHMgZnJvbSAnLi9kZXNpcmVkLWNhcHMnO1xuaW1wb3J0IGNvbW1hbmRzIGZyb20gJy4vY29tbWFuZHMvaW5kZXgnO1xuaW1wb3J0IHsgZGV0ZWN0VWRpZCwgZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24sIGdldEFuZENoZWNrSW9zU2RrVmVyc2lvbixcbiAgICAgICAgIGFkanVzdFdEQUF0dGFjaG1lbnRzUGVybWlzc2lvbnMsIGNoZWNrQXBwUHJlc2VudCwgZ2V0RHJpdmVySW5mbyxcbiAgICAgICAgIGNsZWFyU3lzdGVtRmlsZXMsIHRyYW5zbGF0ZURldmljZU5hbWUsIG5vcm1hbGl6ZUNvbW1hbmRUaW1lb3V0cyxcbiAgICAgICAgIERFRkFVTFRfVElNRU9VVF9LRVksIG1hcmtTeXN0ZW1GaWxlc0ZvckNsZWFudXAsXG4gICAgICAgICBwcmludFVzZXIsIHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycywgdmVyaWZ5QXBwbGljYXRpb25QbGF0Zm9ybSB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29ubmVjdGVkRGV2aWNlcywgcnVuUmVhbERldmljZVJlc2V0LCBpbnN0YWxsVG9SZWFsRGV2aWNlLFxuICAgICAgICAgZ2V0UmVhbERldmljZU9iaiB9IGZyb20gJy4vcmVhbC1kZXZpY2UtbWFuYWdlbWVudCc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgQXN5bmNMb2NrIGZyb20gJ2FzeW5jLWxvY2snO1xuXG5cbmNvbnN0IFNBRkFSSV9CVU5ETEVfSUQgPSAnY29tLmFwcGxlLm1vYmlsZXNhZmFyaSc7XG5jb25zdCBXREFfU0lNX1NUQVJUVVBfUkVUUklFUyA9IDI7XG5jb25zdCBXREFfUkVBTF9ERVZfU1RBUlRVUF9SRVRSSUVTID0gMTtcbmNvbnN0IFdEQV9SRUFMX0RFVl9UVVRPUklBTF9VUkwgPSAnaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0teGN1aXRlc3QtZHJpdmVyL2Jsb2IvbWFzdGVyL2RvY3MvcmVhbC1kZXZpY2UtY29uZmlnLm1kJztcbmNvbnN0IFdEQV9TVEFSVFVQX1JFVFJZX0lOVEVSVkFMID0gMTAwMDA7XG5jb25zdCBERUZBVUxUX1NFVFRJTkdTID0ge1xuICBuYXRpdmVXZWJUYXA6IGZhbHNlLFxuICB1c2VKU09OU291cmNlOiBmYWxzZSxcbiAgc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlczogdHJ1ZSxcbiAgZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlczogXCJ0eXBlLGxhYmVsXCIsXG4gIG1qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHk6IDI1LCAvLyBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL1dlYkRyaXZlckFnZW50L2Jsb2IvbWFzdGVyL1dlYkRyaXZlckFnZW50TGliL1V0aWxpdGllcy9GQkNvbmZpZ3VyYXRpb24ubSNMMjlcbiAgbWpwZWdTZXJ2ZXJGcmFtZXJhdGU6IDEwIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vV2ViRHJpdmVyQWdlbnQvYmxvYi9tYXN0ZXIvV2ViRHJpdmVyQWdlbnRMaWIvVXRpbGl0aWVzL0ZCQ29uZmlndXJhdGlvbi5tI0wzMFxufTtcbi8vIFRoaXMgbG9jayBhc3N1cmVzLCB0aGF0IGVhY2ggZHJpdmVyIHNlc3Npb24gZG9lcyBub3Rcbi8vIGFmZmVjdCBzaGFyZWQgcmVzb3VyY2VzIG9mIHRoZSBvdGhlciBwYXJhbGxlbCBzZXNzaW9uc1xuY29uc3QgU0hBUkVEX1JFU09VUkNFU19HVUFSRCA9IG5ldyBBc3luY0xvY2soKTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cbmNvbnN0IE5PX1BST1hZX05BVElWRV9MSVNUID0gW1xuICBbJ0RFTEVURScsIC93aW5kb3cvXSxcbiAgWydHRVQnLCAvXlxcL3Nlc3Npb25cXC9bXlxcL10rJC9dLFxuICBbJ0dFVCcsIC9hbGVydF90ZXh0L10sXG4gIFsnR0VUJywgL2FsZXJ0XFwvW15cXC9dKy9dLFxuICBbJ0dFVCcsIC9hcHBpdW0vXSxcbiAgWydHRVQnLCAvYXR0cmlidXRlL10sXG4gIFsnR0VUJywgL2NvbnRleHQvXSxcbiAgWydHRVQnLCAvbG9jYXRpb24vXSxcbiAgWydHRVQnLCAvbG9nL10sXG4gIFsnR0VUJywgL3NjcmVlbnNob3QvXSxcbiAgWydHRVQnLCAvc2l6ZS9dLFxuICBbJ0dFVCcsIC9zb3VyY2UvXSxcbiAgWydHRVQnLCAvdXJsL10sXG4gIFsnR0VUJywgL3dpbmRvdy9dLFxuICBbJ1BPU1QnLCAvYWNjZXB0X2FsZXJ0L10sXG4gIFsnUE9TVCcsIC9hY3Rpb25zJC9dLFxuICBbJ1BPU1QnLCAvYWxlcnRfdGV4dC9dLFxuICBbJ1BPU1QnLCAvYWxlcnRcXC9bXlxcL10rL10sXG4gIFsnUE9TVCcsIC9hcHBpdW0vXSxcbiAgWydQT1NUJywgL2FwcGl1bVxcL2RldmljZVxcL2lzX2xvY2tlZC9dLFxuICBbJ1BPU1QnLCAvYXBwaXVtXFwvZGV2aWNlXFwvbG9jay9dLFxuICBbJ1BPU1QnLCAvYXBwaXVtXFwvZGV2aWNlXFwvdW5sb2NrL10sXG4gIFsnUE9TVCcsIC9iYWNrL10sXG4gIFsnUE9TVCcsIC9jbGVhci9dLFxuICBbJ1BPU1QnLCAvY29udGV4dC9dLFxuICBbJ1BPU1QnLCAvZGlzbWlzc19hbGVydC9dLFxuICBbJ1BPU1QnLCAvZWxlbWVudCQvXSxcbiAgWydQT1NUJywgL2VsZW1lbnRzJC9dLFxuICBbJ1BPU1QnLCAvZXhlY3V0ZS9dLFxuICBbJ1BPU1QnLCAva2V5cy9dLFxuICBbJ1BPU1QnLCAvbG9nL10sXG4gIFsnUE9TVCcsIC9tb3ZldG8vXSxcbiAgWydQT1NUJywgL3JlY2VpdmVfYXN5bmNfcmVzcG9uc2UvXSwgLy8gYWx3YXlzLCBpbiBjYXNlIGNvbnRleHQgc3dpdGNoZXMgd2hpbGUgd2FpdGluZ1xuICBbJ1BPU1QnLCAvc2Vzc2lvblxcL1teXFwvXStcXC9sb2NhdGlvbi9dLCAvLyBnZW8gbG9jYXRpb24sIGJ1dCBub3QgZWxlbWVudCBsb2NhdGlvblxuICBbJ1BPU1QnLCAvc2hha2UvXSxcbiAgWydQT1NUJywgL3RpbWVvdXRzL10sXG4gIFsnUE9TVCcsIC90b3VjaC9dLFxuICBbJ1BPU1QnLCAvdXJsL10sXG4gIFsnUE9TVCcsIC92YWx1ZS9dLFxuICBbJ1BPU1QnLCAvd2luZG93L10sXG5dO1xuY29uc3QgTk9fUFJPWFlfV0VCX0xJU1QgPSBbXG4gIFsnREVMRVRFJywgL2Nvb2tpZS9dLFxuICBbJ0dFVCcsIC9hdHRyaWJ1dGUvXSxcbiAgWydHRVQnLCAvY29va2llL10sXG4gIFsnR0VUJywgL2VsZW1lbnQvXSxcbiAgWydHRVQnLCAvdGV4dC9dLFxuICBbJ0dFVCcsIC90aXRsZS9dLFxuICBbJ1BPU1QnLCAvY2xlYXIvXSxcbiAgWydQT1NUJywgL2NsaWNrL10sXG4gIFsnUE9TVCcsIC9jb29raWUvXSxcbiAgWydQT1NUJywgL2VsZW1lbnQvXSxcbiAgWydQT1NUJywgL2ZvcndhcmQvXSxcbiAgWydQT1NUJywgL2ZyYW1lL10sXG4gIFsnUE9TVCcsIC9rZXlzL10sXG4gIFsnUE9TVCcsIC9yZWZyZXNoL10sXG5dLmNvbmNhdChOT19QUk9YWV9OQVRJVkVfTElTVCk7XG4vKiBlc2xpbnQtZW5hYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXG5cbmNvbnN0IE1FTU9JWkVEX0ZVTkNUSU9OUyA9IFtcbiAgJ2dldFdpbmRvd1NpemVOYXRpdmUnLFxuICAnZ2V0V2luZG93U2l6ZVdlYicsXG4gICdnZXRTdGF0dXNCYXJIZWlnaHQnLFxuICAnZ2V0RGV2aWNlUGl4ZWxSYXRpbycsXG4gICdnZXRTY3JlZW5JbmZvJyxcbiAgJ2dldFNhZmFyaUlzSXBob25lJyxcbiAgJ2dldFNhZmFyaUlzSXBob25lWCcsXG5dO1xuXG5jbGFzcyBYQ1VJVGVzdERyaXZlciBleHRlbmRzIEJhc2VEcml2ZXIge1xuICBjb25zdHJ1Y3RvciAob3B0cyA9IHt9LCBzaG91bGRWYWxpZGF0ZUNhcHMgPSB0cnVlKSB7XG4gICAgc3VwZXIob3B0cywgc2hvdWxkVmFsaWRhdGVDYXBzKTtcblxuICAgIHRoaXMuZGVzaXJlZENhcENvbnN0cmFpbnRzID0gZGVzaXJlZENhcENvbnN0cmFpbnRzO1xuXG4gICAgdGhpcy5sb2NhdG9yU3RyYXRlZ2llcyA9IFtcbiAgICAgICd4cGF0aCcsXG4gICAgICAnaWQnLFxuICAgICAgJ25hbWUnLFxuICAgICAgJ2NsYXNzIG5hbWUnLFxuICAgICAgJy1pb3MgcHJlZGljYXRlIHN0cmluZycsXG4gICAgICAnLWlvcyBjbGFzcyBjaGFpbicsXG4gICAgICAnYWNjZXNzaWJpbGl0eSBpZCdcbiAgICBdO1xuICAgIHRoaXMud2ViTG9jYXRvclN0cmF0ZWdpZXMgPSBbXG4gICAgICAnbGluayB0ZXh0JyxcbiAgICAgICdjc3Mgc2VsZWN0b3InLFxuICAgICAgJ3RhZyBuYW1lJyxcbiAgICAgICdsaW5rIHRleHQnLFxuICAgICAgJ3BhcnRpYWwgbGluayB0ZXh0J1xuICAgIF07XG4gICAgdGhpcy5yZXNldElvcygpO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgRGV2aWNlU2V0dGluZ3MoREVGQVVMVF9TRVRUSU5HUywgdGhpcy5vblNldHRpbmdzVXBkYXRlLmJpbmQodGhpcykpO1xuXG4gICAgLy8gbWVtb2l6ZSBmdW5jdGlvbnMgaGVyZSwgc28gdGhhdCB0aGV5IGFyZSBkb25lIG9uIGEgcGVyLWluc3RhbmNlIGJhc2lzXG4gICAgZm9yIChjb25zdCBmbiBvZiBNRU1PSVpFRF9GVU5DVElPTlMpIHtcbiAgICAgIHRoaXNbZm5dID0gXy5tZW1vaXplKHRoaXNbZm5dKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvblNldHRpbmdzVXBkYXRlIChrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSAhPT0gJ25hdGl2ZVdlYlRhcCcpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL2FwcGl1bS9zZXR0aW5ncycsICdQT1NUJywge1xuICAgICAgICBzZXR0aW5nczoge1trZXldOiB2YWx1ZX1cbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLm9wdHMubmF0aXZlV2ViVGFwID0gISF2YWx1ZTtcbiAgfVxuXG4gIHJlc2V0SW9zICgpIHtcbiAgICB0aGlzLm9wdHMgPSB0aGlzLm9wdHMgfHwge307XG4gICAgdGhpcy53ZGEgPSBudWxsO1xuICAgIHRoaXMub3B0cy5kZXZpY2UgPSBudWxsO1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb3h5UmVxUmVzID0gbnVsbDtcbiAgICB0aGlzLmp3cFByb3h5QXZvaWQgPSBbXTtcbiAgICB0aGlzLnNhZmFyaSA9IGZhbHNlO1xuICAgIHRoaXMuY2FjaGVkV2RhU3RhdHVzID0gbnVsbDtcblxuICAgIC8vIHNvbWUgdGhpbmdzIHRoYXQgY29tbWFuZHMgaW1wb3J0ZWQgZnJvbSBhcHBpdW0taW9zLWRyaXZlciBuZWVkXG4gICAgdGhpcy5jdXJXZWJGcmFtZXMgPSBbXTtcbiAgICB0aGlzLndlYkVsZW1lbnRJZHMgPSBbXTtcbiAgICB0aGlzLl9jdXJyZW50VXJsID0gbnVsbDtcbiAgICB0aGlzLmN1ckNvbnRleHQgPSBudWxsO1xuICAgIHRoaXMueGNvZGVWZXJzaW9uID0ge307XG4gICAgdGhpcy5pb3NTZGtWZXJzaW9uID0gbnVsbDtcbiAgICB0aGlzLmNvbnRleHRzID0gW107XG4gICAgdGhpcy5pbXBsaWNpdFdhaXRNcyA9IDA7XG4gICAgdGhpcy5hc3luY2xpYldhaXRNcyA9IDA7XG4gICAgdGhpcy5wYWdlTG9hZE1zID0gNjAwMDtcbiAgICB0aGlzLmxhbmRzY2FwZVdlYkNvb3Jkc09mZnNldCA9IDA7XG4gIH1cblxuICBnZXQgZHJpdmVyRGF0YSAoKSB7XG4gICAgLy8gVE9ETyBmaWxsIG91dCByZXNvdXJjZSBpbmZvIGhlcmVcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyBnZXRTdGF0dXMgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kcml2ZXJJbmZvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kcml2ZXJJbmZvID0gYXdhaXQgZ2V0RHJpdmVySW5mbygpO1xuICAgIH1cbiAgICBsZXQgc3RhdHVzID0ge2J1aWxkOiB7dmVyc2lvbjogdGhpcy5kcml2ZXJJbmZvLnZlcnNpb259fTtcbiAgICBpZiAodGhpcy5jYWNoZWRXZGFTdGF0dXMpIHtcbiAgICAgIHN0YXR1cy53ZGEgPSB0aGlzLmNhY2hlZFdkYVN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXR1cztcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNlc3Npb24gKC4uLmFyZ3MpIHtcbiAgICB0aGlzLmxpZmVjeWNsZURhdGEgPSB7fTsgLy8gdGhpcyBpcyB1c2VkIGZvciBrZWVwaW5nIHRyYWNrIG9mIHRoZSBzdGF0ZSB3ZSBzdGFydCBzbyB3aGVuIHdlIGRlbGV0ZSB0aGUgc2Vzc2lvbiB3ZSBjYW4gcHV0IHRoaW5ncyBiYWNrXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRPRE8gYWRkIHZhbGlkYXRpb24gb24gY2Fwc1xuICAgICAgbGV0IFtzZXNzaW9uSWQsIGNhcHNdID0gYXdhaXQgc3VwZXIuY3JlYXRlU2Vzc2lvbiguLi5hcmdzKTtcbiAgICAgIHRoaXMub3B0cy5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKTtcblxuICAgICAgLy8gbWVyZ2Ugc2VydmVyIGNhcGFiaWxpdGllcyArIGRlc2lyZWQgY2FwYWJpbGl0aWVzXG4gICAgICBjYXBzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNlcnZlckNhcHMsIGNhcHMpO1xuICAgICAgLy8gdXBkYXRlIHRoZSB1ZGlkIHdpdGggd2hhdCBpcyBhY3R1YWxseSB1c2VkXG4gICAgICBjYXBzLnVkaWQgPSB0aGlzLm9wdHMudWRpZDtcbiAgICAgIC8vIGVuc3VyZSB3ZSB0cmFjayBuYXRpdmVXZWJUYXAgY2FwYWJpbGl0eSBhcyBhIHNldHRpbmcgYXMgd2VsbFxuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywgJ25hdGl2ZVdlYlRhcCcpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZ3Moe25hdGl2ZVdlYlRhcDogdGhpcy5vcHRzLm5hdGl2ZVdlYlRhcH0pO1xuICAgICAgfVxuICAgICAgLy8gZW5zdXJlIHdlIHRyYWNrIHVzZUpTT05Tb3VyY2UgY2FwYWJpbGl0eSBhcyBhIHNldHRpbmcgYXMgd2VsbFxuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywgJ3VzZUpTT05Tb3VyY2UnKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmdzKHt1c2VKU09OU291cmNlOiB0aGlzLm9wdHMudXNlSlNPTlNvdXJjZX0pO1xuICAgICAgfVxuXG4gICAgICBsZXQgd2RhU2V0dGluZ3MgPSB7XG4gICAgICAgIGVsZW1lbnRSZXNwb25zZUF0dHJpYnV0ZXM6IERFRkFVTFRfU0VUVElOR1MuZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcyxcbiAgICAgICAgc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlczogREVGQVVMVF9TRVRUSU5HUy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzLFxuICAgICAgICBtanBlZ1NlcnZlclNjcmVlbnNob3RRdWFsaXR5OiBERUZBVUxUX1NFVFRJTkdTLm1qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHksXG4gICAgICAgIG1qcGVnU2VydmVyRnJhbWVyYXRlOiBERUZBVUxUX1NFVFRJTkdTLm1qcGVnU2VydmVyRnJhbWVyYXRlLFxuICAgICAgfTtcbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdlbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzJykpIHtcbiAgICAgICAgd2RhU2V0dGluZ3MuZWxlbWVudFJlc3BvbnNlQXR0cmlidXRlcyA9IHRoaXMub3B0cy5lbGVtZW50UmVzcG9uc2VBdHRyaWJ1dGVzO1xuICAgICAgfVxuICAgICAgaWYgKF8uaGFzKHRoaXMub3B0cywgJ3Nob3VsZFVzZUNvbXBhY3RSZXNwb25zZXMnKSkge1xuICAgICAgICB3ZGFTZXR0aW5ncy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzID0gdGhpcy5vcHRzLnNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXM7XG4gICAgICB9XG4gICAgICBpZiAoXy5oYXModGhpcy5vcHRzLCAnbWpwZWdTZXJ2ZXJTY3JlZW5zaG90UXVhbGl0eScpKSB7XG4gICAgICAgIHdkYVNldHRpbmdzLm1qcGVnU2VydmVyU2NyZWVuc2hvdFF1YWxpdHkgPSB0aGlzLm9wdHMubWpwZWdTZXJ2ZXJTY3JlZW5zaG90UXVhbGl0eTtcbiAgICAgIH1cbiAgICAgIGlmIChfLmhhcyh0aGlzLm9wdHMsICdtanBlZ1NlcnZlckZyYW1lcmF0ZScpKSB7XG4gICAgICAgIHdkYVNldHRpbmdzLm1qcGVnU2VydmVyRnJhbWVyYXRlID0gdGhpcy5vcHRzLm1qcGVnU2VydmVyRnJhbWVyYXRlO1xuICAgICAgfVxuICAgICAgLy8gZW5zdXJlIFdEQSBnZXRzIG91ciBkZWZhdWx0cyBpbnN0ZWFkIG9mIHdoYXRldmVyIGl0cyBvd24gbWlnaHQgYmVcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZ3Mod2RhU2V0dGluZ3MpO1xuXG4gICAgICAvLyB0dXJuIG9uIG1qcGVnIHN0cmVhbSByZWFkaW5nIGlmIHJlcXVlc3RlZFxuICAgICAgaWYgKHRoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmwpIHtcbiAgICAgICAgbG9nLmluZm8oYFN0YXJ0aW5nIE1KUEVHIHN0cmVhbSByZWFkaW5nIFVSTDogJyR7dGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybH0nYCk7XG4gICAgICAgIHRoaXMubWpwZWdTdHJlYW0gPSBuZXcgbWpwZWcuTUpwZWdTdHJlYW0odGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybCk7XG4gICAgICAgIGF3YWl0IHRoaXMubWpwZWdTdHJlYW0uc3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbc2Vzc2lvbklkLCBjYXBzXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2cuZXJyb3IoZSk7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZVNlc3Npb24oKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCkge1xuICAgIHRoaXMub3B0cy5ub1Jlc2V0ID0gISF0aGlzLm9wdHMubm9SZXNldDtcbiAgICB0aGlzLm9wdHMuZnVsbFJlc2V0ID0gISF0aGlzLm9wdHMuZnVsbFJlc2V0O1xuXG4gICAgYXdhaXQgcHJpbnRVc2VyKCk7XG5cbiAgICBpZiAodGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiAmJiBwYXJzZUZsb2F0KHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24pIDwgOS4zKSB7XG4gICAgICB0aHJvdyBFcnJvcihgUGxhdGZvcm0gdmVyc2lvbiBtdXN0IGJlIDkuMyBvciBhYm92ZS4gJyR7dGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbn0nIGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgfVxuXG4gICAgY29uc3Qge2RldmljZSwgdWRpZCwgcmVhbERldmljZX0gPSBhd2FpdCB0aGlzLmRldGVybWluZURldmljZSgpO1xuICAgIGxvZy5pbmZvKGBEZXRlcm1pbmluZyBkZXZpY2UgdG8gcnVuIHRlc3RzIG9uOiB1ZGlkOiAnJHt1ZGlkfScsIHJlYWwgZGV2aWNlOiAke3JlYWxEZXZpY2V9YCk7XG4gICAgdGhpcy5vcHRzLmRldmljZSA9IGRldmljZTtcbiAgICB0aGlzLm9wdHMudWRpZCA9IHVkaWQ7XG4gICAgdGhpcy5vcHRzLnJlYWxEZXZpY2UgPSByZWFsRGV2aWNlO1xuXG4gICAgaWYgKF8uaXNFbXB0eSh0aGlzLnhjb2RlVmVyc2lvbikgJiYgKCF0aGlzLm9wdHMud2ViRHJpdmVyQWdlbnRVcmwgfHwgIXRoaXMub3B0cy5yZWFsRGV2aWNlKSkge1xuICAgICAgLy8gbm8gYHdlYkRyaXZlckFnZW50VXJsYCwgb3Igb24gYSBzaW11bGF0b3IsIHNvIHdlIG5lZWQgYW4gWGNvZGUgdmVyc2lvblxuICAgICAgdGhpcy54Y29kZVZlcnNpb24gPSBhd2FpdCBnZXRBbmRDaGVja1hjb2RlVmVyc2lvbigpO1xuICAgICAgY29uc3QgdG9vbHMgPSAhdGhpcy54Y29kZVZlcnNpb24udG9vbHNWZXJzaW9uID8gJycgOiBgKHRvb2xzIHYke3RoaXMueGNvZGVWZXJzaW9uLnRvb2xzVmVyc2lvbn0pYDtcbiAgICAgIGxvZy5kZWJ1ZyhgWGNvZGUgdmVyc2lvbiBzZXQgdG8gJyR7dGhpcy54Y29kZVZlcnNpb24udmVyc2lvblN0cmluZ30nICR7dG9vbHN9YCk7XG5cbiAgICAgIHRoaXMuaW9zU2RrVmVyc2lvbiA9IGF3YWl0IGdldEFuZENoZWNrSW9zU2RrVmVyc2lvbigpO1xuICAgICAgbG9nLmRlYnVnKGBpT1MgU0RLIFZlcnNpb24gc2V0IHRvICcke3RoaXMuaW9zU2RrVmVyc2lvbn0nYCk7XG4gICAgfVxuICAgIHRoaXMubG9nRXZlbnQoJ3hjb2RlRGV0YWlsc1JldHJpZXZlZCcpO1xuXG4gICAgaWYgKHRoaXMub3B0cy5lbmFibGVBc3luY0V4ZWN1dGVGcm9tSHR0cHMgJiYgIXRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgIC8vIHNodXRkb3duIHRoZSBzaW11bGF0b3Igc28gdGhhdCB0aGUgc3NsIGNlcnQgaXMgcmVjb2duaXplZFxuICAgICAgYXdhaXQgc2h1dGRvd25TaW11bGF0b3IodGhpcy5vcHRzLmRldmljZSk7XG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0SHR0cHNBc3luY1NlcnZlcigpO1xuICAgIH1cblxuICAgIC8vIGF0IHRoaXMgcG9pbnQgaWYgdGhlcmUgaXMgbm8gcGxhdGZvcm1WZXJzaW9uLCBnZXQgaXQgZnJvbSB0aGUgZGV2aWNlXG4gICAgaWYgKCF0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLmRldmljZSAmJiBfLmlzRnVuY3Rpb24odGhpcy5vcHRzLmRldmljZS5nZXRQbGF0Zm9ybVZlcnNpb24pKSB7XG4gICAgICAgIHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24gPSBhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLmdldFBsYXRmb3JtVmVyc2lvbigpO1xuICAgICAgICBsb2cuaW5mbyhgTm8gcGxhdGZvcm1WZXJzaW9uIHNwZWNpZmllZC4gVXNpbmcgZGV2aWNlIHZlcnNpb246ICcke3RoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb259J2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzogdGhpcyBpcyB3aGVuIGl0IGlzIGEgcmVhbCBkZXZpY2UuIHdoZW4gd2UgaGF2ZSBhIHJlYWwgb2JqZWN0IHdpcmUgaXQgaW5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0cy53ZWJEcml2ZXJBZ2VudFVybCAmJiB0aGlzLmlvc1Nka1ZlcnNpb24pIHtcbiAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSB4Y29kZSB3ZSBhcmUgdXNpbmcgY2FuIGhhbmRsZSB0aGUgcGxhdGZvcm1cbiAgICAgIGlmIChwYXJzZUZsb2F0KHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24pID4gcGFyc2VGbG9hdCh0aGlzLmlvc1Nka1ZlcnNpb24pKSB7XG4gICAgICAgIGxldCBtc2cgPSBgWGNvZGUgJHt0aGlzLnhjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nfSBoYXMgYSBtYXhpbXVtIFNESyB2ZXJzaW9uIG9mICR7dGhpcy5pb3NTZGtWZXJzaW9ufS4gYCArXG4gICAgICAgICAgICAgICAgICBgSXQgZG9lcyBub3Qgc3VwcG9ydCBpT1MgdmVyc2lvbiAke3RoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb259YDtcbiAgICAgICAgbG9nLmVycm9yQW5kVGhyb3cobXNnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLmRlYnVnKCdYY29kZSB2ZXJzaW9uIHdpbGwgbm90IGJlIHZhbGlkYXRlZCBhZ2FpbnN0IGlPUyBTREsgdmVyc2lvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAoKHRoaXMub3B0cy5icm93c2VyTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gJ3NhZmFyaScpIHtcbiAgICAgIGxvZy5pbmZvKCdTYWZhcmkgdGVzdCByZXF1ZXN0ZWQnKTtcbiAgICAgIHRoaXMuc2FmYXJpID0gdHJ1ZTtcbiAgICAgIHRoaXMub3B0cy5hcHAgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9wdHMucHJvY2Vzc0FyZ3VtZW50cyA9IHRoaXMub3B0cy5wcm9jZXNzQXJndW1lbnRzIHx8IHt9O1xuICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gU0FGQVJJX0JVTkRMRV9JRDtcbiAgICAgIHRoaXMuX2N1cnJlbnRVcmwgPSB0aGlzLm9wdHMuc2FmYXJpSW5pdGlhbFVybCB8fCAoXG4gICAgICAgIHRoaXMuaXNSZWFsRGV2aWNlKClcbiAgICAgICAgICA/ICdodHRwOi8vYXBwaXVtLmlvJ1xuICAgICAgICAgIDogYGh0dHA6Ly8ke3RoaXMub3B0cy5hZGRyZXNzfToke3RoaXMub3B0cy5wb3J0fS93ZWxjb21lYFxuICAgICAgKTtcbiAgICAgIHRoaXMub3B0cy5wcm9jZXNzQXJndW1lbnRzLmFyZ3MgPSBbJy11JywgdGhpcy5fY3VycmVudFVybF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuY29uZmlndXJlQXBwKCk7XG4gICAgfVxuICAgIHRoaXMubG9nRXZlbnQoJ2FwcENvbmZpZ3VyZWQnKTtcblxuICAgIC8vIGZhaWwgdmVyeSBlYXJseSBpZiB0aGUgYXBwIGRvZXNuJ3QgYWN0dWFsbHkgZXhpc3RcbiAgICAvLyBvciBpZiBidW5kbGUgaWQgZG9lc24ndCBwb2ludCB0byBhbiBpbnN0YWxsZWQgYXBwXG4gICAgaWYgKHRoaXMub3B0cy5hcHApIHtcbiAgICAgIGF3YWl0IGNoZWNrQXBwUHJlc2VudCh0aGlzLm9wdHMuYXBwKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gYXdhaXQgYXBwVXRpbHMuZXh0cmFjdEJ1bmRsZUlkKHRoaXMub3B0cy5hcHApO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucnVuUmVzZXQoKTtcblxuICAgIGNvbnN0IHN0YXJ0TG9nQ2FwdHVyZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc3RhcnRMb2dDYXB0dXJlKCk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMubG9nRXZlbnQoJ2xvZ0NhcHR1cmVTdGFydGVkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgY29uc3QgaXNMb2dDYXB0dXJlU3RhcnRlZCA9IGF3YWl0IHN0YXJ0TG9nQ2FwdHVyZSgpO1xuXG4gICAgbG9nLmluZm8oYFNldHRpbmcgdXAgJHt0aGlzLmlzUmVhbERldmljZSgpID8gJ3JlYWwgZGV2aWNlJyA6ICdzaW11bGF0b3InfWApO1xuXG4gICAgaWYgKHRoaXMuaXNTaW11bGF0b3IoKSkge1xuICAgICAgaWYgKHRoaXMub3B0cy5zaHV0ZG93bk90aGVyU2ltdWxhdG9ycykge1xuICAgICAgICBpZiAoIXRoaXMucmVsYXhlZFNlY3VyaXR5RW5hYmxlZCkge1xuICAgICAgICAgIGxvZy5lcnJvckFuZFRocm93KGBBcHBpdW0gc2VydmVyIG11c3QgaGF2ZSByZWxheGVkIHNlY3VyaXR5IGZsYWcgc2V0IGluIG9yZGVyIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBmb3IgJ3NodXRkb3duT3RoZXJTaW11bGF0b3JzJyBjYXBhYmlsaXR5IHRvIHdvcmtgKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzaHV0ZG93bk90aGVyU2ltdWxhdG9ycyh0aGlzLm9wdHMuZGV2aWNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHJlZHVjZU1vdGlvbiBpZiBjYXBhYmlsaXR5IGlzIHNldFxuICAgICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnJlZHVjZU1vdGlvbikpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5zZXRSZWR1Y2VNb3Rpb24odGhpcy5vcHRzLnJlZHVjZU1vdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9jYWxDb25maWcgPSBhd2FpdCBpb3NTZXR0aW5ncy5zZXRMb2NhbGVBbmRQcmVmZXJlbmNlcyh0aGlzLm9wdHMuZGV2aWNlLCB0aGlzLm9wdHMsIHRoaXMuaXNTYWZhcmkoKSwgYXN5bmMgKHNpbSkgPT4ge1xuICAgICAgICBhd2FpdCBzaHV0ZG93blNpbXVsYXRvcihzaW0pO1xuXG4gICAgICAgIC8vIHdlIGRvbid0IGtub3cgaWYgdGhlcmUgbmVlZHMgdG8gYmUgY2hhbmdlcyBhIHByaW9yaSwgc28gY2hhbmdlIGZpcnN0LlxuICAgICAgICAvLyBzb21ldGltZXMgdGhlIHNodXRkb3duIHByb2Nlc3MgY2hhbmdlcyB0aGUgc2V0dGluZ3MsIHNvIHJlc2V0IHRoZW0sXG4gICAgICAgIC8vIGtub3dpbmcgdGhhdCB0aGUgc2ltIGlzIGFscmVhZHkgc2h1dFxuICAgICAgICBhd2FpdCBpb3NTZXR0aW5ncy5zZXRMb2NhbGVBbmRQcmVmZXJlbmNlcyhzaW0sIHRoaXMub3B0cywgdGhpcy5pc1NhZmFyaSgpKTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0U2ltKCk7XG5cbiAgICAgIGlmICh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCkge1xuICAgICAgICBpZiAoYXdhaXQgaGFzU1NMQ2VydCh0aGlzLm9wdHMuY3VzdG9tU1NMQ2VydCwgdGhpcy5vcHRzLnVkaWQpKSB7XG4gICAgICAgICAgbG9nLmluZm8oYFNTTCBjZXJ0ICcke18udHJ1bmNhdGUodGhpcy5vcHRzLmN1c3RvbVNTTENlcnQsIHtsZW5ndGg6IDIwfSl9JyBhbHJlYWR5IGluc3RhbGxlZGApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZy5pbmZvKGBJbnN0YWxsaW5nIHNzbCBjZXJ0ICcke18udHJ1bmNhdGUodGhpcy5vcHRzLmN1c3RvbVNTTENlcnQsIHtsZW5ndGg6IDIwfSl9J2ApO1xuICAgICAgICAgIGF3YWl0IHNodXRkb3duU2ltdWxhdG9yKHRoaXMub3B0cy5kZXZpY2UpO1xuICAgICAgICAgIGF3YWl0IGluc3RhbGxTU0xDZXJ0KHRoaXMub3B0cy5jdXN0b21TU0xDZXJ0LCB0aGlzLm9wdHMudWRpZCk7XG4gICAgICAgICAgbG9nLmluZm8oYFJlc3RhcnRpbmcgU2ltdWxhdG9yIHNvIHRoYXQgU1NMIGNlcnRpZmljYXRlIGluc3RhbGxhdGlvbiB0YWtlcyBlZmZlY3RgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0U2ltKCk7XG4gICAgICAgICAgdGhpcy5sb2dFdmVudCgnY3VzdG9tQ2VydEluc3RhbGxlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nRXZlbnQoJ3NpbVN0YXJ0ZWQnKTtcbiAgICAgIGlmICghaXNMb2dDYXB0dXJlU3RhcnRlZCkge1xuICAgICAgICAvLyBSZXRyeSBsb2cgY2FwdHVyZSBpZiBTaW11bGF0b3Igd2FzIG5vdCBydW5uaW5nIGJlZm9yZVxuICAgICAgICBhd2FpdCBzdGFydExvZ0NhcHR1cmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLmFwcCkge1xuICAgICAgYXdhaXQgdGhpcy5pbnN0YWxsQVVUKCk7XG4gICAgICB0aGlzLmxvZ0V2ZW50KCdhcHBJbnN0YWxsZWQnKTtcbiAgICB9XG5cbiAgICAvLyBpZiB3ZSBvbmx5IGhhdmUgYnVuZGxlIGlkZW50aWZpZXIgYW5kIG5vIGFwcCwgZmFpbCBpZiBpdCBpcyBub3QgYWxyZWFkeSBpbnN0YWxsZWRcbiAgICBpZiAoIXRoaXMub3B0cy5hcHAgJiYgdGhpcy5vcHRzLmJ1bmRsZUlkICYmICF0aGlzLnNhZmFyaSkge1xuICAgICAgaWYgKCFhd2FpdCB0aGlzLm9wdHMuZGV2aWNlLmlzQXBwSW5zdGFsbGVkKHRoaXMub3B0cy5idW5kbGVJZCkpIHtcbiAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coYEFwcCB3aXRoIGJ1bmRsZSBpZGVudGlmaWVyICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHVua25vd25gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLnBlcm1pc3Npb25zKSB7XG4gICAgICBpZiAodGhpcy5pc1NpbXVsYXRvcigpKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnU2V0dGluZyB0aGUgcmVxdWVzdGVkIHBlcm1pc3Npb25zIGJlZm9yZSBXREEgaXMgc3RhcnRlZCcpO1xuICAgICAgICBmb3IgKGNvbnN0IFtidW5kbGVJZCwgcGVybWlzc2lvbnNNYXBwaW5nXSBvZiBfLnRvUGFpcnMoSlNPTi5wYXJzZSh0aGlzLm9wdHMucGVybWlzc2lvbnMpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2Uuc2V0UGVybWlzc2lvbnMoYnVuZGxlSWQsIHBlcm1pc3Npb25zTWFwcGluZyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy53YXJuKCdTZXR0aW5nIHBlcm1pc3Npb25zIGlzIG9ubHkgc3VwcG9ydGVkIG9uIFNpbXVsYXRvci4gJyArXG4gICAgICAgICAgJ1RoZSBcInBlcm1pc3Npb25zXCIgY2FwYWJpbGl0eSB3aWxsIGJlIGlnbm9yZWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgU0hBUkVEX1JFU09VUkNFU19HVUFSRC5hY3F1aXJlKFhDVUlUZXN0RHJpdmVyLm5hbWUsXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnN0YXJ0V2RhKHRoaXMub3B0cy5zZXNzaW9uSWQsIHJlYWxEZXZpY2UpKTtcblxuICAgIGF3YWl0IHRoaXMuc2V0SW5pdGlhbE9yaWVudGF0aW9uKHRoaXMub3B0cy5vcmllbnRhdGlvbik7XG4gICAgdGhpcy5sb2dFdmVudCgnb3JpZW50YXRpb25TZXQnKTtcblxuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpICYmIHRoaXMub3B0cy5zdGFydElXRFApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc3RhcnRJV0RQKCk7XG4gICAgICAgIGxvZy5kZWJ1ZyhgU3RhcnRlZCBpb3Nfd2Via2l0X2RlYnVnIHByb3h5IHNlcnZlciBhdDogJHt0aGlzLml3ZHBTZXJ2ZXIuZW5kcG9pbnR9YCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coYENvdWxkIG5vdCBzdGFydCBpb3Nfd2Via2l0X2RlYnVnX3Byb3h5IHNlcnZlcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1NhZmFyaSgpIHx8IHRoaXMub3B0cy5hdXRvV2Vidmlldykge1xuICAgICAgbG9nLmRlYnVnKCdXYWl0aW5nIGZvciBpbml0aWFsIHdlYnZpZXcnKTtcbiAgICAgIGF3YWl0IHRoaXMubmF2VG9Jbml0aWFsV2VidmlldygpO1xuICAgICAgdGhpcy5sb2dFdmVudCgnaW5pdGlhbFdlYnZpZXdOYXZpZ2F0ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgIGlmICh0aGlzLm9wdHMuY2FsZW5kYXJBY2Nlc3NBdXRob3JpemVkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZW5hYmxlQ2FsZW5kYXJBY2Nlc3ModGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmNhbGVuZGFyQWNjZXNzQXV0aG9yaXplZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5kaXNhYmxlQ2FsZW5kYXJBY2Nlc3ModGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgV2ViRHJpdmVyQWdlbnRSdW5uZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBpZCBvZiB0aGUgdGFyZ2V0IHNlc3Npb24gdG8gbGF1bmNoIFdEQSB3aXRoLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlYWxEZXZpY2UgLSBFcXVhbHMgdG8gdHJ1ZSBpZiB0aGUgdGVzdCB0YXJnZXQgZGV2aWNlIGlzIGEgcmVhbCBkZXZpY2UuXG4gICAqL1xuICBhc3luYyBzdGFydFdkYSAoc2Vzc2lvbklkLCByZWFsRGV2aWNlKSB7XG4gICAgdGhpcy53ZGEgPSBuZXcgV2ViRHJpdmVyQWdlbnQodGhpcy54Y29kZVZlcnNpb24sIHRoaXMub3B0cyk7XG5cbiAgICBhd2FpdCB0aGlzLndkYS5jbGVhbnVwT2Jzb2xldGVQcm9jZXNzZXMoKTtcblxuICAgIGlmICh0aGlzLm9wdHMudXNlTmV3V0RBKSB7XG4gICAgICBsb2cuZGVidWcoYENhcGFiaWxpdHkgJ3VzZU5ld1dEQScgc2V0IHRvIHRydWUsIHNvIHVuaW5zdGFsbGluZyBXREEgYmVmb3JlIHByb2NlZWRpbmdgKTtcbiAgICAgIGF3YWl0IHRoaXMud2RhLnF1aXRBbmRVbmluc3RhbGwoKTtcbiAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVVuaW5zdGFsbGVkJyk7XG4gICAgfSBlbHNlIGlmICghdXRpbC5oYXNWYWx1ZSh0aGlzLndkYS53ZWJEcml2ZXJBZ2VudFVybCkpIHtcbiAgICAgIGF3YWl0IHRoaXMud2RhLnNldHVwQ2FjaGluZyh0aGlzLm9wdHMudXBkYXRlZFdEQUJ1bmRsZUlkKTtcbiAgICB9XG5cbiAgICAvLyBsb2NhbCBoZWxwZXIgZm9yIHRoZSB0d28gcGxhY2VzIHdlIG5lZWQgdG8gdW5pbnN0YWxsIHdkYSBhbmQgcmUtc3RhcnQgaXRcbiAgICBjb25zdCBxdWl0QW5kVW5pbnN0YWxsID0gYXN5bmMgKG1zZykgPT4ge1xuICAgICAgbG9nLmRlYnVnKG1zZyk7XG4gICAgICBpZiAodGhpcy5vcHRzLndlYkRyaXZlckFnZW50VXJsKSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnTm90IHF1aXR0aW5nIGFuZCB1bnNpbnN0YWxsaW5nIFdlYkRyaXZlckFnZW50IGFzIHdlYkRyaXZlckFnZW50VXJsIGlzIHByb3ZpZGVkJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfVxuICAgICAgbG9nLndhcm4oJ1F1aXR0aW5nIGFuZCB1bmluc3RhbGxpbmcgV2ViRHJpdmVyQWdlbnQsIHRoZW4gcmV0cnlpbmcnKTtcbiAgICAgIGF3YWl0IHRoaXMud2RhLnF1aXRBbmRVbmluc3RhbGwoKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHN0YXJ0dXBSZXRyaWVzID0gdGhpcy5vcHRzLndkYVN0YXJ0dXBSZXRyaWVzIHx8ICh0aGlzLmlzUmVhbERldmljZSgpID8gV0RBX1JFQUxfREVWX1NUQVJUVVBfUkVUUklFUyA6IFdEQV9TSU1fU1RBUlRVUF9SRVRSSUVTKTtcbiAgICBjb25zdCBzdGFydHVwUmV0cnlJbnRlcnZhbCA9IHRoaXMub3B0cy53ZGFTdGFydHVwUmV0cnlJbnRlcnZhbCB8fCBXREFfU1RBUlRVUF9SRVRSWV9JTlRFUlZBTDtcbiAgICBsb2cuZGVidWcoYFRyeWluZyB0byBzdGFydCBXZWJEcml2ZXJBZ2VudCAke3N0YXJ0dXBSZXRyaWVzfSB0aW1lcyB3aXRoICR7c3RhcnR1cFJldHJ5SW50ZXJ2YWx9bXMgaW50ZXJ2YWxgKTtcbiAgICBhd2FpdCByZXRyeUludGVydmFsKHN0YXJ0dXBSZXRyaWVzLCBzdGFydHVwUmV0cnlJbnRlcnZhbCwgYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5sb2dFdmVudCgnd2RhU3RhcnRBdHRlbXB0ZWQnKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIG9uIHhjb2RlIDEwIGluc3RhbGxkIHdpbGwgb2Z0ZW4gdHJ5IHRvIGFjY2VzcyB0aGUgYXBwIGZyb20gaXRzIHN0YWdpbmdcbiAgICAgICAgLy8gZGlyZWN0b3J5IGJlZm9yZSBmdWxseSBtb3ZpbmcgaXQgdGhlcmUsIGFuZCBmYWlsLiBSZXRyeWluZyBvbmNlXG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGhlbHBzXG4gICAgICAgIGNvbnN0IHJldHJpZXMgPSB0aGlzLnhjb2RlVmVyc2lvbi5tYWpvciA+PSAxMCA/IDIgOiAxO1xuICAgICAgICB0aGlzLmNhY2hlZFdkYVN0YXR1cyA9IGF3YWl0IHJldHJ5KHJldHJpZXMsIHRoaXMud2RhLmxhdW5jaC5iaW5kKHRoaXMud2RhKSwgc2Vzc2lvbklkLCByZWFsRGV2aWNlKTtcbiAgICAgICAgLy8gdGhpcy5jYWNoZWRXZGFTdGF0dXMgPSBhd2FpdCB0aGlzLndkYS5sYXVuY2goc2Vzc2lvbklkLCByZWFsRGV2aWNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KCd3ZGFTdGFydEZhaWxlZCcpO1xuICAgICAgICBsZXQgZXJyb3JNc2cgPSBgVW5hYmxlIHRvIGxhdW5jaCBXZWJEcml2ZXJBZ2VudCBiZWNhdXNlIG9mIHhjb2RlYnVpbGQgZmFpbHVyZTogXCIke2Vyci5tZXNzYWdlfVwiLmA7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICAgICAgZXJyb3JNc2cgKz0gYCBNYWtlIHN1cmUgeW91IGZvbGxvdyB0aGUgdHV0b3JpYWwgYXQgJHtXREFfUkVBTF9ERVZfVFVUT1JJQUxfVVJMfS4gYCArXG4gICAgICAgICAgICAgICAgICAgICAgYFRyeSB0byByZW1vdmUgdGhlIFdlYkRyaXZlckFnZW50UnVubmVyIGFwcGxpY2F0aW9uIGZyb20gdGhlIGRldmljZSBpZiBpdCBpcyBpbnN0YWxsZWQgYCArXG4gICAgICAgICAgICAgICAgICAgICAgYGFuZCByZWJvb3QgdGhlIGRldmljZS5gO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHF1aXRBbmRVbmluc3RhbGwoZXJyb3JNc2cpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3h5UmVxUmVzID0gdGhpcy53ZGEucHJveHlSZXFSZXMuYmluZCh0aGlzLndkYSk7XG4gICAgICB0aGlzLmp3cFByb3h5QWN0aXZlID0gdHJ1ZTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcmV0cnlJbnRlcnZhbCgxNSwgMTAwMCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVNlc3Npb25BdHRlbXB0ZWQnKTtcbiAgICAgICAgICBsb2cuZGVidWcoJ1NlbmRpbmcgY3JlYXRlU2Vzc2lvbiBjb21tYW5kIHRvIFdEQScpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlZFdkYVN0YXR1cyA9IHRoaXMuY2FjaGVkV2RhU3RhdHVzIHx8IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc3RhdHVzJywgJ0dFVCcpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdGFydFdkYVNlc3Npb24odGhpcy5vcHRzLmJ1bmRsZUlkLCB0aGlzLm9wdHMucHJvY2Vzc0FyZ3VtZW50cyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2cuZGVidWcoYEZhaWxlZCB0byBjcmVhdGUgV0RBIHNlc3Npb24gKCR7ZXJyLm1lc3NhZ2V9KS4gUmV0cnlpbmcuLi5gKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KCd3ZGFTZXNzaW9uU3RhcnRlZCcpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxldCBlcnJvck1zZyA9IGBVbmFibGUgdG8gc3RhcnQgV2ViRHJpdmVyQWdlbnQgc2Vzc2lvbiBiZWNhdXNlIG9mIHhjb2RlYnVpbGQgZmFpbHVyZTogJHtlcnIubWVzc2FnZX1gO1xuICAgICAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgICAgIGVycm9yTXNnICs9IGAgTWFrZSBzdXJlIHlvdSBmb2xsb3cgdGhlIHR1dG9yaWFsIGF0ICR7V0RBX1JFQUxfREVWX1RVVE9SSUFMX1VSTH0uIGAgK1xuICAgICAgICAgICAgICAgICAgICAgIGBUcnkgdG8gcmVtb3ZlIHRoZSBXZWJEcml2ZXJBZ2VudFJ1bm5lciBhcHBsaWNhdGlvbiBmcm9tIHRoZSBkZXZpY2UgaWYgaXQgaXMgaW5zdGFsbGVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgIGBhbmQgcmVib290IHRoZSBkZXZpY2UuYDtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBxdWl0QW5kVW5pbnN0YWxsKGVycm9yTXNnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy5wcmV2ZW50V0RBQXR0YWNobWVudHMpKSB7XG4gICAgICAgIC8vIFhDVGVzdCBwcmlvciB0byBYY29kZSA5IFNESyBoYXMgbm8gbmF0aXZlIHdheSB0byBkaXNhYmxlIGF0dGFjaG1lbnRzXG4gICAgICAgIHRoaXMub3B0cy5wcmV2ZW50V0RBQXR0YWNobWVudHMgPSB0aGlzLnhjb2RlVmVyc2lvbi5tYWpvciA8IDk7XG4gICAgICAgIGlmICh0aGlzLm9wdHMucHJldmVudFdEQUF0dGFjaG1lbnRzKSB7XG4gICAgICAgICAgbG9nLmluZm8oJ0VuYWJsZWQgV0RBIGF0dGFjaG1lbnRzIHByZXZlbnRpb24gYnkgZGVmYXVsdCB0byBzYXZlIHRoZSBkaXNrIHNwYWNlLiAnICtcbiAgICAgICAgICAgICAgICAgICBgU2V0ICdwcmV2ZW50V0RBQXR0YWNobWVudHMnIGNhcGFiaWxpdHkgdG8gZmFsc2UgaWYgdGhpcyBpcyBhbiB1bmRlc2lyZWQgYmVoYXZpb3IuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdHMucHJldmVudFdEQUF0dGFjaG1lbnRzKSB7XG4gICAgICAgIGF3YWl0IGFkanVzdFdEQUF0dGFjaG1lbnRzUGVybWlzc2lvbnModGhpcy53ZGEsIHRoaXMub3B0cy5wcmV2ZW50V0RBQXR0YWNobWVudHMgPyAnNTU1JyA6ICc3NTUnKTtcbiAgICAgICAgdGhpcy5sb2dFdmVudCgnd2RhUGVybXNBZGp1c3RlZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRzLmNsZWFyU3lzdGVtRmlsZXMpIHtcbiAgICAgICAgYXdhaXQgbWFya1N5c3RlbUZpbGVzRm9yQ2xlYW51cCh0aGlzLndkYSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGV4cGVjdCBjZXJ0YWluIHNvY2tldCBlcnJvcnMgdW50aWwgdGhpcyBwb2ludCwgYnV0IG5vd1xuICAgICAgLy8gbWFyayB0aGluZ3MgYXMgZnVsbHkgd29ya2luZ1xuICAgICAgdGhpcy53ZGEuZnVsbHlTdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMubG9nRXZlbnQoJ3dkYVN0YXJ0ZWQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJ1blJlc2V0IChvcHRzID0gbnVsbCkge1xuICAgIHRoaXMubG9nRXZlbnQoJ3Jlc2V0U3RhcnRlZCcpO1xuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCBydW5SZWFsRGV2aWNlUmVzZXQodGhpcy5vcHRzLmRldmljZSwgb3B0cyB8fCB0aGlzLm9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBydW5TaW11bGF0b3JSZXNldCh0aGlzLm9wdHMuZGV2aWNlLCBvcHRzIHx8IHRoaXMub3B0cyk7XG4gICAgfVxuICAgIHRoaXMubG9nRXZlbnQoJ3Jlc2V0Q29tcGxldGUnKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24gKCkge1xuICAgIGF3YWl0IHJlbW92ZUFsbFNlc3Npb25XZWJTb2NrZXRIYW5kbGVycyh0aGlzLnNlcnZlciwgdGhpcy5zZXNzaW9uSWQpO1xuXG4gICAgYXdhaXQgU0hBUkVEX1JFU09VUkNFU19HVUFSRC5hY3F1aXJlKFhDVUlUZXN0RHJpdmVyLm5hbWUsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc3RvcCgpO1xuXG4gICAgICAvLyByZXNldCB0aGUgcGVybWlzc2lvbnMgb24gdGhlIGRlcml2ZWQgZGF0YSBmb2xkZXIsIGlmIG5lY2Vzc2FyeVxuICAgICAgaWYgKHRoaXMub3B0cy5wcmV2ZW50V0RBQXR0YWNobWVudHMpIHtcbiAgICAgICAgYXdhaXQgYWRqdXN0V0RBQXR0YWNobWVudHNQZXJtaXNzaW9ucyh0aGlzLndkYSwgJzc1NScpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRzLmNsZWFyU3lzdGVtRmlsZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBcHBUZW1wb3JhcnkpIHtcbiAgICAgICAgICBhd2FpdCBmcy5yaW1yYWYodGhpcy5vcHRzLmFwcCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgY2xlYXJTeXN0ZW1GaWxlcyh0aGlzLndkYSwgISF0aGlzLm9wdHMuc2hvd1hjb2RlTG9nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnTm90IGNsZWFyaW5nIGxvZyBmaWxlcy4gVXNlIGBjbGVhclN5c3RlbUZpbGVzYCBjYXBhYmlsaXR5IHRvIHR1cm4gb24uJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgICAgbG9nLmRlYnVnKCdJbiBhIHdlYiBzZXNzaW9uLiBSZW1vdmluZyByZW1vdGUgZGVidWdnZXInKTtcbiAgICAgIGF3YWl0IHRoaXMuc3RvcFJlbW90ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdHMucmVzZXRPblNlc3Npb25TdGFydE9ubHkgPT09IGZhbHNlKSB7XG4gICAgICBhd2FpdCB0aGlzLnJ1blJlc2V0KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNTaW11bGF0b3IoKSAmJiAhdGhpcy5vcHRzLm5vUmVzZXQgJiYgISF0aGlzLm9wdHMuZGV2aWNlKSB7XG4gICAgICBpZiAodGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSkge1xuICAgICAgICBsb2cuZGVidWcoYERlbGV0aW5nIHNpbXVsYXRvciBjcmVhdGVkIGZvciB0aGlzIHJ1biAodWRpZDogJyR7dGhpcy5vcHRzLnVkaWR9JylgKTtcbiAgICAgICAgYXdhaXQgc2h1dGRvd25TaW11bGF0b3IodGhpcy5vcHRzLmRldmljZSk7XG4gICAgICAgIGF3YWl0IHRoaXMub3B0cy5kZXZpY2UuZGVsZXRlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFfLmlzRW1wdHkodGhpcy5sb2dzKSkge1xuICAgICAgYXdhaXQgdGhpcy5sb2dzLnN5c2xvZy5zdG9wQ2FwdHVyZSgpO1xuICAgICAgdGhpcy5sb2dzID0ge307XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXdkcFNlcnZlcikge1xuICAgICAgYXdhaXQgdGhpcy5zdG9wSVdEUCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdHMuZW5hYmxlQXN5bmNFeGVjdXRlRnJvbUh0dHBzICYmICF0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCB0aGlzLnN0b3BIdHRwc0FzeW5jU2VydmVyKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWpwZWdTdHJlYW0pIHtcbiAgICAgIGxvZy5pbmZvKCdDbG9zaW5nIE1KUEVHIHN0cmVhbScpO1xuICAgICAgdGhpcy5tanBlZ1N0cmVhbS5zdG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZXNldElvcygpO1xuXG4gICAgYXdhaXQgc3VwZXIuZGVsZXRlU2Vzc2lvbigpO1xuICB9XG5cbiAgYXN5bmMgc3RvcCAoKSB7XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMucHJveHlSZXFSZXMgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMud2RhICYmIHRoaXMud2RhLmZ1bGx5U3RhcnRlZCkge1xuICAgICAgaWYgKHRoaXMud2RhLmp3cHJveHkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3Nlc3Npb24vJHt0aGlzLnNlc3Npb25JZH1gLCAnREVMRVRFJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIGFuIGVycm9yIGhlcmUgc2hvdWxkIG5vdCBzaG9ydC1jaXJjdWl0IHRoZSByZXN0IG9mIGNsZWFuIHVwXG4gICAgICAgICAgbG9nLmRlYnVnKGBVbmFibGUgdG8gREVMRVRFIHNlc3Npb24gb24gV0RBOiAnJHtlcnIubWVzc2FnZX0nLiBDb250aW51aW5nIHNodXRkb3duLmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy53ZGEgJiYgIXRoaXMud2RhLndlYkRyaXZlckFnZW50VXJsICYmIHRoaXMub3B0cy51c2VOZXdXREEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy53ZGEucXVpdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVDb21tYW5kIChjbWQsIC4uLmFyZ3MpIHtcbiAgICBsb2cuZGVidWcoYEV4ZWN1dGluZyBjb21tYW5kICcke2NtZH0nYCk7XG5cbiAgICBpZiAoY21kID09PSAncmVjZWl2ZUFzeW5jUmVzcG9uc2UnKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWNlaXZlQXN5bmNSZXNwb25zZSguLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gVE9ETzogb25jZSB0aGlzIGZpeCBnZXRzIGludG8gYmFzZSBkcml2ZXIgcmVtb3ZlIGZyb20gaGVyZVxuICAgIGlmIChjbWQgPT09ICdnZXRTdGF0dXMnKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRTdGF0dXMoKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHN1cGVyLmV4ZWN1dGVDb21tYW5kKGNtZCwgLi4uYXJncyk7XG4gIH1cblxuICBhc3luYyBjb25maWd1cmVBcHAgKCkge1xuICAgIGZ1bmN0aW9uIGFwcElzUGFja2FnZU9yQnVuZGxlIChhcHApIHtcbiAgICAgIHJldHVybiAoL14oW2EtekEtWjAtOVxcLV9dK1xcLlthLXpBLVowLTlcXC1fXSspKyQvKS50ZXN0KGFwcCk7XG4gICAgfVxuXG4gICAgLy8gdGhlIGFwcCBuYW1lIGlzIGEgYnVuZGxlSWQgYXNzaWduIGl0IHRvIHRoZSBidW5kbGVJZCBwcm9wZXJ0eVxuICAgIGlmICghdGhpcy5vcHRzLmJ1bmRsZUlkICYmIGFwcElzUGFja2FnZU9yQnVuZGxlKHRoaXMub3B0cy5hcHApKSB7XG4gICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSB0aGlzLm9wdHMuYXBwO1xuICAgICAgdGhpcy5vcHRzLmFwcCA9ICcnO1xuICAgIH1cbiAgICAvLyB3ZSBoYXZlIGEgYnVuZGxlIElELCBidXQgbm8gYXBwLCBvciBhcHAgaXMgYWxzbyBhIGJ1bmRsZVxuICAgIGlmICgodGhpcy5vcHRzLmJ1bmRsZUlkICYmIGFwcElzUGFja2FnZU9yQnVuZGxlKHRoaXMub3B0cy5idW5kbGVJZCkpICYmXG4gICAgICAgICh0aGlzLm9wdHMuYXBwID09PSAnJyB8fCBhcHBJc1BhY2thZ2VPckJ1bmRsZSh0aGlzLm9wdHMuYXBwKSkpIHtcbiAgICAgIGxvZy5kZWJ1ZygnQXBwIGlzIGFuIGlPUyBidW5kbGUsIHdpbGwgYXR0ZW1wdCB0byBydW4gYXMgcHJlLWV4aXN0aW5nJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgZm9yIHN1cHBvcnRlZCBidWlsZC1pbiBhcHBzXG4gICAgaWYgKHRoaXMub3B0cy5hcHAgJiYgdGhpcy5vcHRzLmFwcC50b0xvd2VyQ2FzZSgpID09PSAnc2V0dGluZ3MnKSB7XG4gICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSAnY29tLmFwcGxlLlByZWZlcmVuY2VzJztcbiAgICAgIHRoaXMub3B0cy5hcHAgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmFwcCAmJiB0aGlzLm9wdHMuYXBwLnRvTG93ZXJDYXNlKCkgPT09ICdjYWxlbmRhcicpIHtcbiAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9ICdjb20uYXBwbGUubW9iaWxlY2FsJztcbiAgICAgIHRoaXMub3B0cy5hcHAgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9yaWdpbmFsQXBwUGF0aCA9IHRoaXMub3B0cy5hcHA7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGRvd25sb2FkIGlmIG5lY2Vzc2FyeVxuICAgICAgdGhpcy5vcHRzLmFwcCA9IGF3YWl0IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAodGhpcy5vcHRzLmFwcCwgJy5hcHAnLCB0aGlzLm9wdHMubW91bnRSb290LCB0aGlzLm9wdHMud2luZG93c1NoYXJlVXNlck5hbWUsIHRoaXMub3B0cy53aW5kb3dzU2hhcmVQYXNzd29yZCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2cuZXJyb3IoZXJyKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEJhZCBhcHA6ICR7dGhpcy5vcHRzLmFwcH0uIEFwcCBwYXRocyBuZWVkIHRvIGJlIGFic29sdXRlLCBvciByZWxhdGl2ZSB0byB0aGUgYXBwaXVtIGAgK1xuICAgICAgICAnc2VydmVyIGluc3RhbGwgZGlyLCBvciBhIFVSTCB0byBjb21wcmVzc2VkIGZpbGUsIG9yIGEgc3BlY2lhbCBhcHAgbmFtZS4nKTtcbiAgICB9XG4gICAgdGhpcy5pc0FwcFRlbXBvcmFyeSA9IHRoaXMub3B0cy5hcHAgJiYgb3JpZ2luYWxBcHBQYXRoICE9PSB0aGlzLm9wdHMuYXBwO1xuICB9XG5cbiAgYXN5bmMgZGV0ZXJtaW5lRGV2aWNlICgpIHtcbiAgICAvLyBpbiB0aGUgb25lIGNhc2Ugd2hlcmUgd2UgY3JlYXRlIGEgc2ltLCB3ZSB3aWxsIHNldCB0aGlzIHN0YXRlXG4gICAgdGhpcy5saWZlY3ljbGVEYXRhLmNyZWF0ZVNpbSA9IGZhbHNlO1xuXG4gICAgLy8gaWYgd2UgZ2V0IGdlbmVyaWMgbmFtZXMsIHRyYW5zbGF0ZSB0aGVtXG4gICAgdGhpcy5vcHRzLmRldmljZU5hbWUgPSB0cmFuc2xhdGVEZXZpY2VOYW1lKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sIHRoaXMub3B0cy5kZXZpY2VOYW1lKTtcblxuICAgIC8vIGNoZWNrIGZvciBhIHBhcnRpY3VsYXIgc2ltdWxhdG9yXG4gICAgaWYgKHRoaXMub3B0cy51ZGlkICYmIChhd2FpdCBzaW1FeGlzdHModGhpcy5vcHRzLnVkaWQpKSkge1xuICAgICAgY29uc3QgZGV2aWNlID0gYXdhaXQgZ2V0U2ltdWxhdG9yKHRoaXMub3B0cy51ZGlkKTtcbiAgICAgIHJldHVybiB7ZGV2aWNlLCByZWFsRGV2aWNlOiBmYWxzZSwgdWRpZDogdGhpcy5vcHRzLnVkaWR9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdHMudWRpZCkge1xuICAgICAgaWYgKHRoaXMub3B0cy51ZGlkLnRvTG93ZXJDYXNlKCkgPT09ICdhdXRvJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMub3B0cy51ZGlkID0gYXdhaXQgZGV0ZWN0VWRpZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBUcnlpbmcgdG8gZmluZCBtYXRjaGluZyBVRElEIGZvciBTaW11bGF0b3JcbiAgICAgICAgICBsb2cud2FybihgQ2Fubm90IGRldGVjdCBhbnkgY29ubmVjdGVkIHJlYWwgZGV2aWNlcy4gRmFsbGluZyBiYWNrIHRvIFNpbXVsYXRvci4gT3JpZ2luYWwgZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgY29uc3QgZGV2aWNlID0gYXdhaXQgZ2V0RXhpc3RpbmdTaW0odGhpcy5vcHRzKTtcbiAgICAgICAgICBpZiAoIWRldmljZSkge1xuICAgICAgICAgICAgLy8gTm8gbWF0Y2hpbmcgU2ltdWxhdG9yIGlzIGZvdW5kLiBUaHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coYENhbm5vdCBkZXRlY3QgdWRpZCBmb3IgJHt0aGlzLm9wdHMuZGV2aWNlTmFtZX0gU2ltdWxhdG9yIHJ1bm5pbmcgaU9TICR7dGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTWF0Y2hpbmcgU2ltdWxhdG9yIGV4aXN0cyBhbmQgaXMgZm91bmQuIFVzZSBpdFxuICAgICAgICAgIHRoaXMub3B0cy51ZGlkID0gZGV2aWNlLnVkaWQ7XG4gICAgICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiBkZXZpY2UudWRpZH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBpdCBpcyBhIGNvbm5lY3RlZCBkZXZpY2UuIElmIG5vdCwgdGhlIHVkaWQgcGFzc2VkIGluIGlzIGludmFsaWRcbiAgICAgICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IGdldENvbm5lY3RlZERldmljZXMoKTtcbiAgICAgICAgbG9nLmRlYnVnKGBBdmFpbGFibGUgZGV2aWNlczogJHtkZXZpY2VzLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIGlmIChkZXZpY2VzLmluZGV4T2YodGhpcy5vcHRzLnVkaWQpID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkZXZpY2Ugb3Igc2ltdWxhdG9yIFVESUQ6ICcke3RoaXMub3B0cy51ZGlkfSdgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCBnZXRSZWFsRGV2aWNlT2JqKHRoaXMub3B0cy51ZGlkKTtcbiAgICAgIHJldHVybiB7ZGV2aWNlLCByZWFsRGV2aWNlOiB0cnVlLCB1ZGlkOiB0aGlzLm9wdHMudWRpZH07XG4gICAgfVxuXG4gICAgLy8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBzaW11bGF0b3IgdG8gdXNlLCBnaXZlbiB0aGUgZGVzaXJlZCBjYXBhYmlsaXRpZXNcbiAgICBsZXQgZGV2aWNlID0gYXdhaXQgZ2V0RXhpc3RpbmdTaW0odGhpcy5vcHRzKTtcblxuICAgIC8vIGNoZWNrIGZvciBhbiBleGlzdGluZyBzaW11bGF0b3JcbiAgICBpZiAoZGV2aWNlKSB7XG4gICAgICByZXR1cm4ge2RldmljZSwgcmVhbERldmljZTogZmFsc2UsIHVkaWQ6IGRldmljZS51ZGlkfTtcbiAgICB9XG5cbiAgICAvLyBubyBkZXZpY2Ugb2YgdGhpcyB0eXBlIGV4aXN0cywgc28gY3JlYXRlIG9uZVxuICAgIGxvZy5pbmZvKCdTaW11bGF0b3IgdWRpZCBub3QgcHJvdmlkZWQsIHVzaW5nIGRlc2lyZWQgY2FwcyB0byBjcmVhdGUgYSBuZXcgc2ltdWxhdG9yJyk7XG4gICAgaWYgKCF0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uICYmIHRoaXMuaW9zU2RrVmVyc2lvbikge1xuICAgICAgbG9nLmluZm8oYE5vIHBsYXRmb3JtVmVyc2lvbiBzcGVjaWZpZWQuIFVzaW5nIGxhdGVzdCB2ZXJzaW9uIFhjb2RlIHN1cHBvcnRzOiAnJHt0aGlzLmlvc1Nka1ZlcnNpb259JyBgICtcbiAgICAgICAgICAgICAgIGBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyBpZiBhIHNpbXVsYXRvciBkb2VzIG5vdCBleGlzdCBmb3IgdGhpcyBwbGF0Zm9ybSB2ZXJzaW9uLmApO1xuICAgICAgdGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbiA9IHRoaXMuaW9zU2RrVmVyc2lvbjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLm5vUmVzZXQpIHtcbiAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBzaW11bGF0b3IganVzdCB3aXRoIGNvcnJlY3QgY2FwYWJpbGl0aWVzXG4gICAgICBsZXQgZGV2aWNlID0gYXdhaXQgZ2V0RXhpc3RpbmdTaW0odGhpcy5vcHRzKTtcbiAgICAgIGlmIChkZXZpY2UpIHtcbiAgICAgICAgcmV0dXJuIHtkZXZpY2UsIHJlYWxEZXZpY2U6IGZhbHNlLCB1ZGlkOiBkZXZpY2UudWRpZH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGV2aWNlID0gYXdhaXQgdGhpcy5jcmVhdGVTaW0oKTtcbiAgICByZXR1cm4ge2RldmljZSwgcmVhbERldmljZTogZmFsc2UsIHVkaWQ6IGRldmljZS51ZGlkfTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0U2ltICgpIHtcbiAgICBjb25zdCBydW5PcHRzID0ge1xuICAgICAgc2NhbGVGYWN0b3I6IHRoaXMub3B0cy5zY2FsZUZhY3RvcixcbiAgICAgIGNvbm5lY3RIYXJkd2FyZUtleWJvYXJkOiAhIXRoaXMub3B0cy5jb25uZWN0SGFyZHdhcmVLZXlib2FyZCxcbiAgICAgIGlzSGVhZGxlc3M6ICEhdGhpcy5vcHRzLmlzSGVhZGxlc3MsXG4gICAgICBkZXZpY2VQcmVmZXJlbmNlczoge30sXG4gICAgfTtcblxuICAgIC8vIGFkZCB0aGUgd2luZG93IGNlbnRlciwgaWYgaXQgaXMgc3BlY2lmaWVkXG4gICAgaWYgKHRoaXMub3B0cy5TaW11bGF0b3JXaW5kb3dDZW50ZXIpIHtcbiAgICAgIHJ1bk9wdHMuZGV2aWNlUHJlZmVyZW5jZXMuU2ltdWxhdG9yV2luZG93Q2VudGVyID0gdGhpcy5vcHRzLlNpbXVsYXRvcldpbmRvd0NlbnRlcjtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGlzIHRvIHdvcmthcm91bmQgWENUZXN0IGJ1ZyBhYm91dCBjaGFuZ2luZyBTaW11bGF0b3JcbiAgICAvLyBvcmllbnRhdGlvbiBpcyBub3Qgc3luY2hyb25pemVkIHRvIHRoZSBhY3R1YWwgd2luZG93IG9yaWVudGF0aW9uXG4gICAgY29uc3Qgb3JpZW50YXRpb24gPSBfLmlzU3RyaW5nKHRoaXMub3B0cy5vcmllbnRhdGlvbikgJiYgdGhpcy5vcHRzLm9yaWVudGF0aW9uLnRvVXBwZXJDYXNlKCk7XG4gICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xuICAgICAgY2FzZSAnTEFORFNDQVBFJzpcbiAgICAgICAgcnVuT3B0cy5kZXZpY2VQcmVmZXJlbmNlcy5TaW11bGF0b3JXaW5kb3dPcmllbnRhdGlvbiA9ICdMYW5kc2NhcGVMZWZ0JztcbiAgICAgICAgcnVuT3B0cy5kZXZpY2VQcmVmZXJlbmNlcy5TaW11bGF0b3JXaW5kb3dSb3RhdGlvbkFuZ2xlID0gOTA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnUE9SVFJBSVQnOlxuICAgICAgICBydW5PcHRzLmRldmljZVByZWZlcmVuY2VzLlNpbXVsYXRvcldpbmRvd09yaWVudGF0aW9uID0gJ1BvcnRyYWl0JztcbiAgICAgICAgcnVuT3B0cy5kZXZpY2VQcmVmZXJlbmNlcy5TaW11bGF0b3JXaW5kb3dSb3RhdGlvbkFuZ2xlID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5ydW4ocnVuT3B0cyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVTaW0gKCkge1xuICAgIHRoaXMubGlmZWN5Y2xlRGF0YS5jcmVhdGVTaW0gPSB0cnVlO1xuXG4gICAgLy8gY3JlYXRlIHNpbSBmb3IgY2Fwc1xuICAgIGxldCBzaW0gPSBhd2FpdCBjcmVhdGVTaW0odGhpcy5vcHRzKTtcbiAgICBsb2cuaW5mbyhgQ3JlYXRlZCBzaW11bGF0b3Igd2l0aCB1ZGlkICcke3NpbS51ZGlkfScuYCk7XG5cbiAgICByZXR1cm4gc2ltO1xuICB9XG5cbiAgYXN5bmMgbGF1bmNoQXBwICgpIHtcbiAgICBjb25zdCBBUFBfTEFVTkNIX1RJTUVPVVQgPSAyMCAqIDEwMDA7XG5cbiAgICB0aGlzLmxvZ0V2ZW50KCdhcHBMYXVuY2hBdHRlbXB0ZWQnKTtcbiAgICBhd2FpdCBsYXVuY2godGhpcy5vcHRzLmRldmljZS51ZGlkLCB0aGlzLm9wdHMuYnVuZGxlSWQpO1xuXG4gICAgbGV0IGNoZWNrU3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy9zdGF0dXMnLCAnR0VUJyk7XG4gICAgICBsZXQgY3VycmVudEFwcCA9IHJlc3BvbnNlLmN1cnJlbnRBcHAuYnVuZGxlSUQ7XG4gICAgICBpZiAoY3VycmVudEFwcCAhPT0gdGhpcy5vcHRzLmJ1bmRsZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLm9wdHMuYnVuZGxlSWR9IG5vdCBpbiBmb3JlZ3JvdW5kLiAke2N1cnJlbnRBcHB9IGlzIGluIGZvcmVncm91bmRgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbG9nLmluZm8oYFdhaXRpbmcgZm9yICcke3RoaXMub3B0cy5idW5kbGVJZH0nIHRvIGJlIGluIGZvcmVncm91bmRgKTtcbiAgICBsZXQgcmV0cmllcyA9IHBhcnNlSW50KEFQUF9MQVVOQ0hfVElNRU9VVCAvIDIwMCwgMTApO1xuICAgIGF3YWl0IHJldHJ5SW50ZXJ2YWwocmV0cmllcywgMjAwLCBjaGVja1N0YXR1cyk7XG4gICAgbG9nLmluZm8oYCR7dGhpcy5vcHRzLmJ1bmRsZUlkfSBpcyBpbiBmb3JlZ3JvdW5kYCk7XG4gICAgdGhpcy5sb2dFdmVudCgnYXBwTGF1bmNoZWQnKTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0V2RhU2Vzc2lvbiAoYnVuZGxlSWQsIHByb2Nlc3NBcmd1bWVudHMpIHtcbiAgICBsZXQgYXJncyA9IHByb2Nlc3NBcmd1bWVudHMgPyAocHJvY2Vzc0FyZ3VtZW50cy5hcmdzIHx8IFtdKSA6IFtdO1xuICAgIGlmICghXy5pc0FycmF5KGFyZ3MpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb2Nlc3NBcmd1bWVudHMuYXJncyBjYXBhYmlsaXR5IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShhcmdzKX0gaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICAgIH1cbiAgICBsZXQgZW52ID0gcHJvY2Vzc0FyZ3VtZW50cyA/IChwcm9jZXNzQXJndW1lbnRzLmVudiB8fCB7fSkgOiB7fTtcbiAgICBpZiAoIV8uaXNQbGFpbk9iamVjdChlbnYpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb2Nlc3NBcmd1bWVudHMuZW52IGNhcGFiaWxpdHkgaXMgZXhwZWN0ZWQgdG8gYmUgYSBkaWN0aW9uYXJ5LiBgICtcbiAgICAgICAgICAgICAgICAgICAgICBgJHtKU09OLnN0cmluZ2lmeShlbnYpfSBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gICAgfVxuXG4gICAgbGV0IHNob3VsZFdhaXRGb3JRdWllc2NlbmNlID0gdXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMud2FpdEZvclF1aWVzY2VuY2UpID8gdGhpcy5vcHRzLndhaXRGb3JRdWllc2NlbmNlIDogdHJ1ZTtcbiAgICBsZXQgbWF4VHlwaW5nRnJlcXVlbmN5ID0gdXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMubWF4VHlwaW5nRnJlcXVlbmN5KSA/IHRoaXMub3B0cy5tYXhUeXBpbmdGcmVxdWVuY3kgOiA2MDtcbiAgICBsZXQgc2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIgPSB1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy5zaG91bGRVc2VTaW5nbGV0b25UZXN0TWFuYWdlcikgPyB0aGlzLm9wdHMuc2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIgOiB0cnVlO1xuICAgIGxldCBzaG91bGRVc2VUZXN0TWFuYWdlckZvclZpc2liaWxpdHlEZXRlY3Rpb24gPSBmYWxzZTtcbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMuc2ltcGxlSXNWaXNpYmxlQ2hlY2spKSB7XG4gICAgICBzaG91bGRVc2VUZXN0TWFuYWdlckZvclZpc2liaWxpdHlEZXRlY3Rpb24gPSB0aGlzLm9wdHMuc2ltcGxlSXNWaXNpYmxlQ2hlY2s7XG4gICAgfVxuICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdCh0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uKSkgJiYgcGFyc2VGbG9hdCh0aGlzLm9wdHMucGxhdGZvcm1WZXJzaW9uKS50b0ZpeGVkKDEpID09PSAnOS4zJykge1xuICAgICAgbG9nLmluZm8oYEZvcmNpbmcgc2hvdWxkVXNlU2luZ2xldG9uVGVzdE1hbmFnZXIgY2FwYWJpbGl0eSB2YWx1ZSB0byB0cnVlLCBiZWNhdXNlIG9mIGtub3duIFhDVGVzdCBpc3N1ZXMgdW5kZXIgOS4zIHBsYXRmb3JtIHZlcnNpb25gKTtcbiAgICAgIHNob3VsZFVzZVRlc3RNYW5hZ2VyRm9yVmlzaWJpbGl0eURldGVjdGlvbiA9IHRydWU7XG4gICAgfVxuICAgIGlmICh1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy5sYW5ndWFnZSkpIHtcbiAgICAgIGFyZ3MucHVzaCgnLUFwcGxlTGFuZ3VhZ2VzJywgYCgke3RoaXMub3B0cy5sYW5ndWFnZX0pYCk7XG4gICAgICBhcmdzLnB1c2goJy1OU0xhbmd1YWdlcycsIGAoJHt0aGlzLm9wdHMubGFuZ3VhZ2V9KWApO1xuICAgIH1cblxuICAgIGlmICh1dGlsLmhhc1ZhbHVlKHRoaXMub3B0cy5sb2NhbGUpKSB7XG4gICAgICBhcmdzLnB1c2goJy1BcHBsZUxvY2FsZScsIHRoaXMub3B0cy5sb2NhbGUpO1xuICAgIH1cblxuICAgIGxldCBkZXNpcmVkID0ge1xuICAgICAgZGVzaXJlZENhcGFiaWxpdGllczoge1xuICAgICAgICBidW5kbGVJZCxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzLFxuICAgICAgICBlbnZpcm9ubWVudDogZW52LFxuICAgICAgICBzaG91bGRXYWl0Rm9yUXVpZXNjZW5jZSxcbiAgICAgICAgc2hvdWxkVXNlVGVzdE1hbmFnZXJGb3JWaXNpYmlsaXR5RGV0ZWN0aW9uLFxuICAgICAgICBtYXhUeXBpbmdGcmVxdWVuY3ksXG4gICAgICAgIHNob3VsZFVzZVNpbmdsZXRvblRlc3RNYW5hZ2VyLFxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnNob3VsZFVzZUNvbXBhY3RSZXNwb25zZXMpKSB7XG4gICAgICBkZXNpcmVkLmRlc2lyZWRDYXBhYmlsaXRpZXMuc2hvdWxkVXNlQ29tcGFjdFJlc3BvbnNlcyA9IHRoaXMub3B0cy5zaG91bGRVc2VDb21wYWN0UmVzcG9uc2VzO1xuICAgIH1cbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMuZWxlbWVudFJlc3BvbnNlRmllbGRzKSkge1xuICAgICAgZGVzaXJlZC5kZXNpcmVkQ2FwYWJpbGl0aWVzLmVsZW1lbnRSZXNwb25zZUZpZWxkcyA9IHRoaXMub3B0cy5lbGVtZW50UmVzcG9uc2VGaWVsZHM7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdHMuYXV0b0FjY2VwdEFsZXJ0cykge1xuICAgICAgZGVzaXJlZC5kZXNpcmVkQ2FwYWJpbGl0aWVzLmRlZmF1bHRBbGVydEFjdGlvbiA9ICdhY2NlcHQnO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmF1dG9EaXNtaXNzQWxlcnRzKSB7XG4gICAgICBkZXNpcmVkLmRlc2lyZWRDYXBhYmlsaXRpZXMuZGVmYXVsdEFsZXJ0QWN0aW9uID0gJ2Rpc21pc3MnO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvc2Vzc2lvbicsICdQT1NUJywgZGVzaXJlZCk7XG4gIH1cblxuICAvLyBPdmVycmlkZSBQcm94eSBtZXRob2RzIGZyb20gQmFzZURyaXZlclxuICBwcm94eUFjdGl2ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuandwUHJveHlBY3RpdmU7XG4gIH1cblxuICBnZXRQcm94eUF2b2lkTGlzdCAoKSB7XG4gICAgaWYgKHRoaXMuaXNXZWJ2aWV3KCkpIHtcbiAgICAgIHJldHVybiBOT19QUk9YWV9XRUJfTElTVDtcbiAgICB9XG4gICAgcmV0dXJuIE5PX1BST1hZX05BVElWRV9MSVNUO1xuICB9XG5cbiAgY2FuUHJveHkgKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaXNTYWZhcmkgKCkge1xuICAgIHJldHVybiAhIXRoaXMuc2FmYXJpO1xuICB9XG5cbiAgaXNSZWFsRGV2aWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRzLnJlYWxEZXZpY2U7XG4gIH1cblxuICBpc1NpbXVsYXRvciAoKSB7XG4gICAgcmV0dXJuICF0aGlzLm9wdHMucmVhbERldmljZTtcbiAgfVxuXG4gIGlzV2VidmlldyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTYWZhcmkoKSB8fCB0aGlzLmlzV2ViQ29udGV4dCgpO1xuICB9XG5cbiAgdmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3kgKHN0cmF0ZWd5KSB7XG4gICAgc3VwZXIudmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3koc3RyYXRlZ3ksIHRoaXMuaXNXZWJDb250ZXh0KCkpO1xuICB9XG5cbiAgdmFsaWRhdGVEZXNpcmVkQ2FwcyAoY2Fwcykge1xuICAgIGlmICghc3VwZXIudmFsaWRhdGVEZXNpcmVkQ2FwcyhjYXBzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjYXBhYmlsaXRpZXMgaGF2ZSBvbmUgb2YgYGFwcGAgb3IgYGJ1bmRsZUlkYFxuICAgIGlmICgoY2Fwcy5icm93c2VyTmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKSAhPT0gJ3NhZmFyaScgJiYgIWNhcHMuYXBwICYmICFjYXBzLmJ1bmRsZUlkKSB7XG4gICAgICBsZXQgbXNnID0gJ1RoZSBkZXNpcmVkIGNhcGFiaWxpdGllcyBtdXN0IGluY2x1ZGUgZWl0aGVyIGFuIGFwcCBvciBhIGJ1bmRsZUlkIGZvciBpT1MnO1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3cobXNnKTtcbiAgICB9XG5cbiAgICBsZXQgdmVyaWZ5UHJvY2Vzc0FyZ3VtZW50ID0gKHByb2Nlc3NBcmd1bWVudHMpID0+IHtcbiAgICAgIGNvbnN0IHthcmdzLCBlbnZ9ID0gcHJvY2Vzc0FyZ3VtZW50cztcbiAgICAgIGlmICghXy5pc05pbChhcmdzKSAmJiAhXy5pc0FycmF5KGFyZ3MpKSB7XG4gICAgICAgIGxvZy5lcnJvckFuZFRocm93KCdwcm9jZXNzQXJndW1lbnRzLmFyZ3MgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzJyk7XG4gICAgICB9XG4gICAgICBpZiAoIV8uaXNOaWwoZW52KSAmJiAhXy5pc1BsYWluT2JqZWN0KGVudikpIHtcbiAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coJ3Byb2Nlc3NBcmd1bWVudHMuZW52IG11c3QgYmUgYW4gb2JqZWN0IDxrZXksdmFsdWU+IHBhaXIge2E6YiwgYzpkfScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBgcHJvY2Vzc0FyZ3VtZW50c2Agc2hvdWxkIGJlIEpTT04gc3RyaW5nIG9yIGFuIG9iamVjdCB3aXRoIGFyZ3VtZW50cyBhbmQvIGVudmlyb25tZW50IGRldGFpbHNcbiAgICBpZiAoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKSB7XG4gICAgICBpZiAoXy5pc1N0cmluZyhjYXBzLnByb2Nlc3NBcmd1bWVudHMpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gdHJ5IHRvIHBhcnNlIHRoZSBzdHJpbmcgYXMgSlNPTlxuICAgICAgICAgIGNhcHMucHJvY2Vzc0FyZ3VtZW50cyA9IEpTT04ucGFyc2UoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgICB2ZXJpZnlQcm9jZXNzQXJndW1lbnQoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgbG9nLmVycm9yQW5kVGhyb3coYHByb2Nlc3NBcmd1bWVudHMgbXVzdCBiZSBhIGpzb24gZm9ybWF0IG9yIGFuIG9iamVjdCB3aXRoIGZvcm1hdCB7YXJncyA6IFtdLCBlbnYgOiB7YTpiLCBjOmR9fS4gYCArXG4gICAgICAgICAgICBgQm90aCBlbnZpcm9ubWVudCBhbmQgYXJndW1lbnQgY2FuIGJlIG51bGwuIEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKSkge1xuICAgICAgICB2ZXJpZnlQcm9jZXNzQXJndW1lbnQoY2Fwcy5wcm9jZXNzQXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5lcnJvckFuZFRocm93KGAncHJvY2Vzc0FyZ3VtZW50cyBtdXN0IGJlIGFuIG9iamVjdCwgb3IgYSBzdHJpbmcgSlNPTiBvYmplY3Qgd2l0aCBmb3JtYXQge2FyZ3MgOiBbXSwgZW52IDoge2E6YiwgYzpkfX0uIGAgK1xuICAgICAgICAgIGBCb3RoIGVudmlyb25tZW50IGFuZCBhcmd1bWVudCBjYW4gYmUgbnVsbC5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0aGVyZSBpcyBubyBwb2ludCBpbiBoYXZpbmcgYGtleWNoYWluUGF0aGAgd2l0aG91dCBga2V5Y2hhaW5QYXNzd29yZGBcbiAgICBpZiAoKGNhcHMua2V5Y2hhaW5QYXRoICYmICFjYXBzLmtleWNoYWluUGFzc3dvcmQpIHx8ICghY2Fwcy5rZXljaGFpblBhdGggJiYgY2Fwcy5rZXljaGFpblBhc3N3b3JkKSkge1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3coYElmICdrZXljaGFpblBhdGgnIGlzIHNldCwgJ2tleWNoYWluUGFzc3dvcmQnIG11c3QgYWxzbyBiZSBzZXQgKGFuZCB2aWNlIHZlcnNhKS5gKTtcbiAgICB9XG5cbiAgICAvLyBgcmVzZXRPblNlc3Npb25TdGFydE9ubHlgIHNob3VsZCBiZSBzZXQgdG8gdHJ1ZSBieSBkZWZhdWx0XG4gICAgdGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5ID0gIXV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnJlc2V0T25TZXNzaW9uU3RhcnRPbmx5KSB8fCB0aGlzLm9wdHMucmVzZXRPblNlc3Npb25TdGFydE9ubHk7XG4gICAgdGhpcy5vcHRzLnVzZU5ld1dEQSA9IHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnVzZU5ld1dEQSkgPyB0aGlzLm9wdHMudXNlTmV3V0RBIDogZmFsc2U7XG5cbiAgICBpZiAoY2Fwcy5jb21tYW5kVGltZW91dHMpIHtcbiAgICAgIGNhcHMuY29tbWFuZFRpbWVvdXRzID0gbm9ybWFsaXplQ29tbWFuZFRpbWVvdXRzKGNhcHMuY29tbWFuZFRpbWVvdXRzKTtcbiAgICB9XG5cbiAgICBpZiAoXy5pc1N0cmluZyhjYXBzLndlYkRyaXZlckFnZW50VXJsKSkge1xuICAgICAgY29uc3Qge3Byb3RvY29sLCBob3N0fSA9IHVybC5wYXJzZShjYXBzLndlYkRyaXZlckFnZW50VXJsKTtcbiAgICAgIGlmIChfLmlzRW1wdHkocHJvdG9jb2wpIHx8IF8uaXNFbXB0eShob3N0KSkge1xuICAgICAgICBsb2cuZXJyb3JBbmRUaHJvdyhgJ3dlYkRyaXZlckFnZW50VXJsJyBjYXBhYmlsaXR5IGlzIGV4cGVjdGVkIHRvIGNvbnRhaW4gYSB2YWxpZCBXZWJEcml2ZXJBZ2VudCBzZXJ2ZXIgVVJMLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCcke2NhcHMud2ViRHJpdmVyQWdlbnRVcmx9JyBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcHMuYnJvd3Nlck5hbWUpIHtcbiAgICAgIGlmIChjYXBzLmJ1bmRsZUlkKSB7XG4gICAgICAgIGxvZy5lcnJvckFuZFRocm93KGAnYnJvd3Nlck5hbWUnIGNhbm5vdCBiZSBzZXQgdG9nZXRoZXIgd2l0aCAnYnVuZGxlSWQnIGNhcGFiaWxpdHlgKTtcbiAgICAgIH1cbiAgICAgIC8vIHdhcm4gaWYgdGhlIGNhcGFiaWxpdGllcyBoYXZlIGJvdGggYGFwcGAgYW5kIGBicm93c2VyLCBhbHRob3VnaCB0aGlzXG4gICAgICAvLyBpcyBjb21tb24gd2l0aCBzZWxlbml1bSBncmlkXG4gICAgICBpZiAoY2Fwcy5hcHApIHtcbiAgICAgICAgbG9nLndhcm4oYFRoZSBjYXBhYmlsaXRpZXMgc2hvdWxkIGdlbmVyYWxseSBub3QgaW5jbHVkZSBib3RoIGFuICdhcHAnIGFuZCBhICdicm93c2VyTmFtZSdgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2Fwcy5wZXJtaXNzaW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCBbYnVuZGxlSWQsIHBlcm1zXSBvZiBfLnRvUGFpcnMoSlNPTi5wYXJzZShjYXBzLnBlcm1pc3Npb25zKSkpIHtcbiAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcoYnVuZGxlSWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KGJ1bmRsZUlkKX0nIG11c3QgYmUgYSBzdHJpbmdgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFfLmlzUGxhaW5PYmplY3QocGVybXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke0pTT04uc3RyaW5naWZ5KHBlcm1zKX0nIG11c3QgYmUgYSBKU09OIG9iamVjdGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBsb2cuZXJyb3JBbmRUaHJvdyhgJyR7Y2Fwcy5wZXJtaXNzaW9uc30nIGlzIGV4cGVjdGVkIHRvIGJlIGEgdmFsaWQgb2JqZWN0IHdpdGggZm9ybWF0IGAgK1xuICAgICAgICAgIGB7XCI8YnVuZGxlSWQxPlwiOiB7XCI8c2VydmljZU5hbWUxPlwiOiBcIjxzZXJ2aWNlU3RhdHVzMT5cIiwgLi4ufSwgLi4ufS4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGZpbmFsbHksIHJldHVybiB0cnVlIHNpbmNlIHRoZSBzdXBlcmNsYXNzIGNoZWNrIHBhc3NlZCwgYXMgZGlkIHRoaXNcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIGluc3RhbGxBVVQgKCkge1xuICAgIGlmICh0aGlzLmlzU2FmYXJpKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gaWYgdXNlciBoYXMgcGFzc2VkIGluIGRlc2lyZWRDYXBzLmF1dG9MYXVuY2ggPSBmYWxzZVxuICAgIC8vIG1lYW5pbmcgdGhleSB3aWxsIG1hbmFnZSBhcHAgaW5zdGFsbCAvIGxhdW5jaGluZ1xuICAgIGlmICh0aGlzLm9wdHMuYXV0b0xhdW5jaCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdmVyaWZ5QXBwbGljYXRpb25QbGF0Zm9ybSh0aGlzLm9wdHMuYXBwLCB0aGlzLmlzU2ltdWxhdG9yKCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gVE9ETzogTGV0IGl0IHRocm93IGFmdGVyIHdlIGNvbmZpcm0gdGhlIGFyY2hpdGVjdHVyZSB2ZXJpZmljYXRpb24gYWxnb3JpdGhtIGlzIHN0YWJsZVxuICAgICAgbG9nLndhcm4oYCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgbG9nLndhcm4oYCR7dGhpcy5pc1NpbXVsYXRvcigpID8gJ1NpbXVsYXRvcicgOiAnUmVhbCBkZXZpY2UnfSBhcmNoaXRlY3R1cmUgYXBwZWFycyB0byBiZSB1bnN1cHBvcnRlZCBgICtcbiAgICAgICAgICAgICAgIGBieSB0aGUgJyR7dGhpcy5vcHRzLmFwcH0nIGFwcGxpY2F0aW9uLiBgICtcbiAgICAgICAgICAgICAgIGBNYWtlIHN1cmUgdGhlIGNvcnJlY3QgZGVwbG95bWVudCB0YXJnZXQgaGFzIGJlZW4gc2VsZWN0ZWQgZm9yIGl0cyBjb21waWxhdGlvbiBpbiBYY29kZS5gKTtcbiAgICAgIGxvZy53YXJuKCdEb25cXCd0IGJlIHN1cnByaXNlZCBpZiB0aGUgYXBwbGljYXRpb24gZmFpbHMgdG8gbGF1bmNoLicpO1xuICAgICAgbG9nLndhcm4oYCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCBpbnN0YWxsVG9SZWFsRGV2aWNlKHRoaXMub3B0cy5kZXZpY2UsIHRoaXMub3B0cy5hcHAsIHRoaXMub3B0cy5idW5kbGVJZCwgdGhpcy5vcHRzLm5vUmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBpbnN0YWxsVG9TaW11bGF0b3IodGhpcy5vcHRzLmRldmljZSwgdGhpcy5vcHRzLmFwcCwgdGhpcy5vcHRzLmJ1bmRsZUlkLCB0aGlzLm9wdHMubm9SZXNldCk7XG4gICAgfVxuXG4gICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLmlvc0luc3RhbGxQYXVzZSkpIHtcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy82ODg5XG4gICAgICBsZXQgcGF1c2UgPSBwYXJzZUludCh0aGlzLm9wdHMuaW9zSW5zdGFsbFBhdXNlLCAxMCk7XG4gICAgICBsb2cuZGVidWcoYGlvc0luc3RhbGxQYXVzZSBzZXQuIFBhdXNpbmcgJHtwYXVzZX0gbXMgYmVmb3JlIGNvbnRpbnVpbmdgKTtcbiAgICAgIGF3YWl0IEIuZGVsYXkocGF1c2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldEluaXRpYWxPcmllbnRhdGlvbiAob3JpZW50YXRpb24pIHtcbiAgICBpZiAoIV8uaXNTdHJpbmcob3JpZW50YXRpb24pKSB7XG4gICAgICBsb2cuaW5mbygnU2tpcHBpbmcgc2V0dGluZyBvZiB0aGUgaW5pdGlhbCBkaXNwbGF5IG9yaWVudGF0aW9uLiAnICtcbiAgICAgICAgJ1NldCB0aGUgXCJvcmllbnRhdGlvblwiIGNhcGFiaWxpdHkgdG8gZWl0aGVyIFwiTEFORFNDQVBFXCIgb3IgXCJQT1JUUkFJVFwiLCBpZiB0aGlzIGlzIGFuIHVuZGVzaXJlZCBiZWhhdmlvci4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghXy5pbmNsdWRlcyhbJ0xBTkRTQ0FQRScsICdQT1JUUkFJVCddLCBvcmllbnRhdGlvbikpIHtcbiAgICAgIGxvZy5kZWJ1ZyhgVW5hYmxlIHRvIHNldCBpbml0aWFsIG9yaWVudGF0aW9uIHRvICcke29yaWVudGF0aW9ufSdgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBTZXR0aW5nIGluaXRpYWwgb3JpZW50YXRpb24gdG8gJyR7b3JpZW50YXRpb259J2ApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL29yaWVudGF0aW9uJywgJ1BPU1QnLCB7b3JpZW50YXRpb259KTtcbiAgICAgIHRoaXMub3B0cy5jdXJPcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nLndhcm4oYFNldHRpbmcgaW5pdGlhbCBvcmllbnRhdGlvbiBmYWlsZWQgd2l0aDogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0Q29tbWFuZFRpbWVvdXQgKGNtZE5hbWUpIHtcbiAgICBpZiAodGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cykge1xuICAgICAgaWYgKGNtZE5hbWUgJiYgXy5oYXModGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0cywgY21kTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0cy5jb21tYW5kVGltZW91dHNbY21kTmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5vcHRzLmNvbW1hbmRUaW1lb3V0c1tERUZBVUxUX1RJTUVPVVRfS0VZXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlc3Npb24gY2FwYWJpbGl0aWVzIG1lcmdlZCB3aXRoIHdoYXQgV0RBIHJlcG9ydHNcbiAgICogVGhpcyBpcyBhIGxpYnJhcnkgY29tbWFuZCBidXQgbmVlZHMgdG8gY2FsbCAnc3VwZXInIHNvIGNhbid0IGJlIG9uXG4gICAqIGEgaGVscGVyIG9iamVjdFxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbiAoKSB7XG4gICAgLy8gY2FsbCBzdXBlciB0byBnZXQgZXZlbnQgdGltaW5ncywgZXRjLi4uXG4gICAgY29uc3QgZHJpdmVyU2Vzc2lvbiA9IGF3YWl0IHN1cGVyLmdldFNlc3Npb24oKTtcbiAgICBpZiAoIXRoaXMud2RhQ2Fwcykge1xuICAgICAgdGhpcy53ZGFDYXBzID0gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy8nLCAnR0VUJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5kZXZpY2VDYXBzKSB7XG4gICAgICBjb25zdCB7c3RhdHVzQmFyU2l6ZSwgc2NhbGV9ID0gYXdhaXQgdGhpcy5nZXRTY3JlZW5JbmZvKCk7XG4gICAgICB0aGlzLmRldmljZUNhcHMgPSB7XG4gICAgICAgIHBpeGVsUmF0aW86IHNjYWxlLFxuICAgICAgICBzdGF0QmFySGVpZ2h0OiBzdGF0dXNCYXJTaXplLmhlaWdodCxcbiAgICAgICAgdmlld3BvcnRSZWN0OiBhd2FpdCB0aGlzLmdldFZpZXdwb3J0UmVjdCgpLFxuICAgICAgfTtcbiAgICB9XG4gICAgbG9nLmluZm8oXCJNZXJnaW5nIFdEQSBjYXBzIG92ZXIgQXBwaXVtIGNhcHMgZm9yIHNlc3Npb24gZGV0YWlsIHJlc3BvbnNlXCIpO1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt1ZGlkOiB0aGlzLm9wdHMudWRpZH0sIGRyaXZlclNlc3Npb24sXG4gICAgICB0aGlzLndkYUNhcHMuY2FwYWJpbGl0aWVzLCB0aGlzLmRldmljZUNhcHMpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRJV0RQICgpIHtcbiAgICB0aGlzLmxvZ0V2ZW50KCdpd2RwU3RhcnRpbmcnKTtcbiAgICB0aGlzLml3ZHBTZXJ2ZXIgPSBuZXcgSVdEUCh0aGlzLm9wdHMud2Via2l0RGVidWdQcm94eVBvcnQsIHRoaXMub3B0cy51ZGlkKTtcbiAgICBhd2FpdCB0aGlzLml3ZHBTZXJ2ZXIuc3RhcnQoKTtcbiAgICB0aGlzLmxvZ0V2ZW50KCdpd2RwU3RhcnRlZCcpO1xuICB9XG5cbiAgYXN5bmMgc3RvcElXRFAgKCkge1xuICAgIGlmICh0aGlzLml3ZHBTZXJ2ZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMuaXdkcFNlcnZlci5zdG9wKCk7XG4gICAgICBkZWxldGUgdGhpcy5pd2RwU2VydmVyO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0ICgpIHtcbiAgICBpZiAodGhpcy5vcHRzLm5vUmVzZXQpIHtcbiAgICAgIC8vIFRoaXMgaXMgdG8gbWFrZSBzdXJlIHJlc2V0IGhhcHBlbnMgZXZlbiBpZiBub1Jlc2V0IGlzIHNldCB0byB0cnVlXG4gICAgICBsZXQgb3B0cyA9IF8uY2xvbmVEZWVwKHRoaXMub3B0cyk7XG4gICAgICBvcHRzLm5vUmVzZXQgPSBmYWxzZTtcbiAgICAgIG9wdHMuZnVsbFJlc2V0ID0gZmFsc2U7XG4gICAgICBjb25zdCBzaHV0ZG93bkhhbmRsZXIgPSB0aGlzLnJlc2V0T25VbmV4cGVjdGVkU2h1dGRvd247XG4gICAgICB0aGlzLnJlc2V0T25VbmV4cGVjdGVkU2h1dGRvd24gPSAoKSA9PiB7fTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMucnVuUmVzZXQob3B0cyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLnJlc2V0T25VbmV4cGVjdGVkU2h1dGRvd24gPSBzaHV0ZG93bkhhbmRsZXI7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLnJlc2V0KCk7XG4gIH1cbn1cblxuT2JqZWN0LmFzc2lnbihYQ1VJVGVzdERyaXZlci5wcm90b3R5cGUsIGNvbW1hbmRzKTtcblxuZXhwb3J0IGRlZmF1bHQgWENVSVRlc3REcml2ZXI7XG5leHBvcnQgeyBYQ1VJVGVzdERyaXZlciB9O1xuIl0sImZpbGUiOiJsaWIvZHJpdmVyLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
