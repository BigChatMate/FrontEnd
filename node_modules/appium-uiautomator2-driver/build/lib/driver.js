"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.AndroidUiautomator2Driver = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _lodash = _interopRequireDefault(require("lodash"));

var _appiumBaseDriver = require("appium-base-driver");

var _uiautomator = _interopRequireDefault(require("./uiautomator2"));

var _appiumSupport = require("appium-support");

var _asyncbox = require("asyncbox");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _logger = _interopRequireDefault(require("./logger"));

var _index = _interopRequireDefault(require("./commands/index"));

var _appiumAdb = require("appium-adb");

var _helpers = _interopRequireDefault(require("./helpers"));

var _appiumAndroidDriver = require("appium-android-driver");

var _desiredCaps = _interopRequireDefault(require("./desired-caps"));

var _portscanner = require("portscanner");

const helpers = Object.assign({}, _helpers.default, _appiumAndroidDriver.androidHelpers);
const SYSTEM_PORT_RANGE = [8200, 8299];
const DEVICE_PORT = 6790;
const NO_PROXY = [['GET', new RegExp('^/session/(?!.*/)')], ['GET', new RegExp('^/session/[^/]+/alert_[^/]+')], ['GET', new RegExp('^/session/[^/]+/alert/[^/]+')], ['GET', new RegExp('^/session/[^/]+/appium/[^/]+/current_activity')], ['GET', new RegExp('^/session/[^/]+/appium/[^/]+/current_package')], ['GET', new RegExp('^/session/[^/]+/appium/app/[^/]+')], ['GET', new RegExp('^/session/[^/]+/appium/device/[^/]+')], ['GET', new RegExp('^/session/[^/]+/appium/settings')], ['GET', new RegExp('^/session/[^/]+/context')], ['GET', new RegExp('^/session/[^/]+/contexts')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/attribute')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/displayed')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/enabled')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/location_in_view')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/name')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/screenshot')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/selected')], ['GET', new RegExp('^/session/[^/]+/ime/[^/]+')], ['GET', new RegExp('^/session/[^/]+/location')], ['GET', new RegExp('^/session/[^/]+/log/types')], ['GET', new RegExp('^/session/[^/]+/network_connection')], ['GET', new RegExp('^/session/[^/]+/screenshot')], ['GET', new RegExp('^/session/[^/]+/timeouts')], ['GET', new RegExp('^/session/[^/]+/url')], ['POST', new RegExp('^/session/[^/]+/[^/]+_alert$')], ['POST', new RegExp('^/session/[^/]+/actions')], ['POST', new RegExp('^/session/[^/]+/alert/[^/]+')], ['POST', new RegExp('^/session/[^/]+/app/[^/]')], ['POST', new RegExp('^/session/[^/]+/appium/[^/]+/start_activity')], ['POST', new RegExp('^/session/[^/]+/appium/app/[^/]+')], ['POST', new RegExp('^/session/[^/]+/appium/compare_images')], ['POST', new RegExp('^/session/[^/]+/appium/device/(?!set_clipboard|get_clipboard)[^/]+')], ['POST', new RegExp('^/session/[^/]+/appium/element/[^/]+/replace_value')], ['POST', new RegExp('^/session/[^/]+/appium/element/[^/]+/value')], ['POST', new RegExp('^/session/[^/]+/appium/getPerformanceData')], ['POST', new RegExp('^/session/[^/]+/appium/performanceData/types')], ['POST', new RegExp('^/session/[^/]+/appium/settings')], ['POST', new RegExp('^/session/[^/]+/appium/start_recording_screen')], ['POST', new RegExp('^/session/[^/]+/appium/stop_recording_screen')], ['POST', new RegExp('^/session/[^/]+/context')], ['POST', new RegExp('^/session/[^/]+/element')], ['POST', new RegExp('^/session/[^/]+/ime/[^/]+')], ['POST', new RegExp('^/session/[^/]+/keys')], ['POST', new RegExp('^/session/[^/]+/location')], ['POST', new RegExp('^/session/[^/]+/log')], ['POST', new RegExp('^/session/[^/]+/network_connection')], ['POST', new RegExp('^/session/[^/]+/timeouts')], ['POST', new RegExp('^/session/[^/]+/touch/multi/perform')], ['POST', new RegExp('^/session/[^/]+/touch/perform')], ['POST', new RegExp('^/session/[^/]+/url')], ['POST', new RegExp('^/session/[^/]+/execute')], ['POST', new RegExp('^/session/[^/]+/execute_async')], ['GET', new RegExp('^/session/[^/]+/window/rect')], ['POST', new RegExp('^/session/[^/]+/execute/async')], ['POST', new RegExp('^/session/[^/]+/execute/sync')]];
const CHROME_NO_PROXY = [['GET', new RegExp('^/session/[^/]+/appium')], ['GET', new RegExp('^/session/[^/]+/context')], ['GET', new RegExp('^/session/[^/]+/element/[^/]+/rect')], ['GET', new RegExp('^/session/[^/]+/orientation')], ['POST', new RegExp('^/session/[^/]+/appium')], ['POST', new RegExp('^/session/[^/]+/context')], ['POST', new RegExp('^/session/[^/]+/orientation')], ['POST', new RegExp('^/session/[^/]+/touch/multi/perform')], ['POST', new RegExp('^/session/[^/]+/touch/perform')]];
const APK_EXTENSION = '.apk';
const APKS_EXTENSION = '.apks';
const MEMOIZED_FUNCTIONS = ['getStatusBarHeight', 'getDevicePixelRatio'];

class AndroidUiautomator2Driver extends _appiumBaseDriver.BaseDriver {
  constructor(opts = {}, shouldValidateCaps = true) {
    delete opts.shell;
    super(opts, shouldValidateCaps);
    this.locatorStrategies = ['xpath', 'id', 'class name', 'accessibility id', '-android uiautomator'];
    this.desiredCapConstraints = _desiredCaps.default;
    this.uiautomator2 = null;
    this.jwpProxyActive = false;
    this.defaultIME = null;
    this.jwpProxyAvoid = NO_PROXY;
    this.apkStrings = {};
    this.settings = new _appiumBaseDriver.DeviceSettings({
      ignoreUnimportantViews: false,
      allowInvisibleElements: false
    }, this.onSettingsUpdate.bind(this));
    this.chromedriver = null;
    this.sessionChromedrivers = {};

    for (var _i = 0; _i < MEMOIZED_FUNCTIONS.length; _i++) {
      const fn = MEMOIZED_FUNCTIONS[_i];
      this[fn] = _lodash.default.memoize(this[fn]);
    }
  }

  validateDesiredCaps(caps) {
    return super.validateDesiredCaps(caps) && _appiumAndroidDriver.androidHelpers.validateDesiredCaps(caps);
  }

  createSession(...args) {
    var _this = this,
        _superprop_callCreateSession = (..._args) => super.createSession(..._args);

    return (0, _asyncToGenerator2.default)(function* () {
      try {
        let _ref = yield _superprop_callCreateSession(...args),
            _ref2 = (0, _slicedToArray2.default)(_ref, 2),
            sessionId = _ref2[0],
            caps = _ref2[1];

        let serverDetails = {
          platform: 'LINUX',
          webStorageEnabled: false,
          takesScreenshot: true,
          javascriptEnabled: true,
          databaseEnabled: false,
          networkConnectionEnabled: true,
          locationContextEnabled: false,
          warnings: {},
          desired: _this.caps
        };
        _this.caps = Object.assign(serverDetails, _this.caps);
        _this.curContext = _this.defaultContextName();
        let defaultOpts = {
          fullReset: false,
          autoLaunch: true,
          adbPort: _appiumAdb.DEFAULT_ADB_PORT,
          androidInstallTimeout: 90000
        };

        _lodash.default.defaults(_this.opts, defaultOpts);

        if (_this.isChromeSession) {
          _logger.default.info("We're going to run a Chrome-based session");

          let _helpers$getChromePkg = helpers.getChromePkg(_this.opts.browserName),
              pkg = _helpers$getChromePkg.pkg,
              activity = _helpers$getChromePkg.activity;

          _this.opts.appPackage = _this.caps.appPackage = pkg;
          _this.opts.appActivity = _this.caps.appActivity = activity;

          _logger.default.info(`Chrome-type package and activity are ${pkg} and ${activity}`);
        }

        if (_this.opts.reboot) {
          _this.setAvdFromCapabilities(caps);
        }

        if (_this.opts.app) {
          _this.opts.app = yield _this.helpers.configureApp(_this.opts.app, [APK_EXTENSION, APKS_EXTENSION]);
          yield _this.checkAppPresent();
        } else if (_this.appOnDevice) {
          _logger.default.info(`App file was not listed, instead we're going to run ` + `${_this.opts.appPackage} directly on the device`);

          yield _this.checkPackagePresent();
        }

        _this.opts.systemPort = _this.opts.systemPort || (yield (0, _portscanner.findAPortNotInUse)(SYSTEM_PORT_RANGE[0], SYSTEM_PORT_RANGE[1]));
        _this.opts.adbPort = _this.opts.adbPort || _appiumAdb.DEFAULT_ADB_PORT;
        yield _this.startUiAutomator2Session();
        yield _this.fillDeviceDetails();

        if (_this.opts.mjpegScreenshotUrl) {
          _logger.default.info(`Starting MJPEG stream reading URL: '${_this.opts.mjpegScreenshotUrl}'`);

          _this.mjpegStream = new _appiumSupport.mjpeg.MJpegStream(_this.opts.mjpegScreenshotUrl);
          yield _this.mjpegStream.start();
        }

        return [sessionId, _this.caps];
      } catch (e) {
        yield _this.deleteSession();
        throw e;
      }
    })();
  }

  fillDeviceDetails() {
    var _this2 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this2.caps.pixelRatio = yield _this2.getDevicePixelRatio();
      _this2.caps.statBarHeight = yield _this2.getStatusBarHeight();
      _this2.caps.viewportRect = yield _this2.getViewPortRect();
    })();
  }

  get driverData() {
    return {};
  }

  getSession() {
    var _this3 = this,
        _superprop_callGetSession = (..._args2) => super.getSession(..._args2);

    return (0, _asyncToGenerator2.default)(function* () {
      let sessionData = yield _superprop_callGetSession();

      _logger.default.debug("Getting session details from server to mix in");

      let uia2Data = yield _this3.uiautomator2.jwproxy.command('/', 'GET', {});
      return Object.assign({}, sessionData, uia2Data);
    })();
  }

  isEmulator() {
    return !!(this.opts.avd || /emulator/.test(this.opts.udid));
  }

  setAvdFromCapabilities(caps) {
    if (this.opts.avd) {
      _logger.default.info('avd name defined, ignoring device name and platform version');
    } else {
      if (!caps.deviceName) {
        _logger.default.errorAndThrow('avd or deviceName should be specified when reboot option is enables');
      }

      if (!caps.platformVersion) {
        _logger.default.errorAndThrow('avd or platformVersion should be specified when reboot option is enabled');
      }

      let avdDevice = caps.deviceName.replace(/[^a-zA-Z0-9_.]/g, "-");
      this.opts.avd = `${avdDevice}__${caps.platformVersion}`;
    }
  }

  startUiAutomator2Session() {
    var _this4 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (!_this4.opts.javaVersion) {
        _this4.opts.javaVersion = yield helpers.getJavaVersion();
      }

      let _ref3 = yield helpers.getDeviceInfoFromCaps(_this4.opts),
          udid = _ref3.udid,
          emPort = _ref3.emPort;

      _this4.opts.udid = udid;
      _this4.opts.emPort = emPort;
      _this4.adb = yield _appiumAndroidDriver.androidHelpers.createADB(_this4.opts);
      const apiLevel = yield _this4.adb.getApiLevel();

      if (apiLevel < 21) {
        _logger.default.errorAndThrow('UIAutomation2 is only supported since Android 5.0 (Lollipop). ' + 'You could still use other supported backends in order to automate older Android versions.');
      }

      if (apiLevel >= 28) {
        _logger.default.warn('Relaxing hidden api policy');

        yield _this4.adb.setHiddenApiPolicy('1');
      }

      let appInfo = yield helpers.getLaunchInfo(_this4.adb, _this4.opts);
      Object.assign(_this4.opts, appInfo);
      _this4.caps.deviceName = _this4.adb.curDeviceId;
      _this4.caps.deviceUDID = _this4.opts.udid;
      yield _this4.initUiAutomator2Server();
      _this4.defaultIME = yield helpers.initDevice(_this4.adb, _this4.opts);

      _logger.default.debug(`Forwarding UiAutomator2 Server port ${DEVICE_PORT} to ${_this4.opts.systemPort}`);

      yield _this4.adb.forwardPort(_this4.opts.systemPort, DEVICE_PORT);

      if (_this4.opts.autoLaunch) {
        yield _this4.initAUT();
      }

      if (!_this4.caps.appPackage && appInfo) {
        _this4.caps.appPackage = appInfo.appPackage;
      }

      yield _this4.uiautomator2.startSession(_this4.caps);
      yield _this4.addDeviceInfoToCaps();

      if (!_this4.opts.skipUnlock) {
        yield helpers.unlock(_this4, _this4.adb, _this4.caps);
      } else {
        _logger.default.debug(`'skipUnlock' capability set, so skipping device unlock`);
      }

      if (_this4.opts.autoLaunch) {
        yield _this4.ensureAppStarts();
      }

      if (_appiumSupport.util.hasValue(_this4.opts.orientation)) {
        _logger.default.debug(`Setting initial orientation to '${_this4.opts.orientation}'`);

        yield _this4.setOrientation(_this4.opts.orientation);
      }

      if (_this4.opts.autoWebview) {
        const viewName = _this4.defaultWebviewName();

        const timeout = _this4.opts.autoWebviewTimeout || 2000;

        _logger.default.info(`Setting auto webview to context '${viewName}' with timeout ${timeout}ms`);

        yield (0, _asyncbox.retryInterval)(timeout / 500, 500, _this4.setContext.bind(_this4), viewName);
      }

      if (_this4.isChromeSession) {
        yield _this4.startChromeSession(_this4);
      }

      _this4.jwpProxyActive = true;
    })();
  }

  addDeviceInfoToCaps() {
    var _this5 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      const _ref4 = yield _this5.mobileGetDeviceInfo(),
            apiVersion = _ref4.apiVersion,
            platformVersion = _ref4.platformVersion,
            manufacturer = _ref4.manufacturer,
            model = _ref4.model,
            realDisplaySize = _ref4.realDisplaySize,
            displayDensity = _ref4.displayDensity;

      _this5.caps.deviceApiLevel = parseInt(apiVersion, 10);
      _this5.caps.platformVersion = platformVersion;
      _this5.caps.deviceScreenSize = realDisplaySize;
      _this5.caps.deviceScreenDensity = displayDensity;
      _this5.caps.deviceModel = model;
      _this5.caps.deviceManufacturer = manufacturer;
    })();
  }

  initUiAutomator2Server() {
    var _this6 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _this6.uiautomator2 = new _uiautomator.default({
        host: _this6.opts.remoteAdbHost || _this6.opts.host || 'localhost',
        systemPort: _this6.opts.systemPort,
        devicePort: DEVICE_PORT,
        adb: _this6.adb,
        apk: _this6.opts.app,
        tmpDir: _this6.opts.tmpDir,
        appPackage: _this6.opts.appPackage,
        appActivity: _this6.opts.appActivity,
        disableWindowAnimation: !!_this6.opts.disableWindowAnimation
      });
      _this6.proxyReqRes = _this6.uiautomator2.proxyReqRes.bind(_this6.uiautomator2);
      yield _this6.uiautomator2.killUiAutomatorOnDevice();
      yield _this6.uiautomator2.installServerApk(_this6.opts.uiautomator2ServerInstallTimeout);
    })();
  }

  initAUT() {
    var _this7 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      if (_this7.opts.otherApps) {
        let otherApps;

        try {
          otherApps = helpers.parseArray(_this7.opts.otherApps);
        } catch (e) {
          _logger.default.errorAndThrow(`Could not parse "otherApps" capability: ${e.message}`);
        }

        otherApps = yield _bluebird.default.all(otherApps.map(app => _this7.helpers.configureApp(app, [APK_EXTENSION, APKS_EXTENSION])));
        yield helpers.installOtherApks(otherApps, _this7.adb, _this7.opts);
      }

      if (!_this7.opts.app) {
        if (_this7.opts.fullReset) {
          _logger.default.errorAndThrow('Full reset requires an app capability, use fastReset if app is not provided');
        }

        _logger.default.debug('No app capability. Assuming it is already on the device');

        if (_this7.opts.fastReset) {
          yield helpers.resetApp(_this7.adb, _this7.opts);
        }
      }

      if (!_this7.opts.skipUninstall) {
        yield _this7.adb.uninstallApk(_this7.opts.appPackage);
      }

      if (!_this7.opts.noSign) {
        let signed = yield _this7.adb.checkApkCert(_this7.opts.app, _this7.opts.appPackage);

        if (!signed && _this7.opts.app) {
          yield _this7.adb.sign(_this7.opts.app, _this7.opts.appPackage);
        }
      }

      if (_this7.opts.app) {
        yield helpers.installApk(_this7.adb, _this7.opts);
      }
    })();
  }

  ensureAppStarts() {
    var _this8 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      let appWaitPackage = _this8.opts.appWaitPackage || _this8.opts.appPackage;
      let appWaitActivity = _this8.opts.appWaitActivity || _this8.opts.appActivity;

      _logger.default.info(`UiAutomator2 did not start the activity we were waiting for, ` + `'${appWaitPackage}/${appWaitActivity}'. Starting it ourselves`);

      if (_this8.caps.androidCoverage) {
        _logger.default.info(`androidCoverage is configured. ` + ` Starting instrumentation of '${_this8.caps.androidCoverage}'...`);

        yield _this8.adb.androidCoverage(_this8.caps.androidCoverage, appWaitPackage, appWaitActivity);
      } else {
        yield _this8.adb.startApp({
          pkg: _this8.opts.appPackage,
          activity: _this8.opts.appActivity,
          action: _this8.opts.intentAction,
          category: _this8.opts.intentCategory,
          flags: _this8.opts.intentFlags,
          waitPkg: _this8.opts.appWaitPackage,
          waitActivity: _this8.opts.appWaitActivity,
          optionalIntentArguments: _this8.opts.optionalIntentArguments,
          stopApp: !_this8.opts.dontStopAppOnReset,
          retry: true
        });
      }
    })();
  }

  deleteSession() {
    var _this9 = this,
        _superprop_callDeleteSession = (..._args3) => super.deleteSession(..._args3);

    return (0, _asyncToGenerator2.default)(function* () {
      _logger.default.debug('Deleting UiAutomator2 session');

      yield _appiumAndroidDriver.androidHelpers.removeAllSessionWebSocketHandlers(_this9.server, _this9.sessionId);

      if (_this9.uiautomator2) {
        try {
          yield _this9.stopChromedriverProxies();
        } catch (err) {
          _logger.default.warn(`Unable to stop ChromeDriver proxies: ${err.message}`);
        }

        if (_this9.jwpProxyActive) {
          try {
            yield _this9.uiautomator2.deleteSession();
          } catch (err) {
            _logger.default.warn(`Unable to proxy deleteSession to UiAutomator2: ${err.message}`);
          }
        }

        _this9.uiautomator2 = null;
      }

      _this9.jwpProxyActive = false;

      if (_this9.adb) {
        if (_this9.opts.unicodeKeyboard && _this9.opts.resetKeyboard && _this9.defaultIME) {
          _logger.default.debug(`Resetting IME to '${_this9.defaultIME}'`);

          try {
            yield _this9.adb.setIME(_this9.defaultIME);
          } catch (err) {
            _logger.default.warn(`Unable to reset IME: ${err.message}`);
          }
        }

        if (_this9.caps.androidCoverage) {
          _logger.default.info('Shutting down the adb process of instrumentation...');

          yield _this9.adb.endAndroidCoverage();

          if (_this9.caps.androidCoverageEndIntent) {
            _logger.default.info(`Sending intent broadcast '${_this9.caps.androidCoverageEndIntent}' at the end of instrumenting.`);

            yield _this9.adb.broadcast(_this9.caps.androidCoverageEndIntent);
          } else {
            _logger.default.warn('No androidCoverageEndIntent is configured in caps. Possibly you cannot get coverage file.');
          }
        }

        if (_this9.opts.appPackage) {
          try {
            yield _this9.adb.forceStop(_this9.opts.appPackage);
          } catch (err) {
            _logger.default.warn(`Unable to force stop app: ${err.message}`);
          }
        }

        if (_this9.opts.fullReset && !_this9.opts.skipUninstall && !_this9.appOnDevice) {
          _logger.default.debug(`Capability 'fullReset' set to 'true', Uninstalling '${_this9.opts.appPackage}'`);

          try {
            yield _this9.adb.uninstallApk(_this9.opts.appPackage);
          } catch (err) {
            _logger.default.warn(`Unable to uninstall app: ${err.message}`);
          }
        }

        yield _this9.adb.stopLogcat();

        if (_appiumSupport.util.hasValue(_this9.opts.systemPort)) {
          try {
            yield _this9.adb.removePortForward(_this9.opts.systemPort);
          } catch (error) {
            _logger.default.warn(`Unable to remove port forward '${error.message}'`);
          }
        }

        if ((yield _this9.adb.getApiLevel()) >= 28) {
          _logger.default.info('Restoring hidden api policy to the device default configuration');

          yield _this9.adb.setDefaultHiddenApiPolicy();
        }

        if (_this9.opts.reboot) {
          let avdName = _this9.opts.avd.replace('@', '');

          _logger.default.debug(`Closing emulator '${avdName}'`);

          try {
            yield _this9.adb.killEmulator(avdName);
          } catch (err) {
            _logger.default.warn(`Unable to close emulator: ${err.message}`);
          }
        }
      }

      if (_this9.mjpegStream) {
        _logger.default.info('Closing MJPEG stream');

        _this9.mjpegStream.stop();
      }

      yield _superprop_callDeleteSession();
    })();
  }

  checkAppPresent() {
    var _this10 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      _logger.default.debug('Checking whether app is actually present');

      if (!(yield _appiumSupport.fs.exists(_this10.opts.app))) {
        _logger.default.errorAndThrow(`Could not find app apk at '${_this10.opts.app}'`);
      }
    })();
  }

  onSettingsUpdate() {
    return (0, _asyncToGenerator2.default)(function* () {})();
  }

  wrapBootstrapDisconnect(wrapped) {
    var _this11 = this;

    return (0, _asyncToGenerator2.default)(function* () {
      yield wrapped();
      yield _this11.adb.restart();
      yield _this11.adb.forwardPort(_this11.opts.systemPort, DEVICE_PORT);
    })();
  }

  proxyActive(sessionId) {
    super.proxyActive(sessionId);
    return true;
  }

  canProxy(sessionId) {
    super.canProxy(sessionId);
    return true;
  }

  getProxyAvoidList(sessionId) {
    super.getProxyAvoidList(sessionId);

    if (_appiumSupport.util.hasValue(this.chromedriver)) {
      this.jwpProxyAvoid = CHROME_NO_PROXY;
    } else {
      this.jwpProxyAvoid = NO_PROXY;
    }

    if (this.opts.nativeWebScreenshot) {
      this.jwpProxyAvoid = [...this.jwpProxyAvoid, ['GET', new RegExp('^/session/[^/]+/screenshot')]];
    }

    return this.jwpProxyAvoid;
  }

  get isChromeSession() {
    return helpers.isChromeBrowser(this.opts.browserName);
  }

}

exports.AndroidUiautomator2Driver = AndroidUiautomator2Driver;
var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = _lodash.default.toPairs(_appiumAndroidDriver.androidCommands)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    let _step$value = (0, _slicedToArray2.default)(_step.value, 2),
        cmd = _step$value[0],
        fn = _step$value[1];

    AndroidUiautomator2Driver.prototype[cmd] = fn;
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator.return != null) {
      _iterator.return();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}

var _iteratorNormalCompletion2 = true;
var _didIteratorError2 = false;
var _iteratorError2 = undefined;

try {
  for (var _iterator2 = _lodash.default.toPairs(_index.default)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
    let _step2$value = (0, _slicedToArray2.default)(_step2.value, 2),
        cmd = _step2$value[0],
        fn = _step2$value[1];

    AndroidUiautomator2Driver.prototype[cmd] = fn;
  }
} catch (err) {
  _didIteratorError2 = true;
  _iteratorError2 = err;
} finally {
  try {
    if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
      _iterator2.return();
    }
  } finally {
    if (_didIteratorError2) {
      throw _iteratorError2;
    }
  }
}

var _default = AndroidUiautomator2Driver;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kcml2ZXIuanMiXSwibmFtZXMiOlsiaGVscGVycyIsIk9iamVjdCIsImFzc2lnbiIsInVpYXV0b21hdG9yMkhlbHBlcnMiLCJhbmRyb2lkSGVscGVycyIsIlNZU1RFTV9QT1JUX1JBTkdFIiwiREVWSUNFX1BPUlQiLCJOT19QUk9YWSIsIlJlZ0V4cCIsIkNIUk9NRV9OT19QUk9YWSIsIkFQS19FWFRFTlNJT04iLCJBUEtTX0VYVEVOU0lPTiIsIk1FTU9JWkVEX0ZVTkNUSU9OUyIsIkFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIiLCJCYXNlRHJpdmVyIiwiY29uc3RydWN0b3IiLCJvcHRzIiwic2hvdWxkVmFsaWRhdGVDYXBzIiwic2hlbGwiLCJsb2NhdG9yU3RyYXRlZ2llcyIsImRlc2lyZWRDYXBDb25zdHJhaW50cyIsInVpYXV0b21hdG9yMiIsImp3cFByb3h5QWN0aXZlIiwiZGVmYXVsdElNRSIsImp3cFByb3h5QXZvaWQiLCJhcGtTdHJpbmdzIiwic2V0dGluZ3MiLCJEZXZpY2VTZXR0aW5ncyIsImlnbm9yZVVuaW1wb3J0YW50Vmlld3MiLCJhbGxvd0ludmlzaWJsZUVsZW1lbnRzIiwib25TZXR0aW5nc1VwZGF0ZSIsImJpbmQiLCJjaHJvbWVkcml2ZXIiLCJzZXNzaW9uQ2hyb21lZHJpdmVycyIsImZuIiwiXyIsIm1lbW9pemUiLCJ2YWxpZGF0ZURlc2lyZWRDYXBzIiwiY2FwcyIsImNyZWF0ZVNlc3Npb24iLCJhcmdzIiwic2Vzc2lvbklkIiwic2VydmVyRGV0YWlscyIsInBsYXRmb3JtIiwid2ViU3RvcmFnZUVuYWJsZWQiLCJ0YWtlc1NjcmVlbnNob3QiLCJqYXZhc2NyaXB0RW5hYmxlZCIsImRhdGFiYXNlRW5hYmxlZCIsIm5ldHdvcmtDb25uZWN0aW9uRW5hYmxlZCIsImxvY2F0aW9uQ29udGV4dEVuYWJsZWQiLCJ3YXJuaW5ncyIsImRlc2lyZWQiLCJjdXJDb250ZXh0IiwiZGVmYXVsdENvbnRleHROYW1lIiwiZGVmYXVsdE9wdHMiLCJmdWxsUmVzZXQiLCJhdXRvTGF1bmNoIiwiYWRiUG9ydCIsIkRFRkFVTFRfQURCX1BPUlQiLCJhbmRyb2lkSW5zdGFsbFRpbWVvdXQiLCJkZWZhdWx0cyIsImlzQ2hyb21lU2Vzc2lvbiIsImxvZ2dlciIsImluZm8iLCJnZXRDaHJvbWVQa2ciLCJicm93c2VyTmFtZSIsInBrZyIsImFjdGl2aXR5IiwiYXBwUGFja2FnZSIsImFwcEFjdGl2aXR5IiwicmVib290Iiwic2V0QXZkRnJvbUNhcGFiaWxpdGllcyIsImFwcCIsImNvbmZpZ3VyZUFwcCIsImNoZWNrQXBwUHJlc2VudCIsImFwcE9uRGV2aWNlIiwiY2hlY2tQYWNrYWdlUHJlc2VudCIsInN5c3RlbVBvcnQiLCJzdGFydFVpQXV0b21hdG9yMlNlc3Npb24iLCJmaWxsRGV2aWNlRGV0YWlscyIsIm1qcGVnU2NyZWVuc2hvdFVybCIsIm1qcGVnU3RyZWFtIiwibWpwZWciLCJNSnBlZ1N0cmVhbSIsInN0YXJ0IiwiZSIsImRlbGV0ZVNlc3Npb24iLCJwaXhlbFJhdGlvIiwiZ2V0RGV2aWNlUGl4ZWxSYXRpbyIsInN0YXRCYXJIZWlnaHQiLCJnZXRTdGF0dXNCYXJIZWlnaHQiLCJ2aWV3cG9ydFJlY3QiLCJnZXRWaWV3UG9ydFJlY3QiLCJkcml2ZXJEYXRhIiwiZ2V0U2Vzc2lvbiIsInNlc3Npb25EYXRhIiwiZGVidWciLCJ1aWEyRGF0YSIsImp3cHJveHkiLCJjb21tYW5kIiwiaXNFbXVsYXRvciIsImF2ZCIsInRlc3QiLCJ1ZGlkIiwiZGV2aWNlTmFtZSIsImVycm9yQW5kVGhyb3ciLCJwbGF0Zm9ybVZlcnNpb24iLCJhdmREZXZpY2UiLCJyZXBsYWNlIiwiamF2YVZlcnNpb24iLCJnZXRKYXZhVmVyc2lvbiIsImdldERldmljZUluZm9Gcm9tQ2FwcyIsImVtUG9ydCIsImFkYiIsImNyZWF0ZUFEQiIsImFwaUxldmVsIiwiZ2V0QXBpTGV2ZWwiLCJ3YXJuIiwic2V0SGlkZGVuQXBpUG9saWN5IiwiYXBwSW5mbyIsImdldExhdW5jaEluZm8iLCJjdXJEZXZpY2VJZCIsImRldmljZVVESUQiLCJpbml0VWlBdXRvbWF0b3IyU2VydmVyIiwiaW5pdERldmljZSIsImZvcndhcmRQb3J0IiwiaW5pdEFVVCIsInN0YXJ0U2Vzc2lvbiIsImFkZERldmljZUluZm9Ub0NhcHMiLCJza2lwVW5sb2NrIiwidW5sb2NrIiwiZW5zdXJlQXBwU3RhcnRzIiwidXRpbCIsImhhc1ZhbHVlIiwib3JpZW50YXRpb24iLCJzZXRPcmllbnRhdGlvbiIsImF1dG9XZWJ2aWV3Iiwidmlld05hbWUiLCJkZWZhdWx0V2Vidmlld05hbWUiLCJ0aW1lb3V0IiwiYXV0b1dlYnZpZXdUaW1lb3V0Iiwic2V0Q29udGV4dCIsInN0YXJ0Q2hyb21lU2Vzc2lvbiIsIm1vYmlsZUdldERldmljZUluZm8iLCJhcGlWZXJzaW9uIiwibWFudWZhY3R1cmVyIiwibW9kZWwiLCJyZWFsRGlzcGxheVNpemUiLCJkaXNwbGF5RGVuc2l0eSIsImRldmljZUFwaUxldmVsIiwicGFyc2VJbnQiLCJkZXZpY2VTY3JlZW5TaXplIiwiZGV2aWNlU2NyZWVuRGVuc2l0eSIsImRldmljZU1vZGVsIiwiZGV2aWNlTWFudWZhY3R1cmVyIiwiVWlBdXRvbWF0b3IyU2VydmVyIiwiaG9zdCIsInJlbW90ZUFkYkhvc3QiLCJkZXZpY2VQb3J0IiwiYXBrIiwidG1wRGlyIiwiZGlzYWJsZVdpbmRvd0FuaW1hdGlvbiIsInByb3h5UmVxUmVzIiwia2lsbFVpQXV0b21hdG9yT25EZXZpY2UiLCJpbnN0YWxsU2VydmVyQXBrIiwidWlhdXRvbWF0b3IyU2VydmVySW5zdGFsbFRpbWVvdXQiLCJvdGhlckFwcHMiLCJwYXJzZUFycmF5IiwibWVzc2FnZSIsIkIiLCJhbGwiLCJtYXAiLCJpbnN0YWxsT3RoZXJBcGtzIiwiZmFzdFJlc2V0IiwicmVzZXRBcHAiLCJza2lwVW5pbnN0YWxsIiwidW5pbnN0YWxsQXBrIiwibm9TaWduIiwic2lnbmVkIiwiY2hlY2tBcGtDZXJ0Iiwic2lnbiIsImluc3RhbGxBcGsiLCJhcHBXYWl0UGFja2FnZSIsImFwcFdhaXRBY3Rpdml0eSIsImFuZHJvaWRDb3ZlcmFnZSIsInN0YXJ0QXBwIiwiYWN0aW9uIiwiaW50ZW50QWN0aW9uIiwiY2F0ZWdvcnkiLCJpbnRlbnRDYXRlZ29yeSIsImZsYWdzIiwiaW50ZW50RmxhZ3MiLCJ3YWl0UGtnIiwid2FpdEFjdGl2aXR5Iiwib3B0aW9uYWxJbnRlbnRBcmd1bWVudHMiLCJzdG9wQXBwIiwiZG9udFN0b3BBcHBPblJlc2V0IiwicmV0cnkiLCJyZW1vdmVBbGxTZXNzaW9uV2ViU29ja2V0SGFuZGxlcnMiLCJzZXJ2ZXIiLCJzdG9wQ2hyb21lZHJpdmVyUHJveGllcyIsImVyciIsInVuaWNvZGVLZXlib2FyZCIsInJlc2V0S2V5Ym9hcmQiLCJzZXRJTUUiLCJlbmRBbmRyb2lkQ292ZXJhZ2UiLCJhbmRyb2lkQ292ZXJhZ2VFbmRJbnRlbnQiLCJicm9hZGNhc3QiLCJmb3JjZVN0b3AiLCJzdG9wTG9nY2F0IiwicmVtb3ZlUG9ydEZvcndhcmQiLCJlcnJvciIsInNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kiLCJhdmROYW1lIiwia2lsbEVtdWxhdG9yIiwic3RvcCIsImZzIiwiZXhpc3RzIiwid3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QiLCJ3cmFwcGVkIiwicmVzdGFydCIsInByb3h5QWN0aXZlIiwiY2FuUHJveHkiLCJnZXRQcm94eUF2b2lkTGlzdCIsIm5hdGl2ZVdlYlNjcmVlbnNob3QiLCJpc0Nocm9tZUJyb3dzZXIiLCJ0b1BhaXJzIiwiYW5kcm9pZENvbW1hbmRzIiwiY21kIiwicHJvdG90eXBlIiwiY29tbWFuZHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSxNQUFNQSxPQUFPLEdBQUdDLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JDLGdCQUFsQixFQUF1Q0MsbUNBQXZDLENBQWhCO0FBSUEsTUFBTUMsaUJBQWlCLEdBQUcsQ0FBQyxJQUFELEVBQU8sSUFBUCxDQUExQjtBQUlBLE1BQU1DLFdBQVcsR0FBRyxJQUFwQjtBQU1BLE1BQU1DLFFBQVEsR0FBRyxDQUNmLENBQUMsS0FBRCxFQUFRLElBQUlDLE1BQUosQ0FBVyxtQkFBWCxDQUFSLENBRGUsRUFFZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsNkJBQVgsQ0FBUixDQUZlLEVBR2YsQ0FBQyxLQUFELEVBQVEsSUFBSUEsTUFBSixDQUFXLDZCQUFYLENBQVIsQ0FIZSxFQUlmLENBQUMsS0FBRCxFQUFRLElBQUlBLE1BQUosQ0FBVywrQ0FBWCxDQUFSLENBSmUsRUFLZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsOENBQVgsQ0FBUixDQUxlLEVBTWYsQ0FBQyxLQUFELEVBQVEsSUFBSUEsTUFBSixDQUFXLGtDQUFYLENBQVIsQ0FOZSxFQU9mLENBQUMsS0FBRCxFQUFRLElBQUlBLE1BQUosQ0FBVyxxQ0FBWCxDQUFSLENBUGUsRUFRZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsaUNBQVgsQ0FBUixDQVJlLEVBU2YsQ0FBQyxLQUFELEVBQVEsSUFBSUEsTUFBSixDQUFXLHlCQUFYLENBQVIsQ0FUZSxFQVVmLENBQUMsS0FBRCxFQUFRLElBQUlBLE1BQUosQ0FBVywwQkFBWCxDQUFSLENBVmUsRUFXZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcseUNBQVgsQ0FBUixDQVhlLEVBWWYsQ0FBQyxLQUFELEVBQVEsSUFBSUEsTUFBSixDQUFXLHlDQUFYLENBQVIsQ0FaZSxFQWFmLENBQUMsS0FBRCxFQUFRLElBQUlBLE1BQUosQ0FBVyx1Q0FBWCxDQUFSLENBYmUsRUFjZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsZ0RBQVgsQ0FBUixDQWRlLEVBZWYsQ0FBQyxLQUFELEVBQVEsSUFBSUEsTUFBSixDQUFXLG9DQUFYLENBQVIsQ0FmZSxFQWdCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsMENBQVgsQ0FBUixDQWhCZSxFQWlCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsd0NBQVgsQ0FBUixDQWpCZSxFQWtCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsMkJBQVgsQ0FBUixDQWxCZSxFQW1CZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsMEJBQVgsQ0FBUixDQW5CZSxFQW9CZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsMkJBQVgsQ0FBUixDQXBCZSxFQXFCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsb0NBQVgsQ0FBUixDQXJCZSxFQXNCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsNEJBQVgsQ0FBUixDQXRCZSxFQXVCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcsMEJBQVgsQ0FBUixDQXZCZSxFQXdCZixDQUFDLEtBQUQsRUFBUSxJQUFJQSxNQUFKLENBQVcscUJBQVgsQ0FBUixDQXhCZSxFQXlCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsOEJBQVgsQ0FBVCxDQXpCZSxFQTBCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcseUJBQVgsQ0FBVCxDQTFCZSxFQTJCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsNkJBQVgsQ0FBVCxDQTNCZSxFQTRCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsMEJBQVgsQ0FBVCxDQTVCZSxFQTZCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsNkNBQVgsQ0FBVCxDQTdCZSxFQThCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsa0NBQVgsQ0FBVCxDQTlCZSxFQStCZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsdUNBQVgsQ0FBVCxDQS9CZSxFQWdDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsb0VBQVgsQ0FBVCxDQWhDZSxFQWlDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsb0RBQVgsQ0FBVCxDQWpDZSxFQWtDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsNENBQVgsQ0FBVCxDQWxDZSxFQW1DZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsMkNBQVgsQ0FBVCxDQW5DZSxFQW9DZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsOENBQVgsQ0FBVCxDQXBDZSxFQXFDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsaUNBQVgsQ0FBVCxDQXJDZSxFQXNDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsK0NBQVgsQ0FBVCxDQXRDZSxFQXVDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsOENBQVgsQ0FBVCxDQXZDZSxFQXdDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcseUJBQVgsQ0FBVCxDQXhDZSxFQXlDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcseUJBQVgsQ0FBVCxDQXpDZSxFQTBDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsMkJBQVgsQ0FBVCxDQTFDZSxFQTJDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsc0JBQVgsQ0FBVCxDQTNDZSxFQTRDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsMEJBQVgsQ0FBVCxDQTVDZSxFQTZDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcscUJBQVgsQ0FBVCxDQTdDZSxFQThDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsb0NBQVgsQ0FBVCxDQTlDZSxFQStDZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsMEJBQVgsQ0FBVCxDQS9DZSxFQWdEZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcscUNBQVgsQ0FBVCxDQWhEZSxFQWlEZixDQUFDLE1BQUQsRUFBUyxJQUFJQSxNQUFKLENBQVcsK0JBQVgs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LENBQUNpTyxlQUFSLENBQXdCLEtBQUtqTixJQUFMLENBQVVpRCxXQUFsQyxDQUFQO0FBQ0Q7O0FBemVnRDs7Ozs7Ozs7QUE2ZW5ELHVCQUFzQjlCLGdCQUFFK0wsT0FBRixDQUFVQyxvQ0FBVixDQUF0Qiw4SEFBa0Q7QUFBQTtBQUFBLFFBQXhDQyxHQUF3QztBQUFBLFFBQW5DbE0sRUFBbUM7O0FBQ2hEckIsSUFBQUEseUJBQXlCLENBQUN3TixTQUExQixDQUFvQ0QsR0FBcEMsSUFBMkNsTSxFQUEzQztBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHRCx3QkFBc0JDLGdCQUFFK0wsT0FBRixDQUFVSSxjQUFWLENBQXRCLG1JQUEyQztBQUFBO0FBQUEsUUFBakNGLEdBQWlDO0FBQUEsUUFBNUJsTSxFQUE0Qjs7QUFDekNyQixJQUFBQSx5QkFBeUIsQ0FBQ3dOLFNBQTFCLENBQW9DRCxHQUFwQyxJQUEyQ2xNLEVBQTNDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7ZUFHY3JCLHlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEJhc2VEcml2ZXIsIERldmljZVNldHRpbmdzIH0gZnJvbSAnYXBwaXVtLWJhc2UtZHJpdmVyJztcbmltcG9ydCBVaUF1dG9tYXRvcjJTZXJ2ZXIgZnJvbSAnLi91aWF1dG9tYXRvcjInO1xuaW1wb3J0IHsgZnMsIHV0aWwsIG1qcGVnIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IHsgcmV0cnlJbnRlcnZhbCB9IGZyb20gJ2FzeW5jYm94JztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IGNvbW1hbmRzIGZyb20gJy4vY29tbWFuZHMvaW5kZXgnO1xuaW1wb3J0IHsgREVGQVVMVF9BREJfUE9SVCB9IGZyb20gJ2FwcGl1bS1hZGInO1xuaW1wb3J0IHVpYXV0b21hdG9yMkhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IGFuZHJvaWRIZWxwZXJzLCBhbmRyb2lkQ29tbWFuZHMgfSBmcm9tICdhcHBpdW0tYW5kcm9pZC1kcml2ZXInO1xuaW1wb3J0IGRlc2lyZWRDYXBDb25zdHJhaW50cyBmcm9tICcuL2Rlc2lyZWQtY2Fwcyc7XG5pbXBvcnQgeyBmaW5kQVBvcnROb3RJblVzZSB9IGZyb20gJ3BvcnRzY2FubmVyJztcblxuXG5jb25zdCBoZWxwZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgdWlhdXRvbWF0b3IySGVscGVycywgYW5kcm9pZEhlbHBlcnMpO1xuXG4vLyBUaGUgcmFuZ2Ugb2YgcG9ydHMgd2UgY2FuIHVzZSBvbiB0aGUgc3lzdGVtIGZvciBjb21tdW5pY2F0aW5nIHRvIHRoZVxuLy8gVWlBdXRvbWF0b3IyIEhUVFAgc2VydmVyIG9uIHRoZSBkZXZpY2VcbmNvbnN0IFNZU1RFTV9QT1JUX1JBTkdFID0gWzgyMDAsIDgyOTldO1xuXG4vLyBUaGlzIGlzIHRoZSBwb3J0IHRoYXQgVWlBdXRvbWF0b3IyIGxpc3RlbnMgdG8gb24gdGhlIGRldmljZS4gV2Ugd2lsbCBmb3J3YXJkXG4vLyBvbmUgb2YgdGhlIHBvcnRzIGFib3ZlIG9uIHRoZSBzeXN0ZW0gdG8gdGhpcyBwb3J0IG9uIHRoZSBkZXZpY2UuXG5jb25zdCBERVZJQ0VfUE9SVCA9IDY3OTA7XG5cbi8vIE5PX1BST1hZIGNvbnRhaW5zIHRoZSBwYXRocyB0aGF0IHdlIG5ldmVyIHdhbnQgdG8gcHJveHkgdG8gVWlBdXRvbWF0b3IyIHNlcnZlci5cbi8vIFRPRE86ICBBZGQgdGhlIGxpc3Qgb2YgcGF0aHMgdGhhdCB3ZSBuZXZlciB3YW50IHRvIHByb3h5IHRvIFVpQXV0b21hdG9yMiBzZXJ2ZXIuXG4vLyBUT0RPOiBOZWVkIHRvIHNlZ3JlZ2F0ZSB0aGUgcGF0aHMgYmV0dGVyIHdheSB1c2luZyByZWd1bGFyIGV4cHJlc3Npb25zIHdoZXJldmVyIGFwcGxpY2FibGUuXG4vLyAoTm90IHNlZ3JlZ2F0aW5nIHJpZ2h0IGF3YXkgYmVjYXVzZSBtb3JlIHBhdGhzIHRvIGJlIGFkZGVkIGluIHRoZSBOT19QUk9YWSBsaXN0KVxuY29uc3QgTk9fUFJPWFkgPSBbXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uLyg/IS4qLyknKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FsZXJ0X1teL10rJyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9hbGVydC9bXi9dKycpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvYXBwaXVtL1teL10rL2N1cnJlbnRfYWN0aXZpdHknKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9bXi9dKy9jdXJyZW50X3BhY2thZ2UnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9hcHAvW14vXSsnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9kZXZpY2UvW14vXSsnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9zZXR0aW5ncycpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvY29udGV4dCcpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvY29udGV4dHMnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2VsZW1lbnQvW14vXSsvYXR0cmlidXRlJyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9lbGVtZW50L1teL10rL2Rpc3BsYXllZCcpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvZWxlbWVudC9bXi9dKy9lbmFibGVkJyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9lbGVtZW50L1teL10rL2xvY2F0aW9uX2luX3ZpZXcnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2VsZW1lbnQvW14vXSsvbmFtZScpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvZWxlbWVudC9bXi9dKy9zY3JlZW5zaG90JyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9lbGVtZW50L1teL10rL3NlbGVjdGVkJyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9pbWUvW14vXSsnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2xvY2F0aW9uJyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9sb2cvdHlwZXMnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL25ldHdvcmtfY29ubmVjdGlvbicpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvc2NyZWVuc2hvdCcpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvdGltZW91dHMnKV0sXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3VybCcpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL1teL10rX2FsZXJ0JCcpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FjdGlvbnMnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9hbGVydC9bXi9dKycpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcC9bXi9dJyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvYXBwaXVtL1teL10rL3N0YXJ0X2FjdGl2aXR5JyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvYXBwaXVtL2FwcC9bXi9dKycpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9jb21wYXJlX2ltYWdlcycpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9kZXZpY2UvKD8hc2V0X2NsaXBib2FyZHxnZXRfY2xpcGJvYXJkKVteL10rJyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvYXBwaXVtL2VsZW1lbnQvW14vXSsvcmVwbGFjZV92YWx1ZScpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9lbGVtZW50L1teL10rL3ZhbHVlJyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvYXBwaXVtL2dldFBlcmZvcm1hbmNlRGF0YScpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9wZXJmb3JtYW5jZURhdGEvdHlwZXMnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9hcHBpdW0vc2V0dGluZ3MnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9hcHBpdW0vc3RhcnRfcmVjb3JkaW5nX3NjcmVlbicpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bS9zdG9wX3JlY29yZGluZ19zY3JlZW4nKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9jb250ZXh0JyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvZWxlbWVudCcpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2ltZS9bXi9dKycpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2tleXMnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9sb2NhdGlvbicpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2xvZycpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL25ldHdvcmtfY29ubmVjdGlvbicpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3RpbWVvdXRzJyldLFxuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvdG91Y2gvbXVsdGkvcGVyZm9ybScpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3RvdWNoL3BlcmZvcm0nKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy91cmwnKV0sXG5cbiAgLy8gTUpTT05XUCBjb21tYW5kc1xuICBbJ1BPU1QnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvZXhlY3V0ZScpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2V4ZWN1dGVfYXN5bmMnKV0sXG4gIC8vIFczQyBjb21tYW5kc1xuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy93aW5kb3cvcmVjdCcpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2V4ZWN1dGUvYXN5bmMnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9leGVjdXRlL3N5bmMnKV0sXG5dO1xuXG4vLyBUaGlzIGlzIGEgc2V0IG9mIG1ldGhvZHMgYW5kIHBhdGhzIHRoYXQgd2UgbmV2ZXIgd2FudCB0byBwcm94eSB0byBDaHJvbWVkcml2ZXIuXG5jb25zdCBDSFJPTUVfTk9fUFJPWFkgPSBbXG4gIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bScpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvY29udGV4dCcpXSxcbiAgWydHRVQnLCBuZXcgUmVnRXhwKCdeL3Nlc3Npb24vW14vXSsvZWxlbWVudC9bXi9dKy9yZWN0JyldLFxuICBbJ0dFVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9vcmllbnRhdGlvbicpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2FwcGl1bScpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL2NvbnRleHQnKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy9vcmllbnRhdGlvbicpXSxcbiAgWydQT1NUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3RvdWNoL211bHRpL3BlcmZvcm0nKV0sXG4gIFsnUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy90b3VjaC9wZXJmb3JtJyldLFxuXTtcbmNvbnN0IEFQS19FWFRFTlNJT04gPSAnLmFwayc7XG5jb25zdCBBUEtTX0VYVEVOU0lPTiA9ICcuYXBrcyc7XG5cbmNvbnN0IE1FTU9JWkVEX0ZVTkNUSU9OUyA9IFtcbiAgJ2dldFN0YXR1c0JhckhlaWdodCcsXG4gICdnZXREZXZpY2VQaXhlbFJhdGlvJyxcbl07XG5cbmNsYXNzIEFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIgZXh0ZW5kcyBCYXNlRHJpdmVyIHtcbiAgY29uc3RydWN0b3IgKG9wdHMgPSB7fSwgc2hvdWxkVmFsaWRhdGVDYXBzID0gdHJ1ZSkge1xuICAgIC8vIGBzaGVsbGAgb3ZlcndyaXRlcyBhZGIuc2hlbGwsIHNvIHJlbW92ZVxuICAgIGRlbGV0ZSBvcHRzLnNoZWxsO1xuXG4gICAgc3VwZXIob3B0cywgc2hvdWxkVmFsaWRhdGVDYXBzKTtcbiAgICB0aGlzLmxvY2F0b3JTdHJhdGVnaWVzID0gW1xuICAgICAgJ3hwYXRoJyxcbiAgICAgICdpZCcsXG4gICAgICAnY2xhc3MgbmFtZScsXG4gICAgICAnYWNjZXNzaWJpbGl0eSBpZCcsXG4gICAgICAnLWFuZHJvaWQgdWlhdXRvbWF0b3InXG4gICAgXTtcbiAgICB0aGlzLmRlc2lyZWRDYXBDb25zdHJhaW50cyA9IGRlc2lyZWRDYXBDb25zdHJhaW50cztcbiAgICB0aGlzLnVpYXV0b21hdG9yMiA9IG51bGw7XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuZGVmYXVsdElNRSA9IG51bGw7XG4gICAgdGhpcy5qd3BQcm94eUF2b2lkID0gTk9fUFJPWFk7XG4gICAgdGhpcy5hcGtTdHJpbmdzID0ge307IC8vIG1hcCBvZiBsYW5ndWFnZSAtPiBzdHJpbmdzIG9ialxuXG4gICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBEZXZpY2VTZXR0aW5ncyh7aWdub3JlVW5pbXBvcnRhbnRWaWV3czogZmFsc2UsIGFsbG93SW52aXNpYmxlRWxlbWVudHM6IGZhbHNlfSxcbiAgICAgICAgdGhpcy5vblNldHRpbmdzVXBkYXRlLmJpbmQodGhpcykpO1xuICAgIC8vIGhhbmRsZSB3ZWJ2aWV3IG1lY2hhbmljcyBmcm9tIEFuZHJvaWREcml2ZXJcbiAgICB0aGlzLmNocm9tZWRyaXZlciA9IG51bGw7XG4gICAgdGhpcy5zZXNzaW9uQ2hyb21lZHJpdmVycyA9IHt9O1xuXG4gICAgLy8gbWVtb2l6ZSBmdW5jdGlvbnMgaGVyZSwgc28gdGhhdCB0aGV5IGFyZSBkb25lIG9uIGEgcGVyLWluc3RhbmNlIGJhc2lzXG4gICAgZm9yIChjb25zdCBmbiBvZiBNRU1PSVpFRF9GVU5DVElPTlMpIHtcbiAgICAgIHRoaXNbZm5dID0gXy5tZW1vaXplKHRoaXNbZm5dKTtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZURlc2lyZWRDYXBzIChjYXBzKSB7XG4gICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlRGVzaXJlZENhcHMoY2FwcykgJiYgYW5kcm9pZEhlbHBlcnMudmFsaWRhdGVEZXNpcmVkQ2FwcyhjYXBzKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNlc3Npb24gKC4uLmFyZ3MpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVE9ETyBoYW5kbGUgb3RoZXJTZXNzaW9uRGF0YSBmb3IgbXVsdGlwbGUgc2Vzc2lvbnNcbiAgICAgIGxldCBbc2Vzc2lvbklkLCBjYXBzXSA9IGF3YWl0IHN1cGVyLmNyZWF0ZVNlc3Npb24oLi4uYXJncyk7XG5cbiAgICAgIGxldCBzZXJ2ZXJEZXRhaWxzID0ge1xuICAgICAgICBwbGF0Zm9ybTogJ0xJTlVYJyxcbiAgICAgICAgd2ViU3RvcmFnZUVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB0YWtlc1NjcmVlbnNob3Q6IHRydWUsXG4gICAgICAgIGphdmFzY3JpcHRFbmFibGVkOiB0cnVlLFxuICAgICAgICBkYXRhYmFzZUVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBuZXR3b3JrQ29ubmVjdGlvbkVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGxvY2F0aW9uQ29udGV4dEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB3YXJuaW5nczoge30sXG4gICAgICAgIGRlc2lyZWQ6IHRoaXMuY2FwcyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuY2FwcyA9IE9iamVjdC5hc3NpZ24oc2VydmVyRGV0YWlscywgdGhpcy5jYXBzKTtcblxuICAgICAgdGhpcy5jdXJDb250ZXh0ID0gdGhpcy5kZWZhdWx0Q29udGV4dE5hbWUoKTtcblxuICAgICAgbGV0IGRlZmF1bHRPcHRzID0ge1xuICAgICAgICBmdWxsUmVzZXQ6IGZhbHNlLFxuICAgICAgICBhdXRvTGF1bmNoOiB0cnVlLFxuICAgICAgICBhZGJQb3J0OiBERUZBVUxUX0FEQl9QT1JULFxuICAgICAgICBhbmRyb2lkSW5zdGFsbFRpbWVvdXQ6IDkwMDAwXG4gICAgICB9O1xuICAgICAgXy5kZWZhdWx0cyh0aGlzLm9wdHMsIGRlZmF1bHRPcHRzKTtcblxuICAgICAgaWYgKHRoaXMuaXNDaHJvbWVTZXNzaW9uKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiV2UncmUgZ29pbmcgdG8gcnVuIGEgQ2hyb21lLWJhc2VkIHNlc3Npb25cIik7XG4gICAgICAgIGxldCB7cGtnLCBhY3Rpdml0eX0gPSBoZWxwZXJzLmdldENocm9tZVBrZyh0aGlzLm9wdHMuYnJvd3Nlck5hbWUpO1xuICAgICAgICB0aGlzLm9wdHMuYXBwUGFja2FnZSA9IHRoaXMuY2Fwcy5hcHBQYWNrYWdlID0gcGtnO1xuICAgICAgICB0aGlzLm9wdHMuYXBwQWN0aXZpdHkgPSB0aGlzLmNhcHMuYXBwQWN0aXZpdHkgPSBhY3Rpdml0eTtcbiAgICAgICAgbG9nZ2VyLmluZm8oYENocm9tZS10eXBlIHBhY2thZ2UgYW5kIGFjdGl2aXR5IGFyZSAke3BrZ30gYW5kICR7YWN0aXZpdHl9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdHMucmVib290KSB7XG4gICAgICAgIHRoaXMuc2V0QXZkRnJvbUNhcGFiaWxpdGllcyhjYXBzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0cy5hcHApIHtcbiAgICAgICAgLy8gZmluZCBhbmQgY29weSwgb3IgZG93bmxvYWQgYW5kIHVuemlwIGFuIGFwcCB1cmwgb3IgcGF0aFxuICAgICAgICB0aGlzLm9wdHMuYXBwID0gYXdhaXQgdGhpcy5oZWxwZXJzLmNvbmZpZ3VyZUFwcCh0aGlzLm9wdHMuYXBwLCBbQVBLX0VYVEVOU0lPTiwgQVBLU19FWFRFTlNJT05dKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGVja0FwcFByZXNlbnQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hcHBPbkRldmljZSkge1xuICAgICAgICAvLyB0aGUgYXBwIGlzbid0IGFuIGFjdHVhbCBhcHAgZmlsZSBidXQgcmF0aGVyIHNvbWV0aGluZyB3ZSB3YW50IHRvXG4gICAgICAgIC8vIGFzc3VtZSBpcyBvbiB0aGUgZGV2aWNlIGFuZCBqdXN0IGxhdW5jaCB2aWEgdGhlIGFwcFBhY2thZ2VcbiAgICAgICAgbG9nZ2VyLmluZm8oYEFwcCBmaWxlIHdhcyBub3QgbGlzdGVkLCBpbnN0ZWFkIHdlJ3JlIGdvaW5nIHRvIHJ1biBgICtcbiAgICAgICAgICAgIGAke3RoaXMub3B0cy5hcHBQYWNrYWdlfSBkaXJlY3RseSBvbiB0aGUgZGV2aWNlYCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2hlY2tQYWNrYWdlUHJlc2VudCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRzLnN5c3RlbVBvcnQgPSB0aGlzLm9wdHMuc3lzdGVtUG9ydCB8fCBhd2FpdCBmaW5kQVBvcnROb3RJblVzZShTWVNURU1fUE9SVF9SQU5HRVswXSwgU1lTVEVNX1BPUlRfUkFOR0VbMV0pO1xuICAgICAgdGhpcy5vcHRzLmFkYlBvcnQgPSB0aGlzLm9wdHMuYWRiUG9ydCB8fCBERUZBVUxUX0FEQl9QT1JUO1xuXG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0VWlBdXRvbWF0b3IyU2Vzc2lvbigpO1xuICAgICAgYXdhaXQgdGhpcy5maWxsRGV2aWNlRGV0YWlscygpO1xuICAgICAgaWYgKHRoaXMub3B0cy5tanBlZ1NjcmVlbnNob3RVcmwpIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFN0YXJ0aW5nIE1KUEVHIHN0cmVhbSByZWFkaW5nIFVSTDogJyR7dGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybH0nYCk7XG4gICAgICAgIHRoaXMubWpwZWdTdHJlYW0gPSBuZXcgbWpwZWcuTUpwZWdTdHJlYW0odGhpcy5vcHRzLm1qcGVnU2NyZWVuc2hvdFVybCk7XG4gICAgICAgIGF3YWl0IHRoaXMubWpwZWdTdHJlYW0uc3RhcnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbc2Vzc2lvbklkLCB0aGlzLmNhcHNdO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbigpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmaWxsRGV2aWNlRGV0YWlscyAoKSB7XG4gICAgdGhpcy5jYXBzLnBpeGVsUmF0aW8gPSBhd2FpdCB0aGlzLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICB0aGlzLmNhcHMuc3RhdEJhckhlaWdodCA9IGF3YWl0IHRoaXMuZ2V0U3RhdHVzQmFySGVpZ2h0KCk7XG4gICAgdGhpcy5jYXBzLnZpZXdwb3J0UmVjdCA9IGF3YWl0IHRoaXMuZ2V0Vmlld1BvcnRSZWN0KCk7XG4gIH1cblxuICBnZXQgZHJpdmVyRGF0YSAoKSB7XG4gICAgLy8gVE9ETyBmaWxsIG91dCByZXNvdXJjZSBpbmZvIGhlcmVcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyBnZXRTZXNzaW9uICgpIHtcbiAgICBsZXQgc2Vzc2lvbkRhdGEgPSBhd2FpdCBzdXBlci5nZXRTZXNzaW9uKCk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiR2V0dGluZyBzZXNzaW9uIGRldGFpbHMgZnJvbSBzZXJ2ZXIgdG8gbWl4IGluXCIpO1xuICAgIGxldCB1aWEyRGF0YSA9IGF3YWl0IHRoaXMudWlhdXRvbWF0b3IyLmp3cHJveHkuY29tbWFuZCgnLycsICdHRVQnLCB7fSk7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHNlc3Npb25EYXRhLCB1aWEyRGF0YSk7XG4gIH1cblxuICBpc0VtdWxhdG9yICgpIHtcbiAgICByZXR1cm4gISEodGhpcy5vcHRzLmF2ZCB8fCAvZW11bGF0b3IvLnRlc3QodGhpcy5vcHRzLnVkaWQpKTtcbiAgfVxuXG4gIHNldEF2ZEZyb21DYXBhYmlsaXRpZXMgKGNhcHMpIHtcbiAgICBpZiAodGhpcy5vcHRzLmF2ZCkge1xuICAgICAgbG9nZ2VyLmluZm8oJ2F2ZCBuYW1lIGRlZmluZWQsIGlnbm9yaW5nIGRldmljZSBuYW1lIGFuZCBwbGF0Zm9ybSB2ZXJzaW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghY2Fwcy5kZXZpY2VOYW1lKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvckFuZFRocm93KCdhdmQgb3IgZGV2aWNlTmFtZSBzaG91bGQgYmUgc3BlY2lmaWVkIHdoZW4gcmVib290IG9wdGlvbiBpcyBlbmFibGVzJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWNhcHMucGxhdGZvcm1WZXJzaW9uKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvckFuZFRocm93KCdhdmQgb3IgcGxhdGZvcm1WZXJzaW9uIHNob3VsZCBiZSBzcGVjaWZpZWQgd2hlbiByZWJvb3Qgb3B0aW9uIGlzIGVuYWJsZWQnKTtcbiAgICAgIH1cbiAgICAgIGxldCBhdmREZXZpY2UgPSBjYXBzLmRldmljZU5hbWUucmVwbGFjZSgvW15hLXpBLVowLTlfLl0vZywgXCItXCIpO1xuICAgICAgdGhpcy5vcHRzLmF2ZCA9IGAke2F2ZERldmljZX1fXyR7Y2Fwcy5wbGF0Zm9ybVZlcnNpb259YDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzdGFydFVpQXV0b21hdG9yMlNlc3Npb24gKCkge1xuICAgIGlmICghdGhpcy5vcHRzLmphdmFWZXJzaW9uKSB7XG4gICAgICB0aGlzLm9wdHMuamF2YVZlcnNpb24gPSBhd2FpdCBoZWxwZXJzLmdldEphdmFWZXJzaW9uKCk7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGRldmljZSB1ZGlkIGZvciB0aGlzIHNlc3Npb25cbiAgICBsZXQge3VkaWQsIGVtUG9ydH0gPSBhd2FpdCBoZWxwZXJzLmdldERldmljZUluZm9Gcm9tQ2Fwcyh0aGlzLm9wdHMpO1xuICAgIHRoaXMub3B0cy51ZGlkID0gdWRpZDtcbiAgICB0aGlzLm9wdHMuZW1Qb3J0ID0gZW1Qb3J0O1xuXG4gICAgLy8gbm93IHRoYXQgd2Uga25vdyBvdXIgamF2YSB2ZXJzaW9uIGFuZCBkZXZpY2UgaW5mbywgd2UgY2FuIGNyZWF0ZSBvdXJcbiAgICAvLyBBREIgaW5zdGFuY2VcbiAgICB0aGlzLmFkYiA9IGF3YWl0IGFuZHJvaWRIZWxwZXJzLmNyZWF0ZUFEQih0aGlzLm9wdHMpO1xuXG4gICAgY29uc3QgYXBpTGV2ZWwgPSBhd2FpdCB0aGlzLmFkYi5nZXRBcGlMZXZlbCgpO1xuXG4gICAgaWYgKGFwaUxldmVsIDwgMjEpIHtcbiAgICAgIGxvZ2dlci5lcnJvckFuZFRocm93KCdVSUF1dG9tYXRpb24yIGlzIG9ubHkgc3VwcG9ydGVkIHNpbmNlIEFuZHJvaWQgNS4wIChMb2xsaXBvcCkuICcgK1xuICAgICAgICAnWW91IGNvdWxkIHN0aWxsIHVzZSBvdGhlciBzdXBwb3J0ZWQgYmFja2VuZHMgaW4gb3JkZXIgdG8gYXV0b21hdGUgb2xkZXIgQW5kcm9pZCB2ZXJzaW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAoYXBpTGV2ZWwgPj0gMjgpIHsgLy8gQW5kcm9pZCBQXG4gICAgICBsb2dnZXIud2FybignUmVsYXhpbmcgaGlkZGVuIGFwaSBwb2xpY3knKTtcbiAgICAgIGF3YWl0IHRoaXMuYWRiLnNldEhpZGRlbkFwaVBvbGljeSgnMScpO1xuICAgIH1cblxuICAgIC8vIGdldCBhcHBQYWNrYWdlIGV0IGFsIGZyb20gbWFuaWZlc3QgaWYgbmVjZXNzYXJ5XG4gICAgbGV0IGFwcEluZm8gPSBhd2FpdCBoZWxwZXJzLmdldExhdW5jaEluZm8odGhpcy5hZGIsIHRoaXMub3B0cyk7XG4gICAgLy8gYW5kIGdldCBpdCBvbnRvIG91ciAnb3B0cycgb2JqZWN0IHNvIHdlIHVzZSBpdCBmcm9tIG5vdyBvblxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5vcHRzLCBhcHBJbmZvKTtcblxuICAgIC8vIHNldCBhY3R1YWwgZGV2aWNlIG5hbWUsIHVkaWQsIHBsYXRmb3JtIHZlcnNpb24sIHNjcmVlbiBzaXplLCBzY3JlZW4gZGVuc2l0eSwgbW9kZWwgYW5kIG1hbnVmYWN0dXJlciBkZXRhaWxzXG4gICAgdGhpcy5jYXBzLmRldmljZU5hbWUgPSB0aGlzLmFkYi5jdXJEZXZpY2VJZDtcbiAgICB0aGlzLmNhcHMuZGV2aWNlVURJRCA9IHRoaXMub3B0cy51ZGlkO1xuXG4gICAgLy8gc2V0IHVwIHRoZSBtb2RpZmllZCBVaUF1dG9tYXRvcjIgc2VydmVyIGV0Y1xuICAgIGF3YWl0IHRoaXMuaW5pdFVpQXV0b21hdG9yMlNlcnZlcigpO1xuXG4gICAgLy8gc3RhcnQgYW4gYXZkLCBzZXQgdGhlIGxhbmd1YWdlL2xvY2FsZSwgcGljayBhbiBlbXVsYXRvciwgZXRjLi4uXG4gICAgLy8gVE9ETyB3aXRoIG11bHRpcGxlIGRldmljZXMgd2UnbGwgbmVlZCB0byBwYXJhbWV0ZXJpemUgdGhpc1xuICAgIHRoaXMuZGVmYXVsdElNRSA9IGF3YWl0IGhlbHBlcnMuaW5pdERldmljZSh0aGlzLmFkYiwgdGhpcy5vcHRzKTtcblxuICAgIC8vIEZ1cnRoZXIgcHJlcGFyZSB0aGUgZGV2aWNlIGJ5IGZvcndhcmRpbmcgdGhlIFVpQXV0b21hdG9yMiBwb3J0XG4gICAgbG9nZ2VyLmRlYnVnKGBGb3J3YXJkaW5nIFVpQXV0b21hdG9yMiBTZXJ2ZXIgcG9ydCAke0RFVklDRV9QT1JUfSB0byAke3RoaXMub3B0cy5zeXN0ZW1Qb3J0fWApO1xuICAgIGF3YWl0IHRoaXMuYWRiLmZvcndhcmRQb3J0KHRoaXMub3B0cy5zeXN0ZW1Qb3J0LCBERVZJQ0VfUE9SVCk7XG5cbiAgICAvLyBJZiB0aGUgdXNlciBzZXRzIGF1dG9MYXVuY2ggdG8gZmFsc2UsIHRoZXkgYXJlIHJlc3BvbnNpYmxlIGZvciBpbml0QVVUKCkgYW5kIHN0YXJ0QVVUKClcbiAgICBpZiAodGhpcy5vcHRzLmF1dG9MYXVuY2gpIHtcbiAgICAgIC8vIHNldCB1cCBhcHAgdW5kZXIgdGVzdFxuICAgICAgLy8gcHJlcGFyZSBvdXIgYWN0dWFsIEFVVCwgZ2V0IGl0IG9uIHRoZSBkZXZpY2UsIGV0Yy4uLlxuICAgICAgYXdhaXQgdGhpcy5pbml0QVVUKCk7XG4gICAgfVxuICAgIC8vIEFkZGluZyBBVVQgcGFja2FnZSBuYW1lIGluIHRoZSBjYXBhYmlsaXRpZXMgaWYgcGFja2FnZSBuYW1lIG5vdCBleGlzdCBpbiBjYXBzXG4gICAgaWYgKCF0aGlzLmNhcHMuYXBwUGFja2FnZSAmJiBhcHBJbmZvKSB7XG4gICAgICB0aGlzLmNhcHMuYXBwUGFja2FnZSA9IGFwcEluZm8uYXBwUGFja2FnZTtcbiAgICB9XG5cbiAgICAvLyBsYXVuY2ggVWlBdXRvbWF0b3IyIGFuZCB3YWl0IHRpbGwgaXRzIG9ubGluZSBhbmQgd2UgaGF2ZSBhIHNlc3Npb25cbiAgICBhd2FpdCB0aGlzLnVpYXV0b21hdG9yMi5zdGFydFNlc3Npb24odGhpcy5jYXBzKTtcblxuICAgIGF3YWl0IHRoaXMuYWRkRGV2aWNlSW5mb1RvQ2FwcygpO1xuXG4gICAgLy8gVW5sb2NrIHRoZSBkZXZpY2UgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgc3RhcnRlZC5cbiAgICBpZiAoIXRoaXMub3B0cy5za2lwVW5sb2NrKSB7XG4gICAgICAvLyB1bmxvY2sgdGhlIGRldmljZSB0byBwcmVwYXJlIGl0IGZvciB0ZXN0aW5nXG4gICAgICBhd2FpdCBoZWxwZXJzLnVubG9jayh0aGlzLCB0aGlzLmFkYiwgdGhpcy5jYXBzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmRlYnVnKGAnc2tpcFVubG9jaycgY2FwYWJpbGl0eSBzZXQsIHNvIHNraXBwaW5nIGRldmljZSB1bmxvY2tgKTtcbiAgICB9XG5cbiAgICAvLyByZXNjdWUgVWlBdXRvbWF0b3IyIGlmIGl0IGZhaWxzIHRvIHN0YXJ0IG91ciBBVVRcbiAgICBpZiAodGhpcy5vcHRzLmF1dG9MYXVuY2gpIHtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlQXBwU3RhcnRzKCk7XG4gICAgfVxuXG4gICAgLy8gaWYgdGhlIGluaXRpYWwgb3JpZW50YXRpb24gaXMgcmVxdWVzdGVkLCBzZXQgaXRcbiAgICBpZiAodXRpbC5oYXNWYWx1ZSh0aGlzLm9wdHMub3JpZW50YXRpb24pKSB7XG4gICAgICBsb2dnZXIuZGVidWcoYFNldHRpbmcgaW5pdGlhbCBvcmllbnRhdGlvbiB0byAnJHt0aGlzLm9wdHMub3JpZW50YXRpb259J2ApO1xuICAgICAgYXdhaXQgdGhpcy5zZXRPcmllbnRhdGlvbih0aGlzLm9wdHMub3JpZW50YXRpb24pO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIHdhbnQgdG8gaW1tZWRpYXRlbHkgZ2V0IGludG8gYSB3ZWJ2aWV3LCBzZXQgb3VyIGNvbnRleHRcbiAgICAvLyBhcHByb3ByaWF0ZWx5XG4gICAgaWYgKHRoaXMub3B0cy5hdXRvV2Vidmlldykge1xuICAgICAgY29uc3Qgdmlld05hbWUgPSB0aGlzLmRlZmF1bHRXZWJ2aWV3TmFtZSgpO1xuICAgICAgY29uc3QgdGltZW91dCA9IHRoaXMub3B0cy5hdXRvV2Vidmlld1RpbWVvdXQgfHwgMjAwMDtcbiAgICAgIGxvZ2dlci5pbmZvKGBTZXR0aW5nIGF1dG8gd2VidmlldyB0byBjb250ZXh0ICcke3ZpZXdOYW1lfScgd2l0aCB0aW1lb3V0ICR7dGltZW91dH1tc2ApO1xuICAgICAgYXdhaXQgcmV0cnlJbnRlcnZhbCh0aW1lb3V0IC8gNTAwLCA1MDAsIHRoaXMuc2V0Q29udGV4dC5iaW5kKHRoaXMpLCB2aWV3TmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNDaHJvbWVTZXNzaW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0Q2hyb21lU2Vzc2lvbih0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBub3cgdGhhdCBldmVyeXRoaW5nIGhhcyBzdGFydGVkIHN1Y2Nlc3NmdWxseSwgdHVybiBvbiBwcm94eWluZyBzbyBhbGxcbiAgICAvLyBzdWJzZXF1ZW50IHNlc3Npb24gcmVxdWVzdHMgZ28gc3RyYWlnaHQgdG8vZnJvbSB1aWF1dG9tYXRvcjJcbiAgICB0aGlzLmp3cFByb3h5QWN0aXZlID0gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIGFkZERldmljZUluZm9Ub0NhcHMgKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFwaVZlcnNpb24sXG4gICAgICBwbGF0Zm9ybVZlcnNpb24sXG4gICAgICBtYW51ZmFjdHVyZXIsXG4gICAgICBtb2RlbCxcbiAgICAgIHJlYWxEaXNwbGF5U2l6ZSxcbiAgICAgIGRpc3BsYXlEZW5zaXR5LFxuICAgIH0gPSBhd2FpdCB0aGlzLm1vYmlsZUdldERldmljZUluZm8oKTtcbiAgICB0aGlzLmNhcHMuZGV2aWNlQXBpTGV2ZWwgPSBwYXJzZUludChhcGlWZXJzaW9uLCAxMCk7XG4gICAgdGhpcy5jYXBzLnBsYXRmb3JtVmVyc2lvbiA9IHBsYXRmb3JtVmVyc2lvbjtcbiAgICB0aGlzLmNhcHMuZGV2aWNlU2NyZWVuU2l6ZSA9IHJlYWxEaXNwbGF5U2l6ZTtcbiAgICB0aGlzLmNhcHMuZGV2aWNlU2NyZWVuRGVuc2l0eSA9IGRpc3BsYXlEZW5zaXR5O1xuICAgIHRoaXMuY2Fwcy5kZXZpY2VNb2RlbCA9IG1vZGVsO1xuICAgIHRoaXMuY2Fwcy5kZXZpY2VNYW51ZmFjdHVyZXIgPSBtYW51ZmFjdHVyZXI7XG4gIH1cblxuICBhc3luYyBpbml0VWlBdXRvbWF0b3IyU2VydmVyICgpIHtcbiAgICAvLyBub3cgdGhhdCB3ZSBoYXZlIHBhY2thZ2UgYW5kIGFjdGl2aXR5LCB3ZSBjYW4gY3JlYXRlIGFuIGluc3RhbmNlIG9mXG4gICAgLy8gdWlhdXRvbWF0b3IyIHdpdGggdGhlIGFwcHJvcHJpYXRlIGRhdGFcbiAgICB0aGlzLnVpYXV0b21hdG9yMiA9IG5ldyBVaUF1dG9tYXRvcjJTZXJ2ZXIoe1xuICAgICAgaG9zdDogdGhpcy5vcHRzLnJlbW90ZUFkYkhvc3QgfHwgdGhpcy5vcHRzLmhvc3QgfHwgJ2xvY2FsaG9zdCcsXG4gICAgICBzeXN0ZW1Qb3J0OiB0aGlzLm9wdHMuc3lzdGVtUG9ydCxcbiAgICAgIGRldmljZVBvcnQ6IERFVklDRV9QT1JULFxuICAgICAgYWRiOiB0aGlzLmFkYixcbiAgICAgIGFwazogdGhpcy5vcHRzLmFwcCxcbiAgICAgIHRtcERpcjogdGhpcy5vcHRzLnRtcERpcixcbiAgICAgIGFwcFBhY2thZ2U6IHRoaXMub3B0cy5hcHBQYWNrYWdlLFxuICAgICAgYXBwQWN0aXZpdHk6IHRoaXMub3B0cy5hcHBBY3Rpdml0eSxcbiAgICAgIGRpc2FibGVXaW5kb3dBbmltYXRpb246ICEhdGhpcy5vcHRzLmRpc2FibGVXaW5kb3dBbmltYXRpb24sXG4gICAgfSk7XG4gICAgdGhpcy5wcm94eVJlcVJlcyA9IHRoaXMudWlhdXRvbWF0b3IyLnByb3h5UmVxUmVzLmJpbmQodGhpcy51aWF1dG9tYXRvcjIpO1xuXG4gICAgLy8ga2lsbGluZyBhbnkgdWlhdXRvbWF0b3IgZXhpc3RpbmcgcHJvY2Vzc2VzXG4gICAgYXdhaXQgdGhpcy51aWF1dG9tYXRvcjIua2lsbFVpQXV0b21hdG9yT25EZXZpY2UoKTtcblxuICAgIGF3YWl0IHRoaXMudWlhdXRvbWF0b3IyLmluc3RhbGxTZXJ2ZXJBcGsodGhpcy5vcHRzLnVpYXV0b21hdG9yMlNlcnZlckluc3RhbGxUaW1lb3V0KTtcbiAgfVxuXG4gIGFzeW5jIGluaXRBVVQgKCkge1xuICAgIC8vIEluc3RhbGwgYW55IFwib3RoZXJBcHBzXCIgdGhhdCB3ZXJlIHNwZWNpZmllZCBpbiBjYXBzXG4gICAgaWYgKHRoaXMub3B0cy5vdGhlckFwcHMpIHtcbiAgICAgIGxldCBvdGhlckFwcHM7XG4gICAgICB0cnkge1xuICAgICAgICBvdGhlckFwcHMgPSBoZWxwZXJzLnBhcnNlQXJyYXkodGhpcy5vcHRzLm90aGVyQXBwcyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvckFuZFRocm93KGBDb3VsZCBub3QgcGFyc2UgXCJvdGhlckFwcHNcIiBjYXBhYmlsaXR5OiAke2UubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIG90aGVyQXBwcyA9IGF3YWl0IEIuYWxsKG90aGVyQXBwc1xuICAgICAgICAubWFwKChhcHApID0+IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAoYXBwLCBbQVBLX0VYVEVOU0lPTiwgQVBLU19FWFRFTlNJT05dKSkpO1xuICAgICAgYXdhaXQgaGVscGVycy5pbnN0YWxsT3RoZXJBcGtzKG90aGVyQXBwcywgdGhpcy5hZGIsIHRoaXMub3B0cyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdHMuYXBwKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLmZ1bGxSZXNldCkge1xuICAgICAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdygnRnVsbCByZXNldCByZXF1aXJlcyBhbiBhcHAgY2FwYWJpbGl0eSwgdXNlIGZhc3RSZXNldCBpZiBhcHAgaXMgbm90IHByb3ZpZGVkJyk7XG4gICAgICB9XG4gICAgICBsb2dnZXIuZGVidWcoJ05vIGFwcCBjYXBhYmlsaXR5LiBBc3N1bWluZyBpdCBpcyBhbHJlYWR5IG9uIHRoZSBkZXZpY2UnKTtcbiAgICAgIGlmICh0aGlzLm9wdHMuZmFzdFJlc2V0KSB7XG4gICAgICAgIGF3YWl0IGhlbHBlcnMucmVzZXRBcHAodGhpcy5hZGIsIHRoaXMub3B0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdHMuc2tpcFVuaW5zdGFsbCkge1xuICAgICAgYXdhaXQgdGhpcy5hZGIudW5pbnN0YWxsQXBrKHRoaXMub3B0cy5hcHBQYWNrYWdlKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm9wdHMubm9TaWduKSB7XG4gICAgICBsZXQgc2lnbmVkID0gYXdhaXQgdGhpcy5hZGIuY2hlY2tBcGtDZXJ0KHRoaXMub3B0cy5hcHAsIHRoaXMub3B0cy5hcHBQYWNrYWdlKTtcbiAgICAgIGlmICghc2lnbmVkICYmIHRoaXMub3B0cy5hcHApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGIuc2lnbih0aGlzLm9wdHMuYXBwLCB0aGlzLm9wdHMuYXBwUGFja2FnZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdHMuYXBwKSB7XG4gICAgICBhd2FpdCBoZWxwZXJzLmluc3RhbGxBcGsodGhpcy5hZGIsIHRoaXMub3B0cyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW5zdXJlQXBwU3RhcnRzICgpIHtcbiAgICAvLyBtYWtlIHN1cmUgd2UgaGF2ZSBhbiBhY3Rpdml0eSBhbmQgcGFja2FnZSB0byB3YWl0IGZvclxuICAgIGxldCBhcHBXYWl0UGFja2FnZSA9IHRoaXMub3B0cy5hcHBXYWl0UGFja2FnZSB8fCB0aGlzLm9wdHMuYXBwUGFja2FnZTtcbiAgICBsZXQgYXBwV2FpdEFjdGl2aXR5ID0gdGhpcy5vcHRzLmFwcFdhaXRBY3Rpdml0eSB8fCB0aGlzLm9wdHMuYXBwQWN0aXZpdHk7XG5cbiAgICBsb2dnZXIuaW5mbyhgVWlBdXRvbWF0b3IyIGRpZCBub3Qgc3RhcnQgdGhlIGFjdGl2aXR5IHdlIHdlcmUgd2FpdGluZyBmb3IsIGAgK1xuICAgICAgICBgJyR7YXBwV2FpdFBhY2thZ2V9LyR7YXBwV2FpdEFjdGl2aXR5fScuIFN0YXJ0aW5nIGl0IG91cnNlbHZlc2ApO1xuXG4gICAgaWYgKHRoaXMuY2Fwcy5hbmRyb2lkQ292ZXJhZ2UpIHtcbiAgICAgIGxvZ2dlci5pbmZvKGBhbmRyb2lkQ292ZXJhZ2UgaXMgY29uZmlndXJlZC4gYCArXG4gICAgICAgIGAgU3RhcnRpbmcgaW5zdHJ1bWVudGF0aW9uIG9mICcke3RoaXMuY2Fwcy5hbmRyb2lkQ292ZXJhZ2V9Jy4uLmApO1xuICAgICAgYXdhaXQgdGhpcy5hZGIuYW5kcm9pZENvdmVyYWdlKHRoaXMuY2Fwcy5hbmRyb2lkQ292ZXJhZ2UsIGFwcFdhaXRQYWNrYWdlLCBhcHBXYWl0QWN0aXZpdHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5zdGFydEFwcCh7XG4gICAgICAgIHBrZzogdGhpcy5vcHRzLmFwcFBhY2thZ2UsXG4gICAgICAgIGFjdGl2aXR5OiB0aGlzLm9wdHMuYXBwQWN0aXZpdHksXG4gICAgICAgIGFjdGlvbjogdGhpcy5vcHRzLmludGVudEFjdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IHRoaXMub3B0cy5pbnRlbnRDYXRlZ29yeSxcbiAgICAgICAgZmxhZ3M6IHRoaXMub3B0cy5pbnRlbnRGbGFncyxcbiAgICAgICAgd2FpdFBrZzogdGhpcy5vcHRzLmFwcFdhaXRQYWNrYWdlLFxuICAgICAgICB3YWl0QWN0aXZpdHk6IHRoaXMub3B0cy5hcHBXYWl0QWN0aXZpdHksXG4gICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiB0aGlzLm9wdHMub3B0aW9uYWxJbnRlbnRBcmd1bWVudHMsXG4gICAgICAgIHN0b3BBcHA6ICF0aGlzLm9wdHMuZG9udFN0b3BBcHBPblJlc2V0LFxuICAgICAgICByZXRyeTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuICBhc3luYyBkZWxldGVTZXNzaW9uICgpIHtcbiAgICBsb2dnZXIuZGVidWcoJ0RlbGV0aW5nIFVpQXV0b21hdG9yMiBzZXNzaW9uJyk7XG4gICAgYXdhaXQgYW5kcm9pZEhlbHBlcnMucmVtb3ZlQWxsU2Vzc2lvbldlYlNvY2tldEhhbmRsZXJzKHRoaXMuc2VydmVyLCB0aGlzLnNlc3Npb25JZCk7XG4gICAgaWYgKHRoaXMudWlhdXRvbWF0b3IyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnN0b3BDaHJvbWVkcml2ZXJQcm94aWVzKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oYFVuYWJsZSB0byBzdG9wIENocm9tZURyaXZlciBwcm94aWVzOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuandwUHJveHlBY3RpdmUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVpYXV0b21hdG9yMi5kZWxldGVTZXNzaW9uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gcHJveHkgZGVsZXRlU2Vzc2lvbiB0byBVaUF1dG9tYXRvcjI6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudWlhdXRvbWF0b3IyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuYWRiKSB7XG4gICAgICBpZiAodGhpcy5vcHRzLnVuaWNvZGVLZXlib2FyZCAmJiB0aGlzLm9wdHMucmVzZXRLZXlib2FyZCAmJiB0aGlzLmRlZmF1bHRJTUUpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXNldHRpbmcgSU1FIHRvICcke3RoaXMuZGVmYXVsdElNRX0nYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGIuc2V0SU1FKHRoaXMuZGVmYXVsdElNRSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gcmVzZXQgSU1FOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jYXBzLmFuZHJvaWRDb3ZlcmFnZSkge1xuICAgICAgICBsb2dnZXIuaW5mbygnU2h1dHRpbmcgZG93biB0aGUgYWRiIHByb2Nlc3Mgb2YgaW5zdHJ1bWVudGF0aW9uLi4uJyk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLmVuZEFuZHJvaWRDb3ZlcmFnZSgpO1xuICAgICAgICAvLyBVc2UgdGhpcyBicm9hZGNhc3QgaW50ZW50IHRvIG5vdGlmeSBpdCdzIHRpbWUgdG8gZHVtcCBjb3ZlcmFnZSB0byBmaWxlXG4gICAgICAgIGlmICh0aGlzLmNhcHMuYW5kcm9pZENvdmVyYWdlRW5kSW50ZW50KSB7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oYFNlbmRpbmcgaW50ZW50IGJyb2FkY2FzdCAnJHt0aGlzLmNhcHMuYW5kcm9pZENvdmVyYWdlRW5kSW50ZW50fScgYXQgdGhlIGVuZCBvZiBpbnN0cnVtZW50aW5nLmApO1xuICAgICAgICAgIGF3YWl0IHRoaXMuYWRiLmJyb2FkY2FzdCh0aGlzLmNhcHMuYW5kcm9pZENvdmVyYWdlRW5kSW50ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2dnZXIud2FybignTm8gYW5kcm9pZENvdmVyYWdlRW5kSW50ZW50IGlzIGNvbmZpZ3VyZWQgaW4gY2Fwcy4gUG9zc2libHkgeW91IGNhbm5vdCBnZXQgY292ZXJhZ2UgZmlsZS4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0cy5hcHBQYWNrYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGIuZm9yY2VTdG9wKHRoaXMub3B0cy5hcHBQYWNrYWdlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oYFVuYWJsZSB0byBmb3JjZSBzdG9wIGFwcDogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0cy5mdWxsUmVzZXQgJiYgIXRoaXMub3B0cy5za2lwVW5pbnN0YWxsICYmICF0aGlzLmFwcE9uRGV2aWNlKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FwYWJpbGl0eSAnZnVsbFJlc2V0JyBzZXQgdG8gJ3RydWUnLCBVbmluc3RhbGxpbmcgJyR7dGhpcy5vcHRzLmFwcFBhY2thZ2V9J2ApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYWRiLnVuaW5zdGFsbEFwayh0aGlzLm9wdHMuYXBwUGFja2FnZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gdW5pbnN0YWxsIGFwcDogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5hZGIuc3RvcExvZ2NhdCgpO1xuICAgICAgaWYgKHV0aWwuaGFzVmFsdWUodGhpcy5vcHRzLnN5c3RlbVBvcnQpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGIucmVtb3ZlUG9ydEZvcndhcmQodGhpcy5vcHRzLnN5c3RlbVBvcnQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gcmVtb3ZlIHBvcnQgZm9yd2FyZCAnJHtlcnJvci5tZXNzYWdlfSdgKTtcbiAgICAgICAgICAvLyBJZ25vcmUsIHRoaXMgYmxvY2sgd2lsbCBhbHNvIGJlIGNhbGxlZCB3aGVuIHdlIGZhbGwgaW4gY2F0Y2ggYmxvY2tcbiAgICAgICAgICAvLyBhbmQgYmVmb3JlIGV2ZW4gcG9ydCBmb3J3YXJkLlxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhd2FpdCB0aGlzLmFkYi5nZXRBcGlMZXZlbCgpID49IDI4KSB7IC8vIEFuZHJvaWQgUFxuICAgICAgICBsb2dnZXIuaW5mbygnUmVzdG9yaW5nIGhpZGRlbiBhcGkgcG9saWN5IHRvIHRoZSBkZXZpY2UgZGVmYXVsdCBjb25maWd1cmF0aW9uJyk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRiLnNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3koKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0cy5yZWJvb3QpIHtcbiAgICAgICAgbGV0IGF2ZE5hbWUgPSB0aGlzLm9wdHMuYXZkLnJlcGxhY2UoJ0AnLCAnJyk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2xvc2luZyBlbXVsYXRvciAnJHthdmROYW1lfSdgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkYi5raWxsRW11bGF0b3IoYXZkTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBVbmFibGUgdG8gY2xvc2UgZW11bGF0b3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMubWpwZWdTdHJlYW0pIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdDbG9zaW5nIE1KUEVHIHN0cmVhbScpO1xuICAgICAgdGhpcy5tanBlZ1N0cmVhbS5zdG9wKCk7XG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLmRlbGV0ZVNlc3Npb24oKTtcbiAgfVxuXG4gIGFzeW5jIGNoZWNrQXBwUHJlc2VudCAoKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdDaGVja2luZyB3aGV0aGVyIGFwcCBpcyBhY3R1YWxseSBwcmVzZW50Jyk7XG4gICAgaWYgKCEoYXdhaXQgZnMuZXhpc3RzKHRoaXMub3B0cy5hcHApKSkge1xuICAgICAgbG9nZ2VyLmVycm9yQW5kVGhyb3coYENvdWxkIG5vdCBmaW5kIGFwcCBhcGsgYXQgJyR7dGhpcy5vcHRzLmFwcH0nYCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25TZXR0aW5nc1VwZGF0ZSAoKSB7XG4gICAgLy8gaW50ZW50aW9uYWxseSBkbyBub3RoaW5nIGhlcmUsIHNpbmNlIGNvbW1hbmRzLnVwZGF0ZVNldHRpbmdzIHByb3hpZXNcbiAgICAvLyBzZXR0aW5ncyB0byB0aGUgdWlhdXRvMiBzZXJ2ZXIgYWxyZWFkeVxuICB9XG5cbiAgLy8gTmVlZCB0byBvdmVycmlkZSBhbmRyb2lkLWRyaXZlcidzIHZlcnNpb24gb2YgdGhpcyBzaW5jZSB3ZSBkb24ndCBhY3R1YWxseVxuICAvLyBoYXZlIGEgYm9vdHN0cmFwOyBpbnN0ZWFkIHdlIGp1c3QgcmVzdGFydCBhZGIgYW5kIHJlLWZvcndhcmQgdGhlIFVpQXV0b21hdG9yMlxuICAvLyBwb3J0XG4gIGFzeW5jIHdyYXBCb290c3RyYXBEaXNjb25uZWN0ICh3cmFwcGVkKSB7XG4gICAgYXdhaXQgd3JhcHBlZCgpO1xuICAgIGF3YWl0IHRoaXMuYWRiLnJlc3RhcnQoKTtcbiAgICBhd2FpdCB0aGlzLmFkYi5mb3J3YXJkUG9ydCh0aGlzLm9wdHMuc3lzdGVtUG9ydCwgREVWSUNFX1BPUlQpO1xuICB9XG5cbiAgcHJveHlBY3RpdmUgKHNlc3Npb25JZCkge1xuICAgIHN1cGVyLnByb3h5QWN0aXZlKHNlc3Npb25JZCk7XG5cbiAgICAvLyB3ZSBhbHdheXMgaGF2ZSBhbiBhY3RpdmUgcHJveHkgdG8gdGhlIFVpQXV0b21hdG9yMiBzZXJ2ZXJcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNhblByb3h5IChzZXNzaW9uSWQpIHtcbiAgICBzdXBlci5jYW5Qcm94eShzZXNzaW9uSWQpO1xuXG4gICAgLy8gd2UgY2FuIGFsd2F5cyBwcm94eSB0byB0aGUgdWlhdXRvbWF0b3IyIHNlcnZlclxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0UHJveHlBdm9pZExpc3QgKHNlc3Npb25JZCkge1xuICAgIHN1cGVyLmdldFByb3h5QXZvaWRMaXN0KHNlc3Npb25JZCk7XG4gICAgLy8gd2UgYXJlIG1haW50YWluaW5nIHR3byBzZXRzIG9mIE5PX1BST1hZIGxpc3RzLCBvbmUgZm9yIGNocm9tZWRyaXZlcihDSFJPTUVfTk9fUFJPWFkpXG4gICAgLy8gYW5kIG9uZSBmb3IgdWlhdXRvbWF0b3IyKE5PX1BST1hZKSwgYmFzZWQgb24gY3VycmVudCBjb250ZXh0IHdpbGwgcmV0dXJuIHJlbGF0ZWQgTk9fUFJPWFkgbGlzdFxuICAgIGlmICh1dGlsLmhhc1ZhbHVlKHRoaXMuY2hyb21lZHJpdmVyKSkge1xuICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgY29udGV4dCBpcyB3ZWJ2aWV3KGNocm9tZWRyaXZlciksIHRoZW4gcmV0dXJuIENIUk9NRV9OT19QUk9YWSBsaXN0XG4gICAgICB0aGlzLmp3cFByb3h5QXZvaWQgPSBDSFJPTUVfTk9fUFJPWFk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuandwUHJveHlBdm9pZCA9IE5PX1BST1hZO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRzLm5hdGl2ZVdlYlNjcmVlbnNob3QpIHtcbiAgICAgIHRoaXMuandwUHJveHlBdm9pZCA9IFsuLi50aGlzLmp3cFByb3h5QXZvaWQsIFsnR0VUJywgbmV3IFJlZ0V4cCgnXi9zZXNzaW9uL1teL10rL3NjcmVlbnNob3QnKV1dO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmp3cFByb3h5QXZvaWQ7XG4gIH1cblxuICBnZXQgaXNDaHJvbWVTZXNzaW9uICgpIHtcbiAgICByZXR1cm4gaGVscGVycy5pc0Nocm9tZUJyb3dzZXIodGhpcy5vcHRzLmJyb3dzZXJOYW1lKTtcbiAgfVxufVxuXG4vLyBmaXJzdCBhZGQgdGhlIGFuZHJvaWQtZHJpdmVyIGNvbW1hbmRzIHdoaWNoIHdlIHdpbGwgZmFsbCBiYWNrIHRvXG5mb3IgKGxldCBbY21kLCBmbl0gb2YgXy50b1BhaXJzKGFuZHJvaWRDb21tYW5kcykpIHtcbiAgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlci5wcm90b3R5cGVbY21kXSA9IGZuO1xufVxuXG4vLyB0aGVuIG92ZXJ3cml0ZSB3aXRoIGFueSB1aWF1dG9tYXRvcjItc3BlY2lmaWMgY29tbWFuZHNcbmZvciAobGV0IFtjbWQsIGZuXSBvZiBfLnRvUGFpcnMoY29tbWFuZHMpKSB7XG4gIEFuZHJvaWRVaWF1dG9tYXRvcjJEcml2ZXIucHJvdG90eXBlW2NtZF0gPSBmbjtcbn1cblxuZXhwb3J0IHsgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlciB9O1xuZXhwb3J0IGRlZmF1bHQgQW5kcm9pZFVpYXV0b21hdG9yMkRyaXZlcjtcbiJdLCJmaWxlIjoibGliL2RyaXZlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
